<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RegistrationCfxDetailsTransformer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-portal</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.transformer</a> &gt; <span class="el_source">RegistrationCfxDetailsTransformer.java</span></div><h1>RegistrationCfxDetailsTransformer.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.transformer;

import java.util.ArrayList;
import java.util.List;
import java.util.TreeMap;

import org.springframework.stereotype.Component;

import com.currenciesdirect.gtg.compliance.core.ITransform;
import com.currenciesdirect.gtg.compliance.core.domain.AccountWrapper;
import com.currenciesdirect.gtg.compliance.core.domain.Blacklist;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterSummary;
import com.currenciesdirect.gtg.compliance.commons.domain.profile.request.Company;
import com.currenciesdirect.gtg.compliance.core.domain.Constants;
import com.currenciesdirect.gtg.compliance.core.domain.ContactWrapper;
import com.currenciesdirect.gtg.compliance.commons.domain.profile.request.CorperateCompliance;
import com.currenciesdirect.gtg.compliance.core.domain.EventDBDto;
import com.currenciesdirect.gtg.compliance.core.domain.Fraugster;
import com.currenciesdirect.gtg.compliance.core.domain.FraugsterDetails;
import com.currenciesdirect.gtg.compliance.core.domain.InternalRule;
import com.currenciesdirect.gtg.compliance.core.domain.Intuition;
import com.currenciesdirect.gtg.compliance.core.domain.IntuitionDetails;
import com.currenciesdirect.gtg.compliance.core.domain.Kyc;
import com.currenciesdirect.gtg.compliance.core.domain.KycDetails;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationAccount;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationCfxDetailsDto;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationCompany;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationContact;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationCorperateCompliance;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationRiskProfile;
import com.currenciesdirect.gtg.compliance.commons.domain.profile.request.RiskProfile;
import com.currenciesdirect.gtg.compliance.commons.domain.transactionmonitoring.TransactionMonitoringAccountSummary;
import com.currenciesdirect.gtg.compliance.commons.domain.transactionmonitoring.TransactionMonitoringContactSummary;
import com.currenciesdirect.gtg.compliance.core.domain.Sanction;
import com.currenciesdirect.gtg.compliance.core.domain.SanctionDetails;
import com.currenciesdirect.gtg.compliance.core.domain.StatusReason;
import com.currenciesdirect.gtg.compliance.core.domain.StatusReasonData;
import com.currenciesdirect.gtg.compliance.core.domain.Watchlist;
import com.currenciesdirect.gtg.compliance.core.domain.internalrule.BlacklistSummary;
import com.currenciesdirect.gtg.compliance.core.domain.kyc.KYCSummary;
import com.currenciesdirect.gtg.compliance.core.domain.registration.RegistrationCfxContactDetailsDto;
import com.currenciesdirect.gtg.compliance.core.domain.registration.RegistrationCfxDetailsDBDto;
import com.currenciesdirect.gtg.compliance.core.domain.registration.RegistrationDetailsDBDto;
import com.currenciesdirect.gtg.compliance.core.domain.sanction.SanctionSummary;
import com.currenciesdirect.gtg.compliance.util.DateTimeFormatter;
import com.currenciesdirect.gtg.compliance.util.JsonConverterUtil;
import com.currenciesdirect.gtg.compliance.util.StringUtils;

/**
 * The Class RegistrationCfxDetailsTransformer.
 */
@Component(&quot;registrationCfxDetailsTransformer&quot;)
<span class="fc" id="L53">public class RegistrationCfxDetailsTransformer extends AbstractRegistrationTransformer</span>
		implements ITransform&lt;RegistrationCfxDetailsDto, RegistrationCfxDetailsDBDto&gt; {

	/* (non-Javadoc)
	 * @see com.currenciesdirect.gtg.compliance.core.ITransform#transform(java.lang.Object)
	 */
	@Override
	public RegistrationCfxDetailsDto transform(RegistrationCfxDetailsDBDto detailsDto) {
<span class="fc" id="L61">		RegistrationCfxDetailsDto regCfxDetailsDto = new RegistrationCfxDetailsDto();</span>

<span class="fc bfc" id="L63" title="All 2 branches covered.">		for (RegistrationDetailsDBDto dbDto : detailsDto.getRegCfxDetailsDBDto()) {</span>
<span class="fc" id="L64">			regCfxDetailsDto.setInternalRule(getAccountInternalRule(dbDto));</span>
<span class="fc" id="L65">			regCfxDetailsDto.setSanctionDetails(getCompanySanction(dbDto));</span>
<span class="fc" id="L66">			regCfxDetailsDto.setIntuitionDetails(getAccountIntuition(dbDto)); //AT-4114</span>
<span class="fc" id="L67">		}</span>

<span class="fc" id="L69">		regCfxDetailsDto.setAccount(getAccount(detailsDto));</span>
<span class="fc" id="L70">		regCfxDetailsDto.setCurrentContact(getCurrentContactDetails(detailsDto));</span>
<span class="fc" id="L71">		regCfxDetailsDto.setContactDetails(getContactList(detailsDto));</span>
<span class="fc" id="L72">		regCfxDetailsDto.setDocumentList(detailsDto.getDocumentTypeList());</span>
<span class="fc" id="L73">		Watchlist watchlist = deleteDuplicateWatclist(detailsDto.getWatachList());</span>
<span class="fc" id="L74">		regCfxDetailsDto.setWatchlist(watchlist);</span>
<span class="fc" id="L75">		regCfxDetailsDto.setStatusReason(deleteDuplicateContactReason(detailsDto.getContactStatusReason()));</span>
<span class="fc" id="L76">		detailsDto.getActivityLogs().setTotalRecords(detailsDto.getActivityLogs().getActivityLogData().size());</span>

<span class="pc bpc" id="L78" title="1 of 2 branches missed.">		if (detailsDto.getActivityLogs().getActivityLogData().size() &lt;= 10) {</span>
<span class="fc" id="L79">			regCfxDetailsDto.setActivityLogs(detailsDto.getActivityLogs());</span>
		} else {
<span class="nc" id="L81">			detailsDto.getActivityLogs()</span>
<span class="nc" id="L82">					.setActivityLogData(detailsDto.getActivityLogs().getActivityLogData().subList(0, 10));</span>
<span class="nc" id="L83">			regCfxDetailsDto.setActivityLogs(detailsDto.getActivityLogs());</span>
		}

<span class="fc" id="L86">		RegistrationDetailsDBDto dbDtoLockResource = detailsDto.getRegCfxDetailsDBDto().get(0);</span>
<span class="pc bpc" id="L87" title="3 of 4 branches missed.">		if (dbDtoLockResource.getLockedBy() != null &amp;&amp; !dbDtoLockResource.getLockedBy().isEmpty()) {</span>
<span class="nc" id="L88">			regCfxDetailsDto.setLocked(Boolean.TRUE);</span>
<span class="nc" id="L89">			regCfxDetailsDto.setLockedBy(dbDtoLockResource.getLockedBy());</span>
<span class="nc" id="L90">			regCfxDetailsDto.setUserResourceId(dbDtoLockResource.getUserResourceId());</span>
		}
<span class="fc" id="L92">		regCfxDetailsDto.setPaginationDetails(detailsDto.getPaginationDetails());</span>
<span class="fc" id="L93">		regCfxDetailsDto.setAlertComplianceLog(detailsDto.getAlertComplianceLog());</span>
<span class="fc" id="L94">		regCfxDetailsDto.setIsOnQueue(detailsDto.getIsOnQueue());</span>
<span class="fc" id="L95">		regCfxDetailsDto.setDataAnonStatus(detailsDto.getDataAnonStatus());</span>
<span class="fc" id="L96">		regCfxDetailsDto.setPoiExists(detailsDto.getPoiExists());</span>
		
		//Added for AT-4190
<span class="pc bpc" id="L99" title="1 of 2 branches missed.">		if(detailsDto.getRegCfxDetailsDBDto().get(0).getIntuitionRiskLevel()!=null) {</span>
<span class="fc" id="L100">			regCfxDetailsDto.setIntuitionRiskLevel(detailsDto.getRegCfxDetailsDBDto().get(0).getIntuitionRiskLevel());</span>
		}
<span class="fc" id="L102">		regCfxDetailsDto.setAccountVersion(detailsDto.getRegCfxDetailsDBDto().get(0).getAccountVersion());</span>
<span class="fc" id="L103">		return regCfxDetailsDto;</span>
	}

	/**
	 * Gets the current contact details.
	 *
	 * @param dbDto the db dto
	 * @return the current contact details
	 */
	private ContactWrapper getCurrentContactDetails(RegistrationCfxDetailsDBDto dbDto) {
<span class="fc" id="L113">		ContactWrapper contact = new ContactWrapper();</span>
<span class="fc" id="L114">		RegistrationDetailsDBDto detailsDto = dbDto.getRegCfxDetailsDBDto().get(0);</span>

<span class="fc bfc" id="L116" title="All 2 branches covered.">		for (RegistrationDetailsDBDto contactDto : dbDto.getRegCfxDetailsDBDto()) {</span>

<span class="fc" id="L118">			RegistrationContact regCfxContact = JsonConverterUtil.convertToObject(RegistrationContact.class,</span>
<span class="fc" id="L119">					contactDto.getContactAttrib());</span>
<span class="pc bpc" id="L120" title="1 of 2 branches missed.">			if (Boolean.TRUE.equals(regCfxContact.getPrimaryContact())) {</span>
<span class="fc" id="L121">				contact.setCrmContactId(regCfxContact.getContactSFID());</span>
			}
<span class="fc" id="L123">		}</span>

<span class="fc" id="L125">		contact.setId(detailsDto.getCurrentContactId());</span>
<span class="fc" id="L126">		contact.setCcCrmContactId(detailsDto.getCcCrmContactId());</span>
<span class="fc" id="L127">		contact.setCrmAccountId(detailsDto.getCrmAccountId());</span>
<span class="fc" id="L128">		contact.setRegComplete(DateTimeFormatter.dateTimeFormatter(detailsDto.getRegComp()));</span>
<span class="fc" id="L129">		contact.setRegIn(DateTimeFormatter.dateTimeFormatter(detailsDto.getRegIn()));</span>
<span class="fc" id="L130">		return contact;</span>
	}

	/**
	 * Gets the account.
	 *
	 * @param dbDto the db dto
	 * @return the account
	 */
	private AccountWrapper getAccount(RegistrationCfxDetailsDBDto dbDto) {
<span class="fc" id="L140">		AccountWrapper account = new AccountWrapper();</span>
<span class="fc" id="L141">		RegistrationDetailsDBDto detailsDto = dbDto.getRegCfxDetailsDBDto().get(0);</span>
<span class="fc" id="L142">		RegistrationAccount regCfxAccount = JsonConverterUtil.convertToObject(RegistrationAccount.class,</span>
<span class="fc" id="L143">				detailsDto.getAccountAttrib());</span>

<span class="pc bpc" id="L145" title="1 of 2 branches missed.">		if (regCfxAccount != null) {</span>
<span class="fc" id="L146">			account.setClientType(regCfxAccount.getCustType());</span>
<span class="fc" id="L147">			account.setCurrencyPair(regCfxAccount.getSellingCurrency() + &quot; - &quot; + regCfxAccount.getBuyingCurrency());</span>
<span class="fc" id="L148">			account.setEstimTransValue(regCfxAccount.getValueOfTransaction());</span>
<span class="fc" id="L149">			account.setPurposeOfTran(regCfxAccount.getPurposeOfTran());</span>
<span class="fc" id="L150">			account.setServiceRequired(regCfxAccount.getServiceRequired());</span>
<span class="fc" id="L151">			account.setSource(regCfxAccount.getSource());</span>
<span class="fc" id="L152">			account.setSourceOfFund(regCfxAccount.getSourceOfFund());</span>
<span class="fc" id="L153">			account.setRefferalText(regCfxAccount.getReferralText());</span>
<span class="fc" id="L154">			account.setAffiliateName(regCfxAccount.getAffiliateName());</span>
<span class="fc" id="L155">			account.setRegMode(regCfxAccount.getRegistrationMode());</span>
<span class="pc bpc" id="L156" title="1 of 2 branches missed.">			if (null != regCfxAccount.getCompany()) {</span>
<span class="fc" id="L157">				account.setCompany(getCompany(regCfxAccount.getCompany()));</span>
			}
<span class="pc bpc" id="L159" title="1 of 2 branches missed.">			if (null != regCfxAccount.getRiskProfile()) {</span>
<span class="fc" id="L160">				account.setRiskProfile(getRiskProfile(regCfxAccount.getRiskProfile()));</span>
			}
<span class="pc bpc" id="L162" title="1 of 2 branches missed.">			if (null != regCfxAccount.getRiskProfile()) {</span>
<span class="fc" id="L163">				account.setCorperateCompliance(getCorporateCompliance(regCfxAccount.getCorperateCompliance()));</span>
			}
<span class="fc" id="L165">			account.setName(regCfxAccount.getAccountName());</span>
<span class="fc" id="L166">			account.setWebsite(regCfxAccount.getWebsite());</span>
<span class="fc" id="L167">			account.setSourceLookup(regCfxAccount.getSubSource());</span>
<span class="fc" id="L168">			account.setAvgTransactionValue(StringUtils.getNumberFormat(String.valueOf(regCfxAccount.getAverageTransactionValue())));</span>
<span class="fc" id="L169">			account.setCountriesOfOperation(regCfxAccount.getCountriesOfOperation());</span>
<span class="fc" id="L170">			account.setAnnualFXRequirement(StringUtils.getNumberFormat(regCfxAccount.getTurnover()));</span>
		}
<span class="fc" id="L172">		account.setComplianceStatus(detailsDto.getAccComplianceStatus());</span>
<span class="fc" id="L173">		account.setId(detailsDto.getAccountId());</span>
<span class="fc" id="L174">		account.setOrgCode(detailsDto.getOrgnization());</span>
<span class="fc" id="L175">		account.setTradeAccountNumber(detailsDto.getTradeAccountNum());</span>
<span class="fc" id="L176">		account.setTradeAccountID(Integer.valueOf(detailsDto.getTradeAccountId()));</span>
<span class="fc" id="L177">		account.setAccountTMFlag(detailsDto.getAccountTMFlag());</span>
<span class="pc bpc" id="L178" title="1 of 2 branches missed.">		if(detailsDto.getRegCompAccount() != null){</span>
<span class="nc" id="L179">			account.setRegCompleteAccount(detailsDto.getRegCompAccount().toString());</span>
		}else {
<span class="fc" id="L181">			account.setRegCompleteAccount(Constants.DASH_UI);</span>
		}
<span class="pc bpc" id="L183" title="2 of 4 branches missed.">		if (detailsDto.getLegalEntity() != null &amp;&amp; !detailsDto.getLegalEntity().isEmpty())</span>
<span class="fc" id="L184">			account.setLegalEntity(detailsDto.getLegalEntity());</span>
		else
<span class="nc" id="L186">			account.setLegalEntity(Constants.DASH_UI);</span>
<span class="pc bpc" id="L187" title="1 of 2 branches missed.">		if(null != detailsDto.getRegistrationInDate()){</span>
<span class="fc" id="L188">			account.setRegistrationInDate(detailsDto.getRegistrationInDate().toString());</span>
		}
<span class="pc bpc" id="L190" title="1 of 2 branches missed.">		if(null != detailsDto.getComplianceExpiry()){</span>
<span class="nc" id="L191">			account.setComplianceExpiry(detailsDto.getComplianceExpiry().toString());</span>
		}else {
<span class="fc" id="L193">			account.setComplianceExpiry(null);</span>
		}
<span class="fc" id="L195">		return account;</span>
	}

	/**
	 * Gets the company.
	 *
	 * @param comanyDetails the comany details
	 * @return the company
	 */
	private Company getCompany(RegistrationCompany comanyDetails) {
<span class="fc" id="L205">		Company company = new Company();</span>

<span class="fc" id="L207">		company.setBillingAddress(comanyDetails.getBillingAddress());</span>
<span class="fc" id="L208">		company.setCcj(comanyDetails.getCcj());</span>
<span class="fc" id="L209">		company.setCompanyPhone(comanyDetails.getCompanyPhone());</span>
<span class="fc" id="L210">		company.setCorporateType(comanyDetails.getCorporateType());</span>
<span class="fc" id="L211">		company.setCountryOfEstablishment(comanyDetails.getCountryOfEstablishment());</span>
<span class="fc" id="L212">		company.setCountryRegion(comanyDetails.getCountryRegion());</span>
<span class="fc" id="L213">		company.setEstNoTransactionsPcm(comanyDetails.getEstNoTransactionsPcm());</span>
<span class="fc" id="L214">		company.setEtailer(comanyDetails.getEtailer());</span>
<span class="fc" id="L215">		company.setIncorporationDate(DateTimeFormatter.getDateInRFC3339(comanyDetails.getIncorporationDate()));</span>
<span class="fc" id="L216">		company.setIndustry(comanyDetails.getIndustry());</span>
<span class="fc" id="L217">		company.setOngoingDueDiligenceDate(DateTimeFormatter.dateFormat(comanyDetails.getOngoingDueDiligenceDate()));</span>
<span class="fc" id="L218">		company.setOption(comanyDetails.getOption());</span>
<span class="fc" id="L219">		company.setRegistrationNo(comanyDetails.getRegistrationNo());</span>
<span class="fc" id="L220">		company.setShippingAddress(comanyDetails.getShippingAddress());</span>
<span class="fc" id="L221">		company.settAndcSignedDate(DateTimeFormatter.dateFormat(comanyDetails.gettAndcSignedDate()));</span>
<span class="fc" id="L222">		company.setTypeOfFinancialAccount(comanyDetails.getTypeOfFinancialAccount());</span>
<span class="fc" id="L223">		company.setVatNo(comanyDetails.getVatNo());</span>

<span class="fc" id="L225">		return company;</span>
	}

	/**
	 * Gets the risk profile.
	 *
	 * @param riskProfileDetails the risk profile details
	 * @return the risk profile
	 */
	private RiskProfile getRiskProfile(RegistrationRiskProfile riskProfileDetails) {
<span class="fc" id="L235">		RiskProfile riskProfile = new RiskProfile();</span>

<span class="fc" id="L237">		riskProfile.setCountryRiskIndicator(riskProfileDetails.getCountryRiskIndicator());</span>
<span class="fc" id="L238">		riskProfile.setDelinquencyFailureScore(riskProfileDetails.getDelinquencyFailureScore());</span>
<span class="fc" id="L239">		riskProfile.setFailureScore(riskProfileDetails.getFailureScore());</span>
<span class="fc" id="L240">		riskProfile.setRiskDirection(riskProfileDetails.getRiskDirection());</span>
<span class="fc" id="L241">		riskProfile.setRiskTrend(riskProfileDetails.getRiskTrend());</span>
<span class="fc" id="L242">		riskProfile.setUpdatedRisk(riskProfileDetails.getUpdatedRisk());</span>
		//newly added DNB DAta
<span class="fc" id="L244">		riskProfile.setContinent(riskProfileDetails.getContinent());</span>
<span class="fc" id="L245">		riskProfile.setCountry(riskProfileDetails.getCountry());</span>
<span class="fc" id="L246">		riskProfile.setStateCountry(riskProfileDetails.getStateCountry());</span>
<span class="fc" id="L247">		riskProfile.setDunsNumber(riskProfileDetails.getDunsNumber());</span>
<span class="fc" id="L248">		riskProfile.setTradingStyles(riskProfileDetails.getTradingStyles());</span>
<span class="fc" id="L249">		riskProfile.setUs1987PrimarySic4Digit(riskProfileDetails.getUs1987PrimarySic4Digit());</span>
<span class="fc" id="L250">		riskProfile.setFinancialFiguresMonth(riskProfileDetails.getFinancialFiguresMonth());</span>
<span class="fc" id="L251">		riskProfile.setFinancialFiguresYear(riskProfileDetails.getFinancialFiguresYear());</span>
<span class="fc" id="L252">		riskProfile.setFinancialYearEndDate(riskProfileDetails.getFinancialYearEndDate());</span>
<span class="fc" id="L253">		riskProfile.setAnnualSales(riskProfileDetails.getAnnualSales());</span>
<span class="fc" id="L254">		riskProfile.setModelledAnnualSales(riskProfileDetails.getModelledAnnualSales());</span>
<span class="fc" id="L255">		riskProfile.setNetWorthAmount(riskProfileDetails.getNetWorthAmount());</span>
<span class="fc" id="L256">		riskProfile.setModelledNetWorth(riskProfileDetails.getModelledNetWorth());</span>
<span class="fc" id="L257">		riskProfile.setLocationType(riskProfileDetails.getLocationType());</span>
<span class="fc" id="L258">		riskProfile.setImportExportIndicator(riskProfileDetails.getImportExportIndicator());</span>
<span class="fc" id="L259">		riskProfile.setDomesticUltimateRecord(riskProfileDetails.getDomesticUltimateRecord());</span>
<span class="fc" id="L260">		riskProfile.setGlobalUltimateRecord(riskProfileDetails.getGlobalUltimateRecord());</span>
<span class="fc" id="L261">		riskProfile.setGroupStructureNumberOfLevels(riskProfileDetails.getGroupStructureNumberOfLevels());</span>
<span class="fc" id="L262">		riskProfile.setHeadquarterDetails(riskProfileDetails.getHeadquarterDetails());</span>
<span class="fc" id="L263">		riskProfile.setImmediateParentDetails(riskProfileDetails.getImmediateParentDetails());</span>
<span class="fc" id="L264">		riskProfile.setDomesticUltimateParentDetails(riskProfileDetails.getDomesticUltimateParentDetails());</span>
<span class="fc" id="L265">		riskProfile.setGlobalUltimateParentDetails(riskProfileDetails.getGlobalUltimateParentDetails());</span>
<span class="fc" id="L266">		riskProfile.setCreditLimit(riskProfileDetails.getCreditLimit());</span>
<span class="fc" id="L267">		riskProfile.setRiskRating(riskProfileDetails.getRiskRating());</span>
<span class="fc" id="L268">		riskProfile.setProfitLoss(riskProfileDetails.getProfitLoss());</span>
		//newly added DNB DAta ends
		
		

<span class="fc" id="L273">		return riskProfile;</span>
	}

	/**
	 * Gets the corporate compliance.
	 *
	 * @param corpComplianceDetails the corp compliance details
	 * @return the corporate compliance
	 */
	private CorperateCompliance getCorporateCompliance(RegistrationCorperateCompliance corpComplianceDetails) {
<span class="fc" id="L283">		CorperateCompliance corporateCompliance = new CorperateCompliance();</span>

<span class="fc" id="L285">		corporateCompliance.setFixedAssets(corpComplianceDetails.getFixedAssets());</span>
<span class="fc" id="L286">		corporateCompliance.setForeignOwnedCompany(corpComplianceDetails.getForeignOwnedCompany());</span>
<span class="fc" id="L287">		corporateCompliance.setFormerName(corpComplianceDetails.getFormerName());</span>
<span class="fc" id="L288">		corporateCompliance.setLegalForm(corpComplianceDetails.getLegalForm());</span>
<span class="fc" id="L289">		corporateCompliance.setNetWorth(corpComplianceDetails.getNetWorth());</span>
<span class="fc" id="L290">		corporateCompliance.setRegistrationNumber(corpComplianceDetails.getRegistrationNumber());</span>
<span class="fc" id="L291">		corporateCompliance.setSic(corpComplianceDetails.getSic());</span>
<span class="fc" id="L292">		corporateCompliance.setSicDesc(corpComplianceDetails.getSicDesc());</span>
<span class="fc" id="L293">		corporateCompliance.setTotalLiabilitiesAndEquities(corpComplianceDetails.getTotalLiabilitiesAndEquities());</span>
<span class="fc" id="L294">		corporateCompliance.setTotalShareHolders(corpComplianceDetails.getTotalShareHolders());</span>
		// newly added dnb data for corporate compliance added by neelesh pant
<span class="fc" id="L296">		corporateCompliance.setGlobalUltimateDuns(corpComplianceDetails.getGlobalUltimateDuns());</span>
<span class="fc" id="L297">		corporateCompliance.setGlobalUltimateName(corpComplianceDetails.getGlobalUltimateName());</span>
<span class="fc" id="L298">		corporateCompliance.setGlobalUltimateCountry(corpComplianceDetails.getGlobalUltimateCountry());</span>
<span class="fc" id="L299">		corporateCompliance.setRegistrationDate(corpComplianceDetails.getRegistrationDate());</span>
<span class="fc" id="L300">		corporateCompliance.setMatchName(corpComplianceDetails.getMatchName());</span>
<span class="fc" id="L301">		corporateCompliance.setIsoCountryCode2Digit(corpComplianceDetails.getIsoCountryCode2Digit());</span>
<span class="fc" id="L302">		corporateCompliance.setIsoCountryCode3Digit(corpComplianceDetails.getIsoCountryCode2Digit());</span>
<span class="fc" id="L303">		corporateCompliance.setStatementDate(corpComplianceDetails.getStatementDate());</span>
<span class="fc" id="L304">		corporateCompliance.setGrossIncome(corpComplianceDetails.getGrossIncome());</span>
<span class="fc" id="L305">		corporateCompliance.setNetIncome(corpComplianceDetails.getNetIncome());</span>
<span class="fc" id="L306">		corporateCompliance.setTotalCurrentAssets(corpComplianceDetails.getTotalCurrentAssets());</span>
<span class="fc" id="L307">		corporateCompliance.setTotalAssets(corpComplianceDetails.getTotalAssets());</span>
<span class="fc" id="L308">		corporateCompliance.setTotalLongTermLiabilities(corpComplianceDetails.getTotalLongTermLiabilities());</span>
<span class="fc" id="L309">		corporateCompliance.setTotalCurrentLiabilities(corpComplianceDetails.getTotalCurrentLiabilities());</span>
<span class="fc" id="L310">		corporateCompliance.setTotalMatchedShareholders(corpComplianceDetails.getTotalMatchedShareholders());</span>
<span class="fc" id="L311">		corporateCompliance.setFinancialStrength(corpComplianceDetails.getFinancialStrength());</span>
		//newly added DnB data ends

<span class="fc" id="L314">		return corporateCompliance;</span>
	}

	/**
	 * Gets the account internal rule.
	 *
	 * @param dbDto the db dto
	 * @return the account internal rule
	 */
	private List&lt;InternalRule&gt; getAccountInternalRule(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L324">		List&lt;InternalRule&gt; internalRuleList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L325">		InternalRule internalRule = new InternalRule();</span>
<span class="fc" id="L326">		internalRule.setBlacklist(getAccountBlackList(dbDto));</span>
<span class="fc" id="L327">		internalRuleList.add(internalRule);</span>
<span class="fc" id="L328">		return internalRuleList;</span>
	}

	/**
	 * Gets the company sanction.
	 *
	 * @param dbDto the db dto
	 * @return the company sanction
	 */
	private SanctionDetails getCompanySanction(RegistrationDetailsDBDto dbDto) {

<span class="fc" id="L339">		Integer passCount = 0;</span>
<span class="fc" id="L340">		Integer failCount = 0;</span>
<span class="fc" id="L341">		List&lt;Sanction&gt; sanctionList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L342">		Integer entityId = dbDto.getAccountId();</span>
<span class="fc" id="L343">		List&lt;EventDBDto&gt; sanctionEventDBDtos = dbDto.getEventDBDto().get(entityId + Constants.SANCTIONACCOUNT);</span>
<span class="fc" id="L344">		Sanction sanction = new Sanction();</span>
<span class="fc" id="L345">		SanctionDetails sanctionDetails = new SanctionDetails();</span>

<span class="pc bpc" id="L347" title="3 of 4 branches missed.">		if (sanctionEventDBDtos == null || sanctionEventDBDtos.isEmpty()) {</span>
<span class="fc" id="L348">			sanctionDetails.setSanctionTotalRecords(0);</span>
<span class="fc" id="L349">			return sanctionDetails;</span>
		}

<span class="nc" id="L352">		EventDBDto eventDBDto = sanctionEventDBDtos.get(0);</span>
<span class="nc" id="L353">		SanctionSummary summary = JsonConverterUtil.convertToObject(SanctionSummary.class, eventDBDto.getSummary());</span>
<span class="nc" id="L354">		sanction.setEventServiceLogId(eventDBDto.getId());</span>

<span class="nc bnc" id="L356" title="All 4 branches missed.">		if (summary != null &amp;&amp; !Constants.NOT_REQUIRED.equalsIgnoreCase(summary.getStatus())) {</span>
<span class="nc" id="L357">			setSanctionValues(sanction, summary);</span>
<span class="nc bnc" id="L358" title="All 4 branches missed.">			boolean status = summary.getStatus() != null &amp;&amp; Constants.PASS.equals(summary.getStatus());</span>
<span class="nc bnc" id="L359" title="All 2 branches missed.">			if (status) {</span>
<span class="nc" id="L360">				passCount = sanctionEventDBDtos.size();</span>
			} else {
<span class="nc" id="L362">				failCount = sanctionEventDBDtos.size();</span>
			}
<span class="nc" id="L364">			sanction.setUpdatedBy(eventDBDto.getUpdatedBy());</span>
<span class="nc" id="L365">			sanction.setUpdatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
<span class="nc" id="L366">			sanction.setStatus(status);</span>
<span class="nc" id="L367">			sanction.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L368">			sanction.setPrevStatusValue(summary.getStatus());</span>
<span class="nc" id="L369">		}</span>
		/**Changes made for AT-363
		 *If Name and email is blacklisted then Sanction status set to Not_Required on UI - Saylee
		 */
		else{
<span class="nc" id="L374">			setSanctionValues(sanction, summary);</span>
<span class="nc" id="L375">			sanction.setUpdatedBy(eventDBDto.getUpdatedBy());			</span>
<span class="nc" id="L376">			sanction.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L377">			sanction.setUpdatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
<span class="nc" id="L378">			sanction.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
		}
<span class="nc" id="L380">		sanctionDetails.setFailCount(failCount);</span>
<span class="nc" id="L381">		sanctionDetails.setPassCount(passCount);</span>
<span class="nc" id="L382">		sanctionDetails.setSanctionTotalRecords(sanctionEventDBDtos.size());</span>
<span class="nc" id="L383">		sanctionList.add(sanction);</span>
<span class="nc" id="L384">		sanctionDetails.setSanction(sanctionList);</span>
<span class="nc" id="L385">		return sanctionDetails;</span>
	}

	/**
	 * Set the value of each coloum on UI
	 * changes made by- Saylee.
	 *
	 * @param sanction the sanction
	 * @param summary the summary
	 */
	private void setSanctionValues(Sanction sanction, SanctionSummary summary) {
<span class="nc bnc" id="L396" title="All 2 branches missed.">		if(null != summary){</span>
<span class="nc" id="L397">			sanction.setWorldCheck(summary.getWorldCheck());</span>
<span class="nc" id="L398">			sanction.setSanctionId(summary.getSanctionId());</span>
<span class="nc" id="L399">			sanction.setOfacList(summary.getOfacList());</span>
		}
<span class="nc" id="L401">	}</span>

	/**
	 * Gets the contact list.
	 *
	 * @param detailsBDDto the details BD dto
	 * @return the contact list
	 */
	private List&lt;RegistrationCfxContactDetailsDto&gt; getContactList(RegistrationCfxDetailsDBDto detailsBDDto) {
<span class="fc" id="L410">		List&lt;RegistrationCfxContactDetailsDto&gt; regDetailsList = new ArrayList&lt;&gt;();</span>

<span class="fc bfc" id="L412" title="All 2 branches covered.">		for (RegistrationDetailsDBDto dbDto : detailsBDDto.getRegCfxDetailsDBDto()) {</span>

<span class="fc" id="L414">			RegistrationCfxContactDetailsDto regDetailsDto = new RegistrationCfxContactDetailsDto();</span>
<span class="fc" id="L415">			regDetailsDto.setCurrentContact(getCurrentContact(dbDto));</span>
<span class="fc" id="L416">			regDetailsDto.setKycDetails(getContactKyc(dbDto));</span>
<span class="fc" id="L417">			regDetailsDto.setSanctionDetails(getContactSanction(dbDto));</span>
<span class="fc" id="L418">			regDetailsDto.setFraugsterDetails(getContactFraugster(dbDto));</span>
<span class="fc" id="L419">			regDetailsDto.setInternalRule(getContactInternalRule(dbDto));</span>
			//regDetailsDto.setIntuitionDetails(getContactIntuition(dbDto)); //At-4114
<span class="pc bpc" id="L421" title="3 of 4 branches missed.">			if (dbDto.getLockedBy() != null &amp;&amp; !dbDto.getLockedBy().isEmpty()) {</span>
<span class="nc" id="L422">				regDetailsDto.setLocked(Boolean.TRUE);</span>
<span class="nc" id="L423">				regDetailsDto.setLockedBy(dbDto.getLockedBy());</span>
<span class="nc" id="L424">				regDetailsDto.setUserResourceId(dbDto.getUserResourceId());</span>
			}
<span class="fc" id="L426">			regDetailsList.add(regDetailsDto);</span>
<span class="fc" id="L427">		}</span>
<span class="fc" id="L428">		return regDetailsList;</span>
	}

	/**
	 * Gets the current contact.
	 *
	 * @param dbDto the db dto
	 * @return the current contact
	 */
	private ContactWrapper getCurrentContact(RegistrationDetailsDBDto dbDto) {

<span class="fc" id="L439">		ContactWrapper contact = new ContactWrapper();</span>
<span class="fc" id="L440">		RegistrationContact regCfxContact = JsonConverterUtil.convertToObject(RegistrationContact.class,</span>
<span class="fc" id="L441">				dbDto.getContactAttrib());</span>
<span class="fc" id="L442">		contact.setAccountId(dbDto.getAccountId());</span>
<span class="fc" id="L443">		contact.setAddress(getCompleteAddress(regCfxContact));</span>
<span class="fc" id="L444">		contact.setAddressType(regCfxContact.getAddressType());</span>
<span class="fc" id="L445">		contact.setAuthorisedSignatory(regCfxContact.getAuthorisedSignatory());</span>
<span class="fc" id="L446">		contact.setComplianceStatus(dbDto.getConComplianceStatus());</span>
<span class="fc" id="L447">		contact.setCrmAccountId(dbDto.getCrmAccountId());</span>
<span class="fc" id="L448">		contact.setCrmContactId(dbDto.getCrmContactId());</span>
<span class="fc" id="L449">		contact.setDesignation(regCfxContact.getDesignation());</span>
<span class="fc" id="L450">		contact.setEmail(regCfxContact.getEmail());</span>
<span class="fc" id="L451">		contact.setId(dbDto.getContactId());</span>
<span class="fc" id="L452">		contact.setIpAddress(regCfxContact.getIpAddress());</span>
<span class="fc" id="L453">		contact.setCountryOfResidence(dbDto.getCountryOfResidenceFullName()+&quot; (&quot;+regCfxContact.getCountry()+&quot;)&quot;);</span>
<span class="fc" id="L454">		contact.setIsUsClient(Boolean.FALSE);</span>
<span class="pc bpc" id="L455" title="2 of 4 branches missed.">		if (regCfxContact.getCountry() != null &amp;&amp; (Constants.USA).equals(regCfxContact.getCountry()))</span>
<span class="nc" id="L456">			contact.setIsUsClient(Boolean.TRUE);</span>
<span class="fc" id="L457">		contact.setJobTitle(regCfxContact.getJobTitle());</span>
<span class="fc" id="L458">		contact.setMobile(regCfxContact.getPhoneMobile());</span>
<span class="fc" id="L459">		contact.setName(regCfxContact.getFullName());</span>
<span class="fc" id="L460">		contact.setNationality(regCfxContact.getNationality());</span>
<span class="fc" id="L461">		contact.setOccupation(regCfxContact.getOccupation());</span>
<span class="fc" id="L462">		contact.setPhone(regCfxContact.getPhoneHome());</span>
<span class="fc" id="L463">		contact.setPositionOfSignificance(regCfxContact.getPositionOfSignificance());</span>
<span class="fc" id="L464">		contact.setRegComplete(DateTimeFormatter.dateTimeFormatter(dbDto.getRegComp()));</span>
<span class="fc" id="L465">		contact.setRegIn(DateTimeFormatter.dateTimeFormatter(dbDto.getRegIn()));</span>
<span class="fc" id="L466">		contact.setTradeContactID(Integer.valueOf(dbDto.getTradeContactId()));</span>
<span class="fc" id="L467">		contact.setOrganization(dbDto.getOrgnization());</span>
		//added By Neelesh Pant
<span class="fc" id="L469">		contact.setDob(DateTimeFormatter.getDateInRFC3339(regCfxContact.getDob()));</span>
<span class="pc bpc" id="L470" title="3 of 4 branches missed.">		if((!StringUtils.isNullOrEmpty(regCfxContact.getPhoneWorkExtn())) &amp;&amp; (!StringUtils.isNullOrEmpty(regCfxContact.getPhoneWork()))) {</span>
<span class="nc" id="L471">			contact.setPhoneWork(regCfxContact.getPhoneWork()+&quot;;&quot;+regCfxContact.getPhoneWorkExtn());</span>
		}
<span class="pc bpc" id="L473" title="3 of 4 branches missed.">	    if((!StringUtils.isNullOrEmpty(regCfxContact.getPhoneWorkExtn())) &amp;&amp; (StringUtils.isNullOrEmpty(regCfxContact.getPhoneWork()))) {</span>
<span class="nc" id="L474">			contact.setPhoneWork(regCfxContact.getPhoneWorkExtn());</span>
	    }
<span class="pc bpc" id="L476" title="2 of 4 branches missed.">	    if((StringUtils.isNullOrEmpty(regCfxContact.getPhoneWorkExtn()))&amp;&amp; (!StringUtils.isNullOrEmpty(regCfxContact.getPhoneWork()))) {</span>
<span class="fc" id="L477">			contact.setPhoneWork(regCfxContact.getPhoneWork());</span>
	    }
<span class="fc" id="L479">		contact.setIsCountrySupported(</span>
<span class="fc" id="L480">				checkIsKycSupportedCountry(regCfxContact.getCountry(), dbDto.getKycSupportedCountryList(), dbDto.getOrgnization(),dbDto.getLegalEntity()));</span>
<span class="fc" id="L481">		contact.setPrimaryContact(Boolean.FALSE);</span>
<span class="pc bpc" id="L482" title="1 of 2 branches missed.">		if (Boolean.TRUE.equals(regCfxContact.getPrimaryContact()))</span>
<span class="fc" id="L483">			contact.setPrimaryContact(Boolean.TRUE);</span>
<span class="fc" id="L484">		return contact;</span>
	}

	/**
	 * Purpose of method: -&gt; To set KYC response which we got from KYC micro
	 * service for contact of CFX account
	 * 
	 * Implementation: 1) In this method, we are fetching response of KYC micro
	 * service for Contact of CFX and if it is empty then we return it
	 * immediately. 2) But if response details are present, then we first check
	 * status of that response. 2a. If status is 'NOT_REQUIRED' then we show end
	 * user that status on UI. 2b. If status is other than 'NOT_REQUIRED' then
	 * we show details for that contact on UI side.
	 *
	 * @param dbDto the db dto
	 * @return the contact kyc
	 */
	private KycDetails getContactKyc(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L502">		KycDetails kycDetails = new KycDetails();</span>
<span class="fc" id="L503">		List&lt;Kyc&gt; kycList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L504">		Integer entityId = dbDto.getContactId();</span>
		// constant added by Vishal J
<span class="fc" id="L506">		List&lt;EventDBDto&gt; kycEventDBDtos = dbDto.getEventDBDto().get(entityId + Constants.KYCCONTACT);</span>

<span class="pc bpc" id="L508" title="3 of 4 branches missed.">		if (kycEventDBDtos == null || kycEventDBDtos.isEmpty()) {</span>
<span class="fc" id="L509">			kycDetails.setKycTotalRecords(0);</span>
<span class="fc" id="L510">			return kycDetails;</span>
		}

<span class="nc" id="L513">		EventDBDto kycEventDBDto = kycEventDBDtos.get(0);</span>
<span class="nc" id="L514">		KYCSummary kycSummary = JsonConverterUtil.convertToObject(KYCSummary.class, kycEventDBDto.getSummary());</span>

<span class="nc bnc" id="L516" title="All 2 branches missed.">		if (kycSummary == null) {</span>
<span class="nc" id="L517">			kycDetails.setFailCount(kycEventDBDtos.size());</span>
<span class="nc" id="L518">			return kycDetails;</span>
		}
		// declared these members here for memory management
<span class="nc" id="L521">		Integer passCount = 0;</span>
<span class="nc" id="L522">		Integer failCount = 0;</span>
<span class="nc" id="L523">		Kyc kyc = new Kyc();</span>
		// condition added by Vishal J to set requirement of KYC check on 25th
		// Jan
		/*
		 * If we get Response from KYC micro service as 'NOT_REQUIRED' for KYC
		 * check then we don't need to perform KYC check on contacts so we are
		 * simply showing that on UI for user understanding
		 */
<span class="nc" id="L531">		boolean status = false;</span>
<span class="nc bnc" id="L532" title="All 2 branches missed.">		if (!Constants.NOT_REQUIRED.equalsIgnoreCase(kycSummary.getStatus())) {</span>
<span class="nc" id="L533">			status = Constants.PASS.equals(kycSummary.getStatus());</span>
<span class="nc bnc" id="L534" title="All 2 branches missed.">			if (status) {</span>
<span class="nc" id="L535">				passCount = kycEventDBDtos.size();</span>
			} else {
<span class="nc" id="L537">				failCount = kycEventDBDtos.size();</span>
			}
<span class="nc" id="L539">			kycDetails.setPassCount(passCount);</span>
<span class="nc" id="L540">			kycDetails.setFailCount(failCount);</span>
<span class="nc" id="L541">			kyc.setIsRequired(Boolean.TRUE);</span>
			
		} else {
<span class="nc" id="L544">			kyc.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L545">			kyc.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
		}

<span class="nc" id="L548">		setKycResponse(kycDetails, kycList, kycEventDBDtos, kycEventDBDto, kycSummary, kyc, status);</span>
		// End of - condition added by Vishal J to set requirement of KYC check
		// on 25th Jan
<span class="nc" id="L551">		return kycDetails;</span>
	}

	/**
	 * Sets the kyc response.
	 *
	 * @param kycDetails the kyc details
	 * @param kycList the kyc list
	 * @param kycEventDBDtos the kyc event DB dtos
	 * @param kycEventDBDto the kyc event DB dto
	 * @param kycSummary the kyc summary
	 * @param kyc the kyc
	 * @param status the status
	 */
	// to reduce the cyclomatic complexity we extract this method
	private void setKycResponse(KycDetails kycDetails, List&lt;Kyc&gt; kycList, List&lt;EventDBDto&gt; kycEventDBDtos,
			EventDBDto kycEventDBDto, KYCSummary kycSummary, Kyc kyc, boolean status) {
<span class="nc" id="L568">		kyc.setCheckedOn(DateTimeFormatter.dateTimeFormatter(kycSummary.getCheckedOn()));</span>
		
<span class="nc" id="L570">		kyc.setDob(DateTimeFormatter.getDateInRFC3339(kycSummary.getDob()));</span>
<span class="nc" id="L571">		kyc.setId(kycEventDBDto.getId());</span>
<span class="nc" id="L572">		kyc.setReferenceId(kycSummary.getReferenceId());</span>
		// If status of KYC check is 'Not Required' the there is no need to set
		// staus value (true or false)
		// because we are going to show that 'Not Required' itself on UI in that
		// condition
<span class="nc bnc" id="L577" title="All 2 branches missed.">		if (!Constants.NOT_REQUIRED.equalsIgnoreCase(kyc.getStatusValue()))</span>
<span class="nc" id="L578">			kyc.setStatus(status);</span>
<span class="nc" id="L579">		kyc.setEidCheck(kycSummary.getEidCheck());</span>
<span class="nc" id="L580">		kyc.setVerifiactionResult(kycSummary.getVerifiactionResult());</span>
<span class="nc" id="L581">		kyc.setEntityType(Constants.CONTACT);</span>
<span class="nc" id="L582">		kyc.setPrevStatusValue(kycSummary.getStatus());</span>
<span class="nc" id="L583">		kycDetails.setKycTotalRecords(kycEventDBDtos.size());</span>
<span class="nc" id="L584">		kycList.add(kyc);</span>
<span class="nc" id="L585">		kycDetails.setKyc(kycList);</span>
<span class="nc" id="L586">	}</span>

	/**
	 * Purpose of method: -&gt; To set Sanction response which we got from Sanction
	 * micro service for contact of CFX account
	 * 
	 * Implementation: 1) In this method, we are fetching response of Sanction
	 * micro service for Contact of CFX and if it is empty then we return it
	 * immediately. 2) But if response details are present, then we first check
	 * status of that response. 2a. If status is 'NOT_REQUIRED' then we show end
	 * user that status on UI. 2b. If status is other than 'NOT_REQUIRED' then
	 * we show details for that contact on UI side.
	 *
	 * @param dbDto the db dto
	 * @return the contact sanction
	 */
	private SanctionDetails getContactSanction(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L603">		Integer entityId = dbDto.getContactId();</span>
<span class="fc" id="L604">		List&lt;Sanction&gt; sanctionList = new ArrayList&lt;&gt;();</span>
		// constant added by Vishal J
<span class="fc" id="L606">		List&lt;EventDBDto&gt; sanctionEventDBDtos = dbDto.getEventDBDto().get(entityId + Constants.SANCTIONCONTACT);</span>
<span class="fc" id="L607">		Sanction sanction = new Sanction();</span>
<span class="fc" id="L608">		SanctionDetails sanctionDetails = new SanctionDetails();</span>

<span class="pc bpc" id="L610" title="3 of 4 branches missed.">		if (sanctionEventDBDtos == null || sanctionEventDBDtos.isEmpty()) {</span>
<span class="fc" id="L611">			sanctionDetails.setSanctionTotalRecords(0);</span>
<span class="fc" id="L612">			return sanctionDetails;</span>
		}

<span class="nc" id="L615">		Integer passCount = 0;</span>
<span class="nc" id="L616">		Integer failCount = 0;</span>
<span class="nc" id="L617">		EventDBDto eventDBDto = sanctionEventDBDtos.get(0);</span>
<span class="nc" id="L618">		SanctionSummary summary = JsonConverterUtil.convertToObject(SanctionSummary.class, eventDBDto.getSummary());</span>
<span class="nc" id="L619">		sanction.setEventServiceLogId(eventDBDto.getId());</span>

		// condition added by Vishal J to check the requirement of Sanction on
		// contact of cfx
		/*
		 * If we get Response from Sanction micro service as 'NOT_REQUIRED' for
		 * Sanction check then we don't need to perform Sanction check on
		 * contacts so we are simply showing that on UI for user understanding
		 */
<span class="nc bnc" id="L628" title="All 4 branches missed.">		if (summary != null &amp;&amp; !Constants.NOT_REQUIRED.equalsIgnoreCase(summary.getStatus())) {</span>

			// constant added by Vishal J
<span class="nc bnc" id="L631" title="All 4 branches missed.">			boolean status = summary.getStatus() != null &amp;&amp; Constants.PASS.equals(summary.getStatus());</span>
<span class="nc bnc" id="L632" title="All 2 branches missed.">			if (status) {</span>
<span class="nc" id="L633">				passCount = sanctionEventDBDtos.size();</span>
			} else {
<span class="nc" id="L635">				failCount = sanctionEventDBDtos.size();</span>
			}
<span class="nc" id="L637">			sanction.setStatus(status);</span>
<span class="nc" id="L638">			sanctionDetails.setFailCount(failCount);</span>
<span class="nc" id="L639">			sanctionDetails.setPassCount(passCount);</span>
<span class="nc" id="L640">			sanction.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L641">			sanction.setPrevStatusValue(summary.getStatus());</span>
<span class="nc" id="L642">		} else {</span>
<span class="nc" id="L643">			sanction.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L644">			sanction.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L645">			sanction.setPrevStatusValue(Constants.NOT_REQUIRED);</span>
		}
		// End of - condition added by Vishal J to check the requirement of
		// Sanction on contact of cfx
<span class="nc" id="L649">		setSanctionResponse(sanctionList, sanctionEventDBDtos, sanction, sanctionDetails, eventDBDto, summary);</span>

<span class="nc" id="L651">		return sanctionDetails;</span>
	}

	/**
	 * Sets the sanction response.
	 *
	 * @param sanctionList the sanction list
	 * @param sanctionEventDBDtos the sanction event DB dtos
	 * @param sanction the sanction
	 * @param sanctionDetails the sanction details
	 * @param eventDBDto the event DB dto
	 * @param summary the summary
	 */
	// this method is extracted to reduce cyclomatic complexity
	private void setSanctionResponse(List&lt;Sanction&gt; sanctionList, List&lt;EventDBDto&gt; sanctionEventDBDtos,
			Sanction sanction, SanctionDetails sanctionDetails, EventDBDto eventDBDto, SanctionSummary summary) {
<span class="nc bnc" id="L667" title="All 2 branches missed.">		if (null != summary) {</span>
<span class="nc" id="L668">			setSanctionValues(sanction, summary);</span>
<span class="nc" id="L669">			sanction.setUpdatedBy(eventDBDto.getUpdatedBy());</span>
<span class="nc" id="L670">			sanction.setUpdatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
<span class="nc" id="L671">			sanctionDetails.setSanctionTotalRecords(sanctionEventDBDtos.size());</span>
<span class="nc" id="L672">			sanction.setEntityType(Constants.CONTACT);</span>
<span class="nc" id="L673">			sanctionList.add(sanction);</span>
<span class="nc" id="L674">			sanctionDetails.setSanction(sanctionList);</span>
		}
<span class="nc" id="L676">	}</span>

	/**
	 * Gets the contact fraugster.
	 *
	 * @param dbDto the db dto
	 * @return the contact fraugster
	 */
	private FraugsterDetails getContactFraugster(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L685">		Integer entityId = dbDto.getContactId();</span>
<span class="fc" id="L686">		List&lt;EventDBDto&gt; eventDBDtos = dbDto.getEventDBDto().get(entityId + Constants.FRAUGSTERCONTACT);</span>
<span class="fc" id="L687">		List&lt;Fraugster&gt; fraugsterList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L688">		Fraugster fraugster = new Fraugster();</span>
<span class="fc" id="L689">		Integer passCount = 0;</span>
<span class="fc" id="L690">		Integer failCount = 0;</span>
<span class="fc" id="L691">		FraugsterDetails fraugsterDetails = new FraugsterDetails();</span>

<span class="pc bpc" id="L693" title="3 of 4 branches missed.">		if (eventDBDtos == null || eventDBDtos.isEmpty()) {</span>
<span class="fc" id="L694">			fraugsterDetails.setFraugsterTotalRecords(0);</span>
<span class="fc" id="L695">			fraugsterList.add(fraugster);</span>
<span class="fc" id="L696">			fraugsterDetails.setFraugster(fraugsterList);</span>
<span class="fc" id="L697">			return fraugsterDetails;</span>
		}
<span class="nc" id="L699">		EventDBDto eventDBDto = eventDBDtos.get(0);</span>
<span class="nc bnc" id="L700" title="All 2 branches missed.">		if (eventDBDto == null) {</span>
<span class="nc" id="L701">			fraugsterDetails.setFraugsterTotalRecords(0);</span>
<span class="nc" id="L702">			fraugsterList.add(fraugster);</span>
<span class="nc" id="L703">			fraugsterDetails.setFraugster(fraugsterList);</span>
<span class="nc" id="L704">			return fraugsterDetails;</span>
		}
		
<span class="nc bnc" id="L707" title="All 2 branches missed.">		if (eventDBDto.getUpdatedOn() != null) {</span>
<span class="nc" id="L708">			fraugster.setCreatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
		}
<span class="nc" id="L710">		fraugster.setUpdatedBy(eventDBDto.getUpdatedBy());</span>
	
<span class="nc" id="L712">		FraugsterSummary fraugsterSummary = JsonConverterUtil.convertToObject(FraugsterSummary.class,</span>
<span class="nc" id="L713">					eventDBDto.getSummary());</span>
<span class="nc bnc" id="L714" title="All 2 branches missed.">		if (fraugsterSummary != null) {</span>
<span class="nc bnc" id="L715" title="All 2 branches missed.">			if(!Constants.NOT_REQUIRED.equalsIgnoreCase(fraugsterSummary.getStatus())) {</span>
<span class="nc bnc" id="L716" title="All 4 branches missed.">				boolean status = fraugsterSummary.getStatus() != null &amp;&amp; Constants.PASS.equals(fraugsterSummary.getStatus());</span>
<span class="nc bnc" id="L717" title="All 2 branches missed.">				if (status) {</span>
<span class="nc" id="L718">					passCount = eventDBDtos.size();</span>
				} else {
<span class="nc" id="L720">					failCount = eventDBDtos.size();</span>
				}
<span class="nc" id="L722">				fraugster.setStatus(status);</span>
			}
<span class="nc" id="L724">			fraugster.setFraugsterId(fraugsterSummary.getFrgTransId());</span>
<span class="nc" id="L725">			fraugster.setScore(fraugsterSummary.getScore());</span>
<span class="nc" id="L726">			fraugster.setPrevStatusValue(fraugsterSummary.getStatus());</span>
		}
<span class="nc" id="L728">		fraugster.setPassCount(passCount);</span>
<span class="nc" id="L729">		fraugster.setFailCount(failCount);</span>
<span class="nc" id="L730">		fraugster.setId(eventDBDto.getId());</span>
<span class="nc" id="L731">		fraugsterList.add(fraugster);</span>
<span class="nc" id="L732">		fraugsterDetails.setFraugsterTotalRecords(eventDBDtos.size());</span>
<span class="nc" id="L733">		fraugsterDetails.setFraugster(fraugsterList);</span>

<span class="nc" id="L735">		return fraugsterDetails;</span>
	}

	/**
	 * Gets the contact internal rule.
	 *
	 * @param dbDto the db dto
	 * @return the contact internal rule
	 */
	private List&lt;InternalRule&gt; getContactInternalRule(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L745">		List&lt;InternalRule&gt; internalRulesList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L746">		InternalRule internalRule = new InternalRule();</span>
<span class="fc" id="L747">		internalRule.setBlacklist(getContactBlackList(dbDto));</span>
<span class="fc" id="L748">		internalRulesList.add(internalRule);</span>
<span class="fc" id="L749">		return internalRulesList;</span>
	}

	/**
	 * Gets the contact black list.
	 *
	 * @param dbDto the db dto
	 * @return the contact black list
	 */
	private Blacklist getContactBlackList(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L759">		Integer entityId = dbDto.getContactId();</span>
<span class="fc" id="L760">		List&lt;EventDBDto&gt; blacklistEventDBDtos = dbDto.getEventDBDto().get(entityId + Constants.BLACKLISTCONTACT);</span>
<span class="fc" id="L761">		Blacklist blacklist = new Blacklist();</span>
<span class="pc bpc" id="L762" title="3 of 4 branches missed.">		if (blacklistEventDBDtos == null || blacklistEventDBDtos.isEmpty()) {</span>
<span class="fc" id="L763">			blacklist.setFailCount(4);</span>
<span class="fc" id="L764">			return blacklist;</span>
		}

<span class="nc" id="L767">		BlacklistSummary blacklistSummary = JsonConverterUtil.convertToObject(BlacklistSummary.class,</span>
<span class="nc" id="L768">				blacklistEventDBDtos.get(0).getSummary());</span>
<span class="nc bnc" id="L769" title="All 2 branches missed.">		if (blacklistSummary == null) {</span>
<span class="nc" id="L770">			return blacklist;</span>
		}

		/*
		 * Since we are calling a common method to set blacklist response for
		 * 'Account' and 'Contact', for contact specific blacklist checks (IP,
		 * Email, phone) we are setting value of IP here and passing it to that
		 * common method named 'setBlackListResponse()' 1)getting value from
		 * blackListSummary object to check whether it is 'null', 2)If null then
		 * set IP check as false and setting them into object of blacklist
		 * Changes done by Vishal J on 6th feb 17
		 */
<span class="nc" id="L782">		blacklist.setIp(blacklistSummary.getIp());</span>

		// condition and method added to resolve AT-259 by Vishal J 24th jan
<span class="nc" id="L785">		setBlackListResponse(blacklistEventDBDtos, blacklist, blacklistSummary, Constants.CONTACT);</span>
		// condition end to resolve AT-259
		
		//added method to set blacklist matched data
<span class="nc" id="L789">		setBlacklistedMatchedData(blacklistSummary,blacklist);</span>
		
<span class="nc" id="L791">		return blacklist;</span>
	}

	/**
	 * Gets the account black list.
	 *
	 * @param dbDto the db dto
	 * @return the account black list
	 */
	private Blacklist getAccountBlackList(RegistrationDetailsDBDto dbDto) {
<span class="fc" id="L801">		Integer entityId = dbDto.getAccountId();</span>
<span class="fc" id="L802">		List&lt;EventDBDto&gt; blacklistEventDBDtos = dbDto.getEventDBDto().get(entityId + Constants.BLACKLISTACCOUNT);</span>
<span class="fc" id="L803">		Blacklist blacklist = new Blacklist();</span>
<span class="pc bpc" id="L804" title="2 of 4 branches missed.">		if (blacklistEventDBDtos == null || blacklistEventDBDtos.isEmpty()) {</span>
<span class="nc" id="L805">			return null;</span>
		}

<span class="fc" id="L808">		BlacklistSummary blacklistSummary = JsonConverterUtil.convertToObject(BlacklistSummary.class,</span>
<span class="fc" id="L809">				blacklistEventDBDtos.get(0).getSummary());</span>
<span class="pc bpc" id="L810" title="1 of 2 branches missed.">		if (blacklistSummary == null) {</span>
<span class="nc" id="L811">			return blacklist;</span>
		}

<span class="fc" id="L814">		setBlackListResponse(blacklistEventDBDtos, blacklist, blacklistSummary, Constants.ACCOUNT);</span>
		
		//added method to set blacklist matched data
<span class="fc" id="L817">		setBlacklistedMatchedData(blacklistSummary,blacklist);</span>
		
<span class="fc" id="L819">		return blacklist;</span>
	}

	/**
	 * Sets the black list response.
	 *
	 * @param blacklistEventDBDtos the blacklist event DB dtos
	 * @param blacklist the blacklist
	 * @param blacklistSummary the blacklist summary
	 * @param entityType the entity type
	 */
	private void setBlackListResponse(List&lt;EventDBDto&gt; blacklistEventDBDtos, Blacklist blacklist,
			BlacklistSummary blacklistSummary, String entityType) {
<span class="fc" id="L832">		Boolean blacklistSummaryPhone = Boolean.TRUE;</span>
		/*
		 * condition added to check whether blacklist check is required or not
		 * If required then do regular functionality otherwise just send that
		 * status value to UI side Vishal J
		 */
<span class="pc bpc" id="L838" title="1 of 2 branches missed.">		if (!Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getStatus())) {</span>
<span class="fc" id="L839">			blacklistSummary.setEmail(blacklistSummary.getEmail());</span>
<span class="fc" id="L840">			blacklistSummary.setIp(blacklistSummary.getIp());</span>
<span class="pc bpc" id="L841" title="1 of 2 branches missed.">			blacklistSummary.setPhone(blacklistSummary.getPhone() == null ? blacklistSummaryPhone : blacklistSummary.getPhone());</span>
<span class="fc" id="L842">			blacklistSummary.setWebSite(blacklistSummary.getWebSite());</span>
<span class="fc" id="L843">			blacklistSummary.setName(blacklistSummary.getName());</span>
<span class="fc" id="L844">			blacklist.setId(blacklistEventDBDtos.get(0).getId());</span>
<span class="fc" id="L845">			blacklist.setEntityType(entityType);</span>
			
<span class="pc bpc" id="L847" title="1 of 2 branches missed.">			if(Constants.SERVICE_FAILURE.equalsIgnoreCase(blacklistSummary.getStatus())){</span>
<span class="nc" id="L848">				setServiceFailureResponseForBlacklist(blacklist, entityType);</span>
			} else {
<span class="fc" id="L850">				updateBlackListForNotRequired(blacklist, blacklistSummary, entityType);</span>
			}
		} else {
			// sending status value to UI
<span class="nc" id="L854">			blacklist.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L855">			blacklist.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
		}
<span class="fc" id="L857">	}</span>

  private void updateBlackListForNotRequired(Blacklist blacklist, BlacklistSummary blacklistSummary,
      String entityType) {
<span class="pc bpc" id="L861" title="1 of 2 branches missed.">    if(Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getName()))</span>
<span class="nc" id="L862">    	blacklist.setName(Constants.NOT_REQUIRED_UI);</span>
<span class="fc" id="L863">    else blacklist.setName(blacklistSummary.getName());</span>
<span class="pc bpc" id="L864" title="1 of 2 branches missed.">    if(Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getWebSite()))</span>
<span class="nc" id="L865">    	blacklist.setWebSite(Constants.NOT_REQUIRED_UI);</span>
<span class="fc" id="L866">    else blacklist.setWebSite(blacklistSummary.getWebSite());</span>
    /** below 3 fields (IP, email, phone) are added by Vishal J to set response
     for entity type 'CONTACT'*/
<span class="pc bpc" id="L869" title="1 of 2 branches missed.">    if(Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getEmail()))</span>
<span class="fc" id="L870">    	blacklist.setEmail(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L871">    else blacklist.setEmail(blacklistSummary.getEmail());</span>
<span class="pc bpc" id="L872" title="1 of 2 branches missed.">    blacklist.setPhone(!blacklistSummary.getPhone());</span>
    // field added ends here by Vishal J
<span class="fc" id="L874">    blacklist.setStatus(Constants.PASS.equals(blacklistSummary.getStatus()));</span>
<span class="fc" id="L875">    blacklist.setIsRequired(Boolean.TRUE);</span>
<span class="fc" id="L876">    blacklist.setPrevStatusValue(blacklistSummary.getStatus());</span>
    // condition set to show for IP check as 'NOT_REQUIRED' for Account
    // blacklist check
<span class="pc bpc" id="L879" title="1 of 2 branches missed.">    if (entityType.equalsIgnoreCase(Constants.ACCOUNT)) {</span>
<span class="fc" id="L880">    	blacklist.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
<span class="fc" id="L881">    	blacklist.setIp(Constants.NOT_REQUIRED_UI);</span>
<span class="fc" id="L882">    	setBlacklistAccountPassAndFailCount(blacklist);</span>
    }
    // condition added to show PASS or FAIL count for 'CONTACT' by
    // Vishal J
<span class="nc bnc" id="L886" title="All 2 branches missed.">    else if (entityType.equalsIgnoreCase(Constants.CONTACT)) {</span>
<span class="nc" id="L887">    	blacklist.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L888">    	blacklist.setIp(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L889">    	setBlacklistContactPassAndFailCount(blacklist);</span>
    }
<span class="fc" id="L891">  }</span>

	/**
	 * Sets the service failure response for blacklist.
	 *
	 * @param blacklist the new service failure response for blacklist
	 */
	private void setServiceFailureResponseForBlacklist(Blacklist blacklist, String entityType) {
<span class="nc" id="L899">		Integer failCount = 0;</span>

<span class="nc" id="L901">		blacklist.setName(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L902">		blacklist.setEmail(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L903">		blacklist.setDomain(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L904">		blacklist.setIp(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L905">		blacklist.setWebSite(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L906">		blacklist.setPhone(Boolean.FALSE);</span>
<span class="nc" id="L907">		blacklist.setStatus(Boolean.FALSE);</span>
<span class="nc" id="L908">		blacklist.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L909">		blacklist.setPrevStatusValue(Constants.SERVICE_FAILURE);</span>

<span class="nc bnc" id="L911" title="All 2 branches missed.">		if (entityType.equalsIgnoreCase(Constants.ACCOUNT)) {</span>
<span class="nc" id="L912">			failCount = 3;</span>
<span class="nc" id="L913">			blacklist.setFailCount(failCount);</span>
<span class="nc bnc" id="L914" title="All 2 branches missed.">		} else if (entityType.equalsIgnoreCase(Constants.CONTACT)) {</span>
<span class="nc" id="L915">			failCount = 4;</span>
<span class="nc" id="L916">			blacklist.setFailCount(failCount);</span>
		}

<span class="nc" id="L919">	}</span>
	

	/**
	 * Delete duplicate contact reason.
	 *
	 * @param statusReasonList the status reason list
	 * @return the status reason
	 */
	private StatusReason deleteDuplicateContactReason(StatusReason statusReasonList) {
<span class="fc" id="L929">		TreeMap&lt;String, StatusReasonData&gt; reasonMap = new TreeMap&lt;&gt;();</span>
<span class="fc" id="L930">		ArrayList&lt;StatusReasonData&gt; statusReasonData = new ArrayList&lt;&gt;();</span>

<span class="fc bfc" id="L932" title="All 2 branches covered.">		for (StatusReasonData data : statusReasonList.getStatusReasonData()) {</span>
<span class="fc" id="L933">			reasonMap.put(data.getName(), data);</span>
<span class="fc" id="L934">		}</span>
<span class="fc" id="L935">		statusReasonData.addAll(reasonMap.values());</span>
<span class="fc" id="L936">		statusReasonList.setStatusReasonData(statusReasonData);</span>
<span class="fc" id="L937">		return statusReasonList;</span>
	}
	
	// AT-4114
	private IntuitionDetails getAccountIntuition(RegistrationDetailsDBDto dbDto) {

<span class="fc" id="L943">		Integer passCount = 0;</span>
<span class="fc" id="L944">		Integer failCount = 0;</span>
<span class="fc" id="L945">		List&lt;Intuition&gt; intuitionList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L946">		Integer entityId = dbDto.getAccountId();</span>
<span class="fc" id="L947">		List&lt;EventDBDto&gt; intuitionEventDBDtos = dbDto.getEventDBDto()</span>
<span class="fc" id="L948">				.get(entityId + Constants.TRANSACTION_MONITORINGACCOUNT);</span>
<span class="fc" id="L949">		Intuition intuition = new Intuition();</span>
<span class="fc" id="L950">		IntuitionDetails intuitionDetails = new IntuitionDetails();</span>

<span class="pc bpc" id="L952" title="3 of 4 branches missed.">		if (intuitionEventDBDtos == null || intuitionEventDBDtos.isEmpty()) {</span>
<span class="fc" id="L953">			intuitionDetails.setIntuitionTotalRecords(0);</span>
<span class="fc" id="L954">			return intuitionDetails;</span>
		}

<span class="nc" id="L957">		EventDBDto eventDBDto = intuitionEventDBDtos.get(0);</span>
<span class="nc" id="L958">		TransactionMonitoringAccountSummary summary = JsonConverterUtil</span>
<span class="nc" id="L959">				.convertToObject(TransactionMonitoringAccountSummary.class, eventDBDto.getSummary());</span>
<span class="nc" id="L960">		intuition.setId(eventDBDto.getId());</span>

<span class="nc" id="L962">		intuition.setCorrelationId(Constants.DASH_SINGLE_DETAILS);</span>
<span class="nc" id="L963">		intuition.setProfileScore(Constants.DASH_SINGLE_DETAILS);</span>
<span class="nc" id="L964">		intuition.setRuleScore(Constants.DASH_SINGLE_DETAILS);</span>
<span class="nc" id="L965">		intuition.setRiskLevel(Constants.DASH_SINGLE_DETAILS);</span>
		
<span class="nc bnc" id="L967" title="All 6 branches missed.">		if (summary != null &amp;&amp; !Constants.NOT_PERFORMED.equalsIgnoreCase(summary.getStatus()) &amp;&amp; !Constants.NOT_REQUIRED.equalsIgnoreCase(summary.getStatus())) {</span>
<span class="nc bnc" id="L968" title="All 4 branches missed.">			boolean status = summary.getStatus() != null &amp;&amp; Constants.PASS.equals(summary.getStatus());</span>
<span class="nc bnc" id="L969" title="All 2 branches missed.">			if (status) {</span>
<span class="nc" id="L970">				passCount = intuitionEventDBDtos.size();</span>
			} else {
<span class="nc" id="L972">				failCount = intuitionEventDBDtos.size();</span>
			}
			
<span class="nc" id="L975">			setIntuitionSummaryDetails(intuition, summary);</span>
			
<span class="nc" id="L977">			intuition.setStatus(status);</span>
<span class="nc" id="L978">			intuition.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L979">		}</span>
<span class="nc bnc" id="L980" title="All 4 branches missed.">		else if(summary != null &amp;&amp; Constants.NOT_REQUIRED.equalsIgnoreCase(summary.getStatus())){</span>
<span class="nc" id="L981">			intuition.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L982">			intuition.setStatusValue(Constants.NOT_REQUIRED);</span>
		}
		else {
<span class="nc" id="L985">			intuition.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L986">			intuition.setStatusValue(Constants.NOT_PERFORMED);</span>
		}
		
<span class="nc bnc" id="L989" title="All 2 branches missed.">		if(eventDBDto.getUpdatedOn()!= null)</span>
<span class="nc" id="L990">			intuition.setCreatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
		
<span class="nc" id="L992">		intuition.setUpdatedBy(eventDBDto.getUpdatedBy());</span>
<span class="nc" id="L993">		intuitionDetails.setFailCount(failCount);</span>
<span class="nc" id="L994">		intuitionDetails.setPassCount(passCount);</span>
<span class="nc" id="L995">		intuitionDetails.setIntuitionTotalRecords(intuitionEventDBDtos.size());</span>
<span class="nc" id="L996">		intuitionList.add(intuition);</span>
<span class="nc" id="L997">		intuitionDetails.setIntuition(intuitionList);</span>
<span class="nc" id="L998">		return intuitionDetails;</span>
	}

	/**
	 * @param intuition
	 * @param summary
	 */
	private void setIntuitionSummaryDetails(Intuition intuition, TransactionMonitoringAccountSummary summary) {
<span class="nc bnc" id="L1006" title="All 2 branches missed.">		if (null != summary.getCorrelationId()) </span>
<span class="nc" id="L1007">			intuition.setCorrelationId(summary.getCorrelationId());</span>
		
<span class="nc bnc" id="L1009" title="All 2 branches missed.">		if (null != summary.getProfileScore())</span>
<span class="nc" id="L1010">			intuition.setProfileScore(summary.getProfileScore());</span>

<span class="nc bnc" id="L1012" title="All 2 branches missed.">		if (null != summary.getRuleScore()) </span>
<span class="nc" id="L1013">			intuition.setRuleScore(summary.getRuleScore());</span>

<span class="nc bnc" id="L1015" title="All 2 branches missed.">		if (null != summary.getRiskLevel()) </span>
<span class="nc" id="L1016">			intuition.setRiskLevel(summary.getRiskLevel());</span>
<span class="nc" id="L1017">	}</span>
	
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>