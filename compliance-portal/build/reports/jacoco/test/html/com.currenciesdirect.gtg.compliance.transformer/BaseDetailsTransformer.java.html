<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BaseDetailsTransformer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-portal</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.transformer</a> &gt; <span class="el_source">BaseDetailsTransformer.java</span></div><h1>BaseDetailsTransformer.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.transformer;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.TreeMap;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterSummary;
import com.currenciesdirect.gtg.compliance.commons.domain.internalruleservice.BlacklistPayRefSummary;
import com.currenciesdirect.gtg.compliance.commons.domain.profile.request.Company;
import com.currenciesdirect.gtg.compliance.commons.domain.profile.request.CorperateCompliance;
import com.currenciesdirect.gtg.compliance.commons.domain.profile.request.RiskProfile;
import com.currenciesdirect.gtg.compliance.commons.domain.transactionmonitoring.TransactionMonitoringPaymentsSummary;
import com.currenciesdirect.gtg.compliance.core.domain.AccountWrapper;
import com.currenciesdirect.gtg.compliance.core.domain.BaseDBDto;
import com.currenciesdirect.gtg.compliance.core.domain.Blacklist;
import com.currenciesdirect.gtg.compliance.core.domain.Constants;
import com.currenciesdirect.gtg.compliance.core.domain.ContactWrapper;
import com.currenciesdirect.gtg.compliance.core.domain.CountryCheck;
import com.currenciesdirect.gtg.compliance.core.domain.CountryRiskLevelEnum;
import com.currenciesdirect.gtg.compliance.core.domain.EuPoiCheck;
import com.currenciesdirect.gtg.compliance.core.domain.EventDBDto;
import com.currenciesdirect.gtg.compliance.core.domain.Fraugster;
import com.currenciesdirect.gtg.compliance.core.domain.Intuition;
import com.currenciesdirect.gtg.compliance.core.domain.IntuitionPaymentResponse;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationAccount;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationCompany;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationContact;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationCorperateCompliance;
import com.currenciesdirect.gtg.compliance.core.domain.RegistrationRiskProfile;
import com.currenciesdirect.gtg.compliance.core.domain.Sanction;
import com.currenciesdirect.gtg.compliance.core.domain.VelocityCheck;
import com.currenciesdirect.gtg.compliance.core.domain.WatchListData;
import com.currenciesdirect.gtg.compliance.core.domain.Watchlist;
import com.currenciesdirect.gtg.compliance.core.domain.WhitelistCheck;
import com.currenciesdirect.gtg.compliance.core.domain.internalrule.BlacklistSummary;
import com.currenciesdirect.gtg.compliance.core.domain.internalrule.CountryCheckSummary;
import com.currenciesdirect.gtg.compliance.core.domain.paymentout.CustomCheckSummary;
import com.currenciesdirect.gtg.compliance.core.domain.paymentout.PaymentOutCustomCheck;
import com.currenciesdirect.gtg.compliance.core.domain.paymentout.PaymentOutPaymentReference;
import com.currenciesdirect.gtg.compliance.core.domain.sanction.SanctionSummary;
import com.currenciesdirect.gtg.compliance.dbport.enums.ServiceStatusEnum;
import com.currenciesdirect.gtg.compliance.util.DateTimeFormatter;
import com.currenciesdirect.gtg.compliance.util.JsonConverterUtil;
import com.currenciesdirect.gtg.compliance.util.StringUtils;

/**
 * The Class BaseDetailsTransformer.
 */
<span class="nc" id="L53">public class BaseDetailsTransformer {</span>

	/** The Constant LOG. */
<span class="nc" id="L56">	private static final Logger LOG = LoggerFactory.getLogger(BaseDetailsTransformer.class);</span>

	/**
	 * Gets the contact details.
	 *
	 * @param baseDBDto
	 *            the base DB dto
	 * @return Contact
	 */
	protected ContactWrapper getContactDetails(BaseDBDto baseDBDto) {
<span class="nc" id="L66">		RegistrationContact regContact = JsonConverterUtil.convertToObject(RegistrationContact.class,</span>
<span class="nc" id="L67">				baseDBDto.getContactAttib());</span>
<span class="nc" id="L68">		ContactWrapper contact = new ContactWrapper();</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">		if (regContact != null) {</span>
<span class="nc" id="L70">			contact.setAddress(getCompleteAddress(regContact));</span>
<span class="nc" id="L71">			contact.setCountryOfResidence(regContact.getCountry());</span>
<span class="nc" id="L72">			contact.setEmail(regContact.getEmail());</span>
<span class="nc" id="L73">			contact.setMobile(regContact.getPhoneMobile());</span>
<span class="nc" id="L74">			contact.setNationality(regContact.getNationality());</span>
<span class="nc" id="L75">			contact.setOccupation(regContact.getOccupation());</span>
<span class="nc" id="L76">			contact.setPhone(regContact.getPhoneHome());</span>
<span class="nc" id="L77">			contact.setDob(DateTimeFormatter.dateFormat(regContact.getDob()));</span>
<span class="nc" id="L78">			updateWorkPhone(regContact, contact);</span>

			// changes done to show full name on UI
<span class="nc bnc" id="L81" title="All 4 branches missed.">			if (regContact.getMiddleName() != null &amp;&amp; !regContact.getMiddleName().trim().isEmpty()) {</span>
<span class="nc" id="L82">				String fullName = new StringBuilder().append(regContact.getFirstName())</span>
<span class="nc" id="L83">						.append(&quot; &quot;).append(regContact.getMiddleName()).append(&quot; &quot;).append(regContact.getLastName()).toString();</span>
<span class="nc" id="L84">				contact.setName(fullName);</span>
<span class="nc" id="L85">			} else {</span>
<span class="nc" id="L86">				contact.setName(baseDBDto.getContactName());</span>
			}
<span class="nc bnc" id="L88" title="All 4 branches missed.">			contact.setIsUsClient(regContact.getCountry() != null &amp;&amp; &quot;USA&quot;.equals(regContact.getCountry()));</span>
		}
<span class="nc bnc" id="L90" title="All 2 branches missed.">		if (baseDBDto.getRegIn() != null) {</span>
<span class="nc" id="L91">			contact.setRegIn(DateTimeFormatter.dateTimeFormatter(baseDBDto.getRegIn()));</span>
		}
<span class="nc bnc" id="L93" title="All 2 branches missed.">		if (baseDBDto.getRegComp() != null) {</span>
<span class="nc" id="L94">			contact.setRegComplete(DateTimeFormatter.dateTimeFormatter(baseDBDto.getRegComp()));</span>
		} else {
<span class="nc" id="L96">			contact.setRegComplete(Constants.DASH_UI);</span>
		}
<span class="nc" id="L98">		contact.setAccountId(baseDBDto.getAccountId());</span>
<span class="nc" id="L99">		contact.setId(baseDBDto.getContactId());</span>
<span class="nc" id="L100">		contact.setTradeContactID(Integer.valueOf(baseDBDto.getTradeContactId()));</span>
<span class="nc" id="L101">		contact.setCrmAccountId(baseDBDto.getCrmAccountId());</span>
<span class="nc" id="L102">		contact.setCrmContactId(baseDBDto.getCrmContactId());</span>
<span class="nc" id="L103">		contact.setComplianceStatus(baseDBDto.getConComplianceStatus());</span>
<span class="nc" id="L104">		contact.setNationalityFullName(baseDBDto.getNationalityFullName());</span>

<span class="nc" id="L106">		return contact;</span>
	}

  private void updateWorkPhone(RegistrationContact regContact, ContactWrapper contact) {
<span class="nc bnc" id="L110" title="All 2 branches missed.">    if ((!StringUtils.isNullOrEmpty(regContact.getPhoneWorkExtn()))</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">    		&amp;&amp; (!StringUtils.isNullOrEmpty(regContact.getPhoneWork())))</span>
<span class="nc" id="L112">    	contact.setPhoneWork(regContact.getPhoneWork() + &quot;;&quot; + regContact.getPhoneWorkExtn());</span>

<span class="nc bnc" id="L114" title="All 2 branches missed.">    if ((!StringUtils.isNullOrEmpty(regContact.getPhoneWorkExtn()))</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">    		&amp;&amp; (StringUtils.isNullOrEmpty(regContact.getPhoneWork())))</span>
<span class="nc" id="L116">    	contact.setPhoneWork(regContact.getPhoneWorkExtn());</span>

<span class="nc bnc" id="L118" title="All 2 branches missed.">    if ((StringUtils.isNullOrEmpty(regContact.getPhoneWorkExtn()))</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">    		&amp;&amp; (!StringUtils.isNullOrEmpty(regContact.getPhoneWork())))</span>
<span class="nc" id="L120">    	contact.setPhoneWork(regContact.getPhoneWork());</span>
<span class="nc" id="L121">  }</span>

	/**
	 * Gets the account details.
	 *
	 * @param baseDBDto
	 *            the base DB dto
	 * @return Account
	 */
	protected AccountWrapper getAccountDetails(BaseDBDto baseDBDto) {
<span class="nc" id="L131">		RegistrationAccount regAccount = JsonConverterUtil.convertToObject(RegistrationAccount.class,</span>
<span class="nc" id="L132">				baseDBDto.getAccAttrib());</span>
<span class="nc" id="L133">		AccountWrapper account = new AccountWrapper();</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">		if (regAccount != null) {</span>
<span class="nc" id="L135">			account.setClientType(regAccount.getCustType());</span>
<span class="nc" id="L136">			account.setCurrencyPair(regAccount.getSellingCurrency() + &quot;-&quot; + regAccount.getBuyingCurrency());</span>
<span class="nc" id="L137">			account.setEstimTransValue(regAccount.getValueOfTransaction());</span>
<span class="nc" id="L138">			account.setPurposeOfTran(regAccount.getPurposeOfTran());</span>
<span class="nc" id="L139">			account.setServiceRequired(regAccount.getServiceRequired());</span>
<span class="nc" id="L140">			account.setSource(regAccount.getSource());</span>
<span class="nc" id="L141">			account.setSourceOfFund(regAccount.getSourceOfFund());</span>
<span class="nc" id="L142">			account.setRefferalText(regAccount.getReferralText());</span>
<span class="nc" id="L143">			account.setAffiliateName(regAccount.getAffiliateName());</span>
<span class="nc" id="L144">			account.setName(regAccount.getAccountName());</span>

<span class="nc bnc" id="L146" title="All 2 branches missed.">			if ((&quot;CFX&quot;).equals(regAccount.getCustType())) {</span>
<span class="nc" id="L147">				account.setCompany(getCompany(regAccount.getCompany()));</span>
<span class="nc" id="L148">				account.setCorperateCompliance(getCorporateCompliance(regAccount.getCorperateCompliance()));</span>
<span class="nc" id="L149">				account.setRiskProfile(getRiskProfile(regAccount.getRiskProfile()));</span>
<span class="nc" id="L150">				account.setWebsite(regAccount.getWebsite());</span>
<span class="nc bnc" id="L151" title="All 4 branches missed.">				if (null != regAccount.getTurnover() &amp;&amp; !regAccount.getTurnover().isEmpty()) {</span>
<span class="nc" id="L152">					account.setAnnualFXRequirement(StringUtils.getNumberFormat(regAccount.getTurnover()));</span>
				}
			}
		}
<span class="nc" id="L156">		account.setComplianceStatus(baseDBDto.getAccComplianceStatus());</span>
<span class="nc" id="L157">		account.setId(baseDBDto.getAccountId());</span>
<span class="nc" id="L158">		account.setOrgCode(baseDBDto.getOrgCode());</span>
<span class="nc" id="L159">		account.setTradeAccountNumber(baseDBDto.getTradeAccountNum());</span>
<span class="nc" id="L160">		return account;</span>
	}

	/**
	 * Delete duplicate watclist.
	 *
	 * @param watchList
	 *            the watch list
	 * @return watchList
	 */
	protected Watchlist deleteDuplicateWatclist(Watchlist watchList) {
<span class="nc" id="L171">		TreeMap&lt;String, WatchListData&gt; reasonMap = new TreeMap&lt;&gt;();</span>
<span class="nc" id="L172">		ArrayList&lt;WatchListData&gt; watchListDataList = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L174" title="All 2 branches missed.">		for (WatchListData watch : watchList.getWatchlistData()) {</span>
<span class="nc" id="L175">			reasonMap.put(watch.getName(), watch);</span>
<span class="nc" id="L176">		}</span>
<span class="nc" id="L177">		watchListDataList.addAll(reasonMap.values());</span>
<span class="nc" id="L178">		watchList.setWatchlistData(watchListDataList);</span>
<span class="nc" id="L179">		return watchList;</span>
	}

	/**
	 * Gets the fraugster.
	 *
	 * @param detailsDBDto
	 *            the details DB dto
	 * @return the fraugster
	 */
	protected Fraugster getFraugster(BaseDBDto detailsDBDto) {
<span class="nc" id="L190">		List&lt;EventDBDto&gt; eventDBDtos = detailsDBDto.getEventDBDtos().get(&quot;FRAUGSTERCONTACT&quot;);</span>
<span class="nc" id="L191">		Fraugster fraugster = new Fraugster();</span>
<span class="nc" id="L192">		Integer passCount = 0;</span>
<span class="nc" id="L193">		Integer failCount = 0;</span>
<span class="nc bnc" id="L194" title="All 4 branches missed.">		if (eventDBDtos == null || eventDBDtos.isEmpty()) {</span>
<span class="nc" id="L195">			fraugster.setFraugsterTotalRecords(0);</span>
<span class="nc" id="L196">			return fraugster;</span>
		}
<span class="nc" id="L198">		EventDBDto eventDBDto = eventDBDtos.get(0);</span>

<span class="nc bnc" id="L200" title="All 2 branches missed.">		if (eventDBDto == null) {</span>
<span class="nc" id="L201">			fraugster.setFraugsterTotalRecords(0);</span>
<span class="nc" id="L202">			return fraugster;</span>
		}
<span class="nc bnc" id="L204" title="All 2 branches missed.">		if (eventDBDto.getUpdatedOn() != null) {</span>
<span class="nc" id="L205">			fraugster.setCreatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
		}
<span class="nc" id="L207">		fraugster.setUpdatedBy(eventDBDto.getUpdatedBy());</span>

<span class="nc" id="L209">		FraugsterSummary fraugsterSummary = JsonConverterUtil.convertToObject(FraugsterSummary.class,</span>
<span class="nc" id="L210">				eventDBDto.getSummary());</span>

<span class="nc bnc" id="L212" title="All 2 branches missed.">		if (fraugsterSummary != null) {</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">			if (!Constants.NOT_REQUIRED.equalsIgnoreCase(eventDBDto.getStatus())) {</span>
<span class="nc bnc" id="L214" title="All 2 branches missed.">				boolean status = fraugsterSummary.getStatus() != null</span>
<span class="nc bnc" id="L215" title="All 2 branches missed.">						&amp;&amp; Constants.PASS.equals(fraugsterSummary.getStatus());</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">				if (status) {</span>
<span class="nc" id="L217">					passCount = eventDBDtos.size();</span>
				} else {
<span class="nc" id="L219">					failCount = eventDBDtos.size();</span>
				}
<span class="nc" id="L221">				fraugster.setPassCount(passCount);</span>
				
<span class="nc" id="L223">				fraugster.setFailCount(failCount);</span>
				
<span class="nc" id="L225">				fraugster.setStatus(status);</span>
				
<span class="nc" id="L227">				fraugster.setStatusValue(eventDBDto.getStatus());</span>
				
<span class="nc" id="L229">				fraugster.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L230">			} else {</span>
<span class="nc" id="L231">				fraugster.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L232">				fraugster.setStatusValue(Constants.NOT_REQUIRED);</span>
			}
<span class="nc" id="L234">			fraugster.setFraugsterId(fraugsterSummary.getFrgTransId());</span>
<span class="nc" id="L235">			fraugster.setScore(fraugsterSummary.getScore());</span>

		}
<span class="nc" id="L238">		fraugster.setId(eventDBDto.getId());</span>
<span class="nc" id="L239">		fraugster.setFraugsterTotalRecords(eventDBDtos.size());</span>
<span class="nc" id="L240">		return fraugster;</span>
	}

	/**
	 * Gets the blacklist.
	 *
	 * @param eventDBDto
	 *            the event DB dto
	 * @return the blacklist
	 */
	/*
	 * 1) We are checking whether blacklist is required to perform or not first,
	 * if it is 'NOT REQUIRED' then we will show that status on UI
	 */
	protected Blacklist getBlacklist(EventDBDto eventDBDto) {
<span class="nc" id="L255">		Boolean blacklistSummaryPhone = Boolean.TRUE;</span>
<span class="nc" id="L256">		Blacklist blacklist = new Blacklist();</span>
<span class="nc" id="L257">		BlacklistSummary blacklistSummary = JsonConverterUtil.convertToObject(BlacklistSummary.class,</span>
<span class="nc" id="L258">				eventDBDto.getSummary());</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">		if (blacklistSummary == null) {</span>
<span class="nc" id="L260">			return blacklist;</span>
		}

		// If blacklist status is other than 'NOT REQUIRED' then get details
<span class="nc bnc" id="L264" title="All 2 branches missed.">		if (!Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getStatus())) {</span>
<span class="nc" id="L265">			blacklistSummary.setEmail(blacklistSummary.getEmail());</span>
<span class="nc" id="L266">			blacklistSummary.setIp(blacklistSummary.getIp());</span>
<span class="nc bnc" id="L267" title="All 2 branches missed.">			blacklistSummary.setPhone(blacklistSummary.getPhone() == null ? blacklistSummaryPhone : blacklistSummary.getPhone());</span>
<span class="nc" id="L268">			blacklistSummary.setAccountNumber(blacklistSummary.getAccountNumber());</span>
<span class="nc" id="L269">			blacklistSummary.setName(blacklistSummary.getName());</span>
<span class="nc" id="L270">			blacklistSummary.setBankName(blacklistSummary.getBankName());</span>

<span class="nc bnc" id="L272" title="All 2 branches missed.">			if (Constants.SERVICE_FAILURE.equalsIgnoreCase(blacklistSummary.getStatus())) {</span>
<span class="nc" id="L273">				setServiceFailureResponseForBlacklist(blacklist);</span>
<span class="nc" id="L274">				blacklist.setStatusValue(blacklistSummary.getStatus());</span>
			} else {
<span class="nc" id="L276">				updateBlackListForNotRequired(eventDBDto, blacklist, blacklistSummary);</span>
			}
		} else {
			// passing status value ('NOT_REQUIRED') to UI
<span class="nc" id="L280">			blacklist.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L281">			blacklist.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
		}

<span class="nc" id="L284">		setBlacklistedMatchedData(blacklistSummary, blacklist);</span>

<span class="nc" id="L286">		return blacklist;</span>

	}

  private void updateBlackListForNotRequired(EventDBDto eventDBDto, Blacklist blacklist,
      BlacklistSummary blacklistSummary) {
<span class="nc" id="L292">    blacklist.setEmail(blacklistSummary.getEmail());</span>
<span class="nc" id="L293">    blacklist.setIp(blacklistSummary.getIp());</span>
<span class="nc bnc" id="L294" title="All 2 branches missed.">    blacklist.setPhone(!blacklistSummary.getPhone());</span>
<span class="nc" id="L295">    blacklist.setStatus(Constants.PASS.equals(blacklistSummary.getStatus()));</span>
<span class="nc" id="L296">    blacklist.setId(eventDBDto.getId());</span>
<span class="nc" id="L297">    blacklist.setEntityType(eventDBDto.getEitityType());</span>
<span class="nc bnc" id="L298" title="All 2 branches missed.">    if (Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getAccountNumber()))</span>
<span class="nc" id="L299">    	blacklist.setAccountNumber(Constants.NOT_REQUIRED_UI);</span>
    else
<span class="nc" id="L301">    	blacklist.setAccountNumber(blacklistSummary.getAccountNumber());</span>
<span class="nc bnc" id="L302" title="All 2 branches missed.">    if (Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getName()))</span>
<span class="nc" id="L303">    	blacklist.setName(Constants.NOT_REQUIRED_UI);</span>
    else
<span class="nc" id="L305">    	blacklist.setName(blacklistSummary.getName());</span>
<span class="nc bnc" id="L306" title="All 2 branches missed.">    if (Constants.NOT_REQUIRED.equalsIgnoreCase(blacklistSummary.getBankName()))</span>
<span class="nc" id="L307">    	blacklist.setBankName(Constants.NOT_REQUIRED_UI);</span>
    else
<span class="nc" id="L309">    	blacklist.setBankName(blacklistSummary.getBankName());</span>

<span class="nc" id="L311">    blacklist.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L312">    setBeneficiaryBlacklistPassAndFailCount(blacklist);</span>
<span class="nc" id="L313">    blacklist.setStatusValue(blacklistSummary.getStatus());</span>
<span class="nc" id="L314">  }</span>

	/**
	 * Sets the service failure response for blacklist.
	 *
	 * @param blacklist
	 * the new service failure response for blacklist
	 * changes made for blacklist repeat check.
	 * Name, bank name and account number is set to Not Available if service status is failure.
	 */
	private void setServiceFailureResponseForBlacklist(Blacklist blacklist) {
<span class="nc" id="L325">		blacklist.setName(Constants.NOT_AVAILABLE);</span>
<span class="nc" id="L326">		blacklist.setBankName(Constants.NOT_AVAILABLE);</span>
<span class="nc" id="L327">		blacklist.setEmail(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L328">		blacklist.setDomain(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L329">		blacklist.setIp(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L330">		blacklist.setWebSite(Constants.BLACKLISTED_TRUE);</span>
<span class="nc" id="L331">		blacklist.setAccountNumber(Constants.NOT_AVAILABLE);</span>
<span class="nc" id="L332">		blacklist.setPhone(Boolean.FALSE);</span>
<span class="nc" id="L333">		blacklist.setStatus(Boolean.FALSE);</span>
<span class="nc" id="L334">		blacklist.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L335">	}</span>

	/**
	 * Sets the beneficiary blacklist pass and fail count.
	 *
	 * @param blacklist
	 *            the new beneficiary blacklist pass and fail count
	 */
	protected void setBeneficiaryBlacklistPassAndFailCount(Blacklist blacklist) {
<span class="nc" id="L344">		Integer passCount = 0;</span>
<span class="nc" id="L345">		Integer failCount = 0;</span>

		/**
		 * Changes done to get count since name field is made as string Vishal J
		 */
<span class="nc bnc" id="L350" title="All 2 branches missed.">		if (Constants.FALSE.equalsIgnoreCase(blacklist.getName())) {</span>
<span class="nc" id="L351">			passCount++;</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">		} else if (Constants.TRUE.equalsIgnoreCase(blacklist.getName())) {</span>
<span class="nc" id="L353">			failCount++;</span>
		}
		/**
		 * Changes done to get count since acc_no field is made as string Vishal
		 * J
		 */
<span class="nc bnc" id="L359" title="All 2 branches missed.">		if (Constants.FALSE.equalsIgnoreCase(blacklist.getAccountNumber())) {</span>
<span class="nc" id="L360">			passCount++;</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">		} else if (Constants.TRUE.equalsIgnoreCase(blacklist.getAccountNumber())) {</span>
<span class="nc" id="L362">			failCount++;</span>
		}

<span class="nc bnc" id="L365" title="All 2 branches missed.">		if (Constants.FALSE.equalsIgnoreCase(blacklist.getBankName())) {</span>
<span class="nc" id="L366">			passCount++;</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">		} else if (Constants.TRUE.equalsIgnoreCase(blacklist.getBankName())) {</span>
<span class="nc" id="L368">			failCount++;</span>
		}
<span class="nc" id="L370">		blacklist.setPassCount(passCount);</span>
<span class="nc" id="L371">		blacklist.setFailCount(failCount);</span>
<span class="nc" id="L372">	}</span>

	/**
	 * Gets the contact sanction.
	 *
	 * @param detailsDBDto
	 *            the details DB dto
	 * @return the contact sanction
	 */
	protected Sanction getContactSanction(BaseDBDto detailsDBDto) {
<span class="nc" id="L382">		List&lt;EventDBDto&gt; eventDBDtos = detailsDBDto.getEventDBDtos().get(Constants.SANCTIONCONTACT);</span>
<span class="nc" id="L383">		Sanction sanction = new Sanction();</span>
<span class="nc" id="L384">		int passCount = 0;</span>
<span class="nc" id="L385">		int failCount = 0;</span>
<span class="nc bnc" id="L386" title="All 4 branches missed.">		if (eventDBDtos == null || eventDBDtos.isEmpty()) {</span>
<span class="nc" id="L387">			sanction.setSanctionTotalRecords(0);</span>
<span class="nc" id="L388">			sanction.setEntityId(detailsDBDto.getContactId().toString());</span>
<span class="nc" id="L389">			sanction.setEntityType(Constants.CONTACT);</span>
<span class="nc" id="L390">			return sanction;</span>
		}
<span class="nc" id="L392">		EventDBDto eventDBDto = eventDBDtos.get(0);</span>
<span class="nc" id="L393">		sanction = getSanction(eventDBDto);</span>
<span class="nc bnc" id="L394" title="All 2 branches missed.">		if (Boolean.TRUE.equals(sanction.getStatus())) {</span>
<span class="nc" id="L395">			passCount = eventDBDtos.size();</span>
		} else {
<span class="nc" id="L397">			failCount = eventDBDtos.size();</span>
		}
<span class="nc" id="L399">		sanction.setFailCount(failCount);</span>
<span class="nc" id="L400">		sanction.setPassCount(passCount);</span>
<span class="nc" id="L401">		sanction.setSanctionTotalRecords(eventDBDtos.size());</span>
<span class="nc" id="L402">		return sanction;</span>

	}

	/**
	 * Gets the sanction.
	 *
	 * @param eventDBDto
	 *            the event DB dto
	 * @return the sanction
	 */
	/*
	 * 1) We are checking whether blacklist is required to perform or not first,
	 * if it is 'NOT REQUIRED' then we will show that status on UI
	 * 
	 * changes done by Vishal J
	 */
	protected Sanction getSanction(EventDBDto eventDBDto) {
<span class="nc" id="L420">		Sanction sanction = new Sanction();</span>
<span class="nc" id="L421">		SanctionSummary summary = JsonConverterUtil.convertToObject(SanctionSummary.class, eventDBDto.getSummary());</span>
<span class="nc" id="L422">		sanction.setEventServiceLogId(eventDBDto.getId());</span>
<span class="nc" id="L423">		sanction.setEntityType(eventDBDto.getEitityType());</span>

<span class="nc bnc" id="L425" title="All 2 branches missed.">		if (summary != null) {</span>
			// If sanction status is other than 'NOT REQUIRED' then get details
<span class="nc bnc" id="L427" title="All 2 branches missed.">			if (!Constants.NOT_REQUIRED.equalsIgnoreCase(summary.getStatus())) {</span>
				// constant added by Vishal J
<span class="nc bnc" id="L429" title="All 2 branches missed.">				boolean status = eventDBDto.getStatus() != null</span>
<span class="nc bnc" id="L430" title="All 2 branches missed.">						&amp;&amp; Constants.PASS.equalsIgnoreCase(eventDBDto.getStatus());</span>
<span class="nc" id="L431">				sanction.setStatus(status);</span>
<span class="nc" id="L432">				sanction.setStatusValue(eventDBDto.getStatus());</span>
<span class="nc" id="L433">				sanction.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L434">			} else {</span>
				// passing status value ('NOT_REQUIRED') to UI
<span class="nc" id="L436">				sanction.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L437">				sanction.setStatusValue(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L438">				sanction.setStatus(Boolean.FALSE);</span>
			}
			// this method is extracted for code re-usability
<span class="nc" id="L441">			setSanctionResponse(eventDBDto, sanction, summary);</span>

		}
<span class="nc" id="L444">		return sanction;</span>
	}

	/**
	 * Sets the sanction response.
	 *
	 * @param eventDBDto
	 *            the event DB dto
	 * @param sanction
	 *            the sanction
	 * @param summary
	 *            the summary
	 */
	// method extracted to reduce cyclomatic complexity and for code re
	// usability
	private void setSanctionResponse(EventDBDto eventDBDto, Sanction sanction, SanctionSummary summary) {
<span class="nc" id="L460">		sanction.setWorldCheck(summary.getWorldCheck());</span>
<span class="nc" id="L461">		sanction.setSanctionId(summary.getSanctionId());</span>
<span class="nc" id="L462">		sanction.setOfacList(summary.getOfacList());</span>
<span class="nc" id="L463">		sanction.setEventServiceLogId(eventDBDto.getId());</span>
<span class="nc" id="L464">		sanction.setEntityType(eventDBDto.getEitityType());</span>
<span class="nc" id="L465">		sanction.setEntityId(eventDBDto.getEntityId());</span>
<span class="nc" id="L466">		sanction.setUpdatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
<span class="nc" id="L467">		sanction.setUpdatedBy(eventDBDto.getUpdatedBy());</span>
<span class="nc" id="L468">	}</span>

	/**
	 * Gets the payment out custom check.
	 *
	 * @param detailsDBDto
	 *            the details DB dto
	 * @return the payment out custom check
	 */
	/*
	 * 1) We are checking whether custom check is required to perform or not
	 * first, if it is 'NOT REQUIRED' then we will show that status on UI
	 * Changes done by Vishal J
	 */
	protected PaymentOutCustomCheck getPaymentOutCustomCheck(BaseDBDto detailsDBDto) {
		// constant added by Vishal J
<span class="nc" id="L484">		List&lt;EventDBDto&gt; customCheckEventDBDtos = detailsDBDto.getEventDBDtos()</span>
<span class="nc" id="L485">				.get(Constants.VELOCITY_CHECK_BENEFICIARY);</span>
<span class="nc" id="L486">		PaymentOutCustomCheck customCheck = new PaymentOutCustomCheck();</span>
<span class="nc" id="L487">		VelocityCheck velocityCheck = new VelocityCheck();</span>
<span class="nc" id="L488">		WhitelistCheck whitelistCheck = new WhitelistCheck();</span>
<span class="nc" id="L489">		EuPoiCheck euPoiCheck = new EuPoiCheck();</span>
<span class="nc" id="L490">		customCheck.setVelocityCheck(velocityCheck);</span>
<span class="nc" id="L491">		customCheck.setWhiteListCheck(whitelistCheck);</span>
<span class="nc" id="L492">		customCheck.setEuPoiCheck(euPoiCheck);</span>
<span class="nc bnc" id="L493" title="All 4 branches missed.">		if (customCheckEventDBDtos == null || customCheckEventDBDtos.isEmpty()) {</span>
<span class="nc" id="L494">			customCheck.setTotalRecords(0);</span>
<span class="nc" id="L495">			return customCheck;</span>
		}
<span class="nc" id="L497">		EventDBDto eventDBDto = customCheckEventDBDtos.get(0);</span>
<span class="nc" id="L498">		Integer passCount = 0;</span>
<span class="nc" id="L499">		Integer failCount = 0;</span>
<span class="nc bnc" id="L500" title="All 2 branches missed.">		if (Constants.PASS.equalsIgnoreCase(eventDBDto.getStatus())) {</span>
<span class="nc" id="L501">			passCount = customCheckEventDBDtos.size();</span>
		} else {
<span class="nc" id="L503">			failCount = customCheckEventDBDtos.size();</span>
		}
<span class="nc" id="L505">		customCheck.setPassCount(passCount);</span>
<span class="nc" id="L506">		customCheck.setFailCount(failCount);</span>

<span class="nc bnc" id="L508" title="All 2 branches missed.">		if (eventDBDto.getUpdatedOn() != null) {</span>
<span class="nc" id="L509">			customCheck.setCheckedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
		}

<span class="nc bnc" id="L512" title="All 2 branches missed.">		if (eventDBDto.getSummary() != null) {</span>
<span class="nc" id="L513">			CustomCheckSummary customCheckSummary = JsonConverterUtil.convertToObject(CustomCheckSummary.class,</span>
<span class="nc" id="L514">					eventDBDto.getSummary());</span>

			// If Custom check status is other than 'NOT REQUIRED' then get
			// details
<span class="nc bnc" id="L518" title="All 2 branches missed.">			if (!Constants.NOT_REQUIRED.equalsIgnoreCase(customCheckSummary.getOverallStatus())) {</span>
<span class="nc bnc" id="L519" title="All 2 branches missed.">				if (customCheckSummary.getVelocityCheck() != null) {</span>
<span class="nc" id="L520">					setBeneCheckStatus(velocityCheck, customCheckSummary);</span>
<span class="nc" id="L521">					setNoOfTransactionsCheckStatus(velocityCheck, customCheckSummary);</span>
<span class="nc" id="L522">					setVelocityAmountCheckStatus(velocityCheck, customCheckSummary);</span>
<span class="nc" id="L523">					velocityCheck.setStatus(customCheckSummary.getVelocityCheck().getStatus());</span>
				}
<span class="nc bnc" id="L525" title="All 2 branches missed.">				if (customCheckSummary.getWhiteListCheck() != null) {</span>
<span class="nc" id="L526">					String amountrangeStatus = customCheckSummary.getWhiteListCheck().getAmoutRange();</span>
<span class="nc" id="L527">					setAmountRangeStatus(whitelistCheck, customCheckSummary, amountrangeStatus);</span>
<span class="nc" id="L528">					whitelistCheck.setCurrency(ServiceStatusEnum.getUiStatusFromDatabaseStatus(customCheckSummary.getWhiteListCheck().getCurrency()));</span>
<span class="nc" id="L529">					checkAndSetReasonofTransfer(whitelistCheck, customCheckSummary);</span>

<span class="nc" id="L531">					whitelistCheck.setThirdParty(customCheckSummary.getWhiteListCheck().getThirdParty());</span>
				}
			
<span class="nc" id="L534">				setEuPoiCheckStatus(euPoiCheck, customCheckSummary);</span>
<span class="nc" id="L535">				customCheck.setEuPoiCheck(euPoiCheck);</span>
<span class="nc" id="L536">				customCheck.setFraudPredictStatus(customCheckSummary.getFraudPredictStatus());//Add for AT-3161 only for PFX</span>
<span class="nc" id="L537">				customCheck.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L538">				customCheck.setStatus(eventDBDto.getStatus());</span>
			} else {
				// passing status value ('NOT_REQUIRED') to UI
<span class="nc" id="L541">				customCheck.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L542">				velocityCheck.setBeneCheck(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L543">				velocityCheck.setNoOffundsoutTxn(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L544">				velocityCheck.setPermittedAmoutcheck(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L545">				whitelistCheck.setAmoutRange(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L546">				whitelistCheck.setCurrency(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L547">				whitelistCheck.setReasonOfTransfer(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L548">				customCheck.setFraudPredictStatus(Constants.NOT_REQUIRED_UI);//Add for AT-3161 only for PFX</span>
<span class="nc" id="L549">				customCheckSummary.setOverallStatus(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L550">				customCheck.setStatus(Constants.NOT_REQUIRED_UI);</span>
<span class="nc" id="L551">				euPoiCheck.setStatus(Constants.NOT_REQUIRED_UI);//Add for AT-3349</span>
<span class="nc" id="L552">				customCheck.setEuPoiCheck(euPoiCheck);</span>
			}
		}
<span class="nc" id="L555">		customCheck.setTotalRecords(customCheckEventDBDtos.size());</span>
<span class="nc" id="L556">		customCheck.setEntityType(eventDBDto.getEitityType());</span>
<span class="nc" id="L557">		customCheck.setId(eventDBDto.getId());</span>
<span class="nc" id="L558">		return customCheck;</span>
	}

	private void setEuPoiCheckStatus(EuPoiCheck euPoiCheck, CustomCheckSummary customCheckSummary) {
<span class="nc bnc" id="L562" title="All 2 branches missed.">		if (customCheckSummary.getEuPoiCheck()!= null) {</span>
<span class="nc" id="L563">			euPoiCheck.setStatus(ServiceStatusEnum.getUiStatusFromDatabaseStatus(customCheckSummary.getEuPoiCheck().getStatus()));// AT-3349</span>
		} 
		else
		{
<span class="nc" id="L567">			euPoiCheck.setStatus(&quot;- - -&quot;);</span>
		}
<span class="nc" id="L569">	}</span>

	/**
	 * Check and set reasonof transfer.
	 *
	 * @param whitelistCheck
	 *            the whitelist check
	 * @param customCheckSummary
	 *            the custom check summary
	 */
	private void checkAndSetReasonofTransfer(WhitelistCheck whitelistCheck, CustomCheckSummary customCheckSummary) {
<span class="nc bnc" id="L580" title="All 2 branches missed.">		if (Constants.NOT_REQUIRED.equalsIgnoreCase(customCheckSummary.getWhiteListCheck().getReasonOfTransfer())) {</span>
<span class="nc" id="L581">			whitelistCheck.setReasonOfTransfer(Constants.NOT_REQUIRED_UI);</span>
		} else {
<span class="nc" id="L583">			whitelistCheck.setReasonOfTransfer(customCheckSummary.getWhiteListCheck().getReasonOfTransfer());</span>
		}
<span class="nc" id="L585">	}</span>

	/**
	 * Sets the no of transactions check status.
	 *
	 * @param velocityCheck
	 *            the velocity check
	 * @param customCheckSummary
	 *            the custom check summary
	 */
	private void setNoOfTransactionsCheckStatus(VelocityCheck velocityCheck, CustomCheckSummary customCheckSummary) {
<span class="nc bnc" id="L596" title="All 2 branches missed.">		if (Constants.FAIL.equals(customCheckSummary.getVelocityCheck().getNoOffundsoutTxn())) {</span>
<span class="nc" id="L597">			velocityCheck.setNoOffundsoutTxn(customCheckSummary.getVelocityCheck().getNoOffundsoutTxn() + &quot; &quot;</span>
<span class="nc" id="L598">					+ customCheckSummary.getVelocityCheck().getNoOfFundsOutTxnDetails());</span>
		} else {
<span class="nc" id="L600">			velocityCheck.setNoOffundsoutTxn(customCheckSummary.getVelocityCheck().getNoOffundsoutTxn());</span>
		}
<span class="nc" id="L602">	}</span>

	/**
	 * Sets the bene check status.
	 *
	 * @param velocityCheck
	 *            the velocity check
	 * @param customCheckSummary
	 *            the custom check summary
	 */
	private void setBeneCheckStatus(VelocityCheck velocityCheck, CustomCheckSummary customCheckSummary) {
<span class="nc" id="L613">		String beneCheckStatus = customCheckSummary.getVelocityCheck().getBeneCheck();</span>
<span class="nc bnc" id="L614" title="All 2 branches missed.">		if (Constants.FAIL.equalsIgnoreCase(beneCheckStatus)) {</span>
			String[] tradeAccountNumber;
<span class="nc" id="L616">			velocityCheck.setBeneCheck(customCheckSummary.getVelocityCheck().getBeneCheck() + &quot;(With account :&quot;);</span>
<span class="nc" id="L617">			tradeAccountNumber = (customCheckSummary.getVelocityCheck().getMatchedAccNumber()).split(&quot;,&quot;);</span>
<span class="nc" id="L618">			velocityCheck.setBeneTradeAccountid(Arrays.asList(tradeAccountNumber));</span>

<span class="nc" id="L620">		} else {</span>
<span class="nc" id="L621">			velocityCheck.setBeneCheck(customCheckSummary.getVelocityCheck().getBeneCheck());</span>
		}
<span class="nc" id="L623">	}</span>

	/**
	 * Sets the velocity amount check status.
	 *
	 * @param velocityCheck
	 *            the velocity check
	 * @param customCheckSummary
	 *            the custom check summary
	 */
	private void setVelocityAmountCheckStatus(VelocityCheck velocityCheck, CustomCheckSummary customCheckSummary) {
<span class="nc" id="L634">		String permittedAmountCheckStatus = customCheckSummary.getVelocityCheck().getPermittedAmoutcheck();</span>
<span class="nc bnc" id="L635" title="All 2 branches missed.">		if (Constants.FAIL.equalsIgnoreCase(permittedAmountCheckStatus)</span>
<span class="nc bnc" id="L636" title="All 2 branches missed.">				&amp;&amp; customCheckSummary.getVelocityCheck().getMaxAmount() != null) {</span>
<span class="nc" id="L637">			velocityCheck.setPermittedAmoutcheck(customCheckSummary.getVelocityCheck().getPermittedAmoutcheck()</span>
					+ &quot;(Max:&quot;
<span class="nc" id="L639">					+ StringUtils.getNumberFormat(customCheckSummary.getVelocityCheck().getMaxAmount().toString())</span>
					+ &quot;)&quot;);
		} else {
<span class="nc" id="L642">			velocityCheck.setPermittedAmoutcheck(customCheckSummary.getVelocityCheck().getPermittedAmoutcheck());</span>
		}
<span class="nc" id="L644">	}</span>

	/**
	 * Sets the amount range status.
	 *
	 * @param whitelistCheck
	 *            the whitelist check
	 * @param customCheckSummary
	 *            the custom check summary
	 * @param amountrangeStatus
	 *            the amountrange status
	 */
	protected void setAmountRangeStatus(WhitelistCheck whitelistCheck, CustomCheckSummary customCheckSummary,
			String amountrangeStatus) {
<span class="nc bnc" id="L658" title="All 2 branches missed.">		if (Constants.FAIL.equalsIgnoreCase(amountrangeStatus)) {</span>
<span class="nc bnc" id="L659" title="All 2 branches missed.">			if (null != customCheckSummary.getWhiteListCheck().getMaxAmount()) {</span>
<span class="nc" id="L660">				String amountRange = StringUtils</span>
<span class="nc" id="L661">						.getNumberFormat(customCheckSummary.getWhiteListCheck().getMaxAmount().toString());</span>
<span class="nc" id="L662">				whitelistCheck.setAmoutRange(</span>
<span class="nc" id="L663">						customCheckSummary.getWhiteListCheck().getAmoutRange() + &quot; (Max:&quot; + amountRange + &quot;)&quot;);</span>
<span class="nc" id="L664">			} else {</span>
<span class="nc" id="L665">				whitelistCheck.setAmoutRange(customCheckSummary.getWhiteListCheck().getAmoutRange() + &quot; (Max:----)&quot;);</span>
			}
		} else {
<span class="nc" id="L668">			whitelistCheck.setAmoutRange(ServiceStatusEnum.getUiStatusFromDatabaseStatus(customCheckSummary.getWhiteListCheck().getAmoutRange()));</span>
		}
<span class="nc" id="L670">	}</span>

	/**
	 * Gets the company.
	 *
	 * @param comanyDetails
	 *            the comany details
	 * @return Company
	 */
	private Company getCompany(RegistrationCompany comanyDetails) {
<span class="nc" id="L680">		Company company = new Company();</span>

<span class="nc" id="L682">		company.setBillingAddress(comanyDetails.getBillingAddress());</span>
<span class="nc" id="L683">		company.setCcj(comanyDetails.getCcj());</span>
<span class="nc" id="L684">		company.setCompanyPhone(comanyDetails.getCompanyPhone());</span>
<span class="nc" id="L685">		company.setCorporateType(comanyDetails.getCorporateType());</span>
<span class="nc" id="L686">		company.setCountryOfEstablishment(comanyDetails.getCountryOfEstablishment());</span>
<span class="nc" id="L687">		company.setCountryRegion(comanyDetails.getCountryRegion());</span>
<span class="nc" id="L688">		company.setEstNoTransactionsPcm(comanyDetails.getEstNoTransactionsPcm());</span>
<span class="nc" id="L689">		company.setEtailer(comanyDetails.getEtailer());</span>
<span class="nc" id="L690">		company.setIndustry(comanyDetails.getIndustry());</span>
<span class="nc" id="L691">		company.setOption(comanyDetails.getOption());</span>
<span class="nc" id="L692">		company.setRegistrationNo(comanyDetails.getRegistrationNo());</span>
<span class="nc" id="L693">		company.setShippingAddress(comanyDetails.getShippingAddress());</span>
<span class="nc" id="L694">		company.setTypeOfFinancialAccount(comanyDetails.getTypeOfFinancialAccount());</span>
<span class="nc" id="L695">		company.setVatNo(comanyDetails.getVatNo());</span>

		try {
<span class="nc" id="L698">			company.setIncorporationDate(DateTimeFormatter.dateFormat(comanyDetails.getIncorporationDate()));</span>
<span class="nc" id="L699">			company.setOngoingDueDiligenceDate(</span>
<span class="nc" id="L700">					DateTimeFormatter.dateFormat(comanyDetails.getOngoingDueDiligenceDate()));</span>
<span class="nc" id="L701">			company.settAndcSignedDate(DateTimeFormatter.dateFormat(comanyDetails.gettAndcSignedDate()));</span>
<span class="nc" id="L702">		} catch (Exception ex) {</span>
<span class="nc" id="L703">			LOG.debug(&quot;exception in company data:&quot;, ex);</span>
<span class="nc" id="L704">		}</span>
<span class="nc" id="L705">		return company;</span>
	}

	/**
	 * Gets the risk profile.
	 *
	 * @param riskProfileDetails
	 *            the risk profile details
	 * @return the risk profile
	 */
	private RiskProfile getRiskProfile(RegistrationRiskProfile riskProfileDetails) {
<span class="nc" id="L716">		RiskProfile riskProfile = new RiskProfile();</span>

<span class="nc" id="L718">		riskProfile.setCountryRiskIndicator(riskProfileDetails.getCountryRiskIndicator());</span>
<span class="nc" id="L719">		riskProfile.setDelinquencyFailureScore(riskProfileDetails.getDelinquencyFailureScore());</span>
<span class="nc" id="L720">		riskProfile.setFailureScore(riskProfileDetails.getFailureScore());</span>
<span class="nc" id="L721">		riskProfile.setRiskDirection(riskProfileDetails.getRiskDirection());</span>
<span class="nc" id="L722">		riskProfile.setRiskTrend(riskProfileDetails.getRiskTrend());</span>
<span class="nc" id="L723">		riskProfile.setUpdatedRisk(riskProfileDetails.getUpdatedRisk());</span>
		// newly added Dnb DATA fir riskprofile added by neelesh pant
<span class="nc" id="L725">		riskProfile.setContinent(riskProfileDetails.getContinent());</span>
<span class="nc" id="L726">		riskProfile.setCountry(riskProfileDetails.getCountry());</span>
<span class="nc" id="L727">		riskProfile.setStateCountry(riskProfileDetails.getStateCountry());</span>
<span class="nc" id="L728">		riskProfile.setDunsNumber(riskProfileDetails.getDunsNumber());</span>
<span class="nc" id="L729">		riskProfile.setTradingStyles(riskProfileDetails.getTradingStyles());</span>
<span class="nc" id="L730">		riskProfile.setUs1987PrimarySic4Digit(riskProfileDetails.getUs1987PrimarySic4Digit());</span>
<span class="nc" id="L731">		riskProfile.setFinancialFiguresMonth(riskProfileDetails.getFinancialFiguresMonth());</span>
<span class="nc" id="L732">		riskProfile.setFinancialFiguresYear(riskProfileDetails.getFinancialFiguresYear());</span>
<span class="nc" id="L733">		riskProfile.setFinancialYearEndDate(riskProfileDetails.getFinancialYearEndDate());</span>
<span class="nc" id="L734">		riskProfile.setAnnualSales(riskProfileDetails.getAnnualSales());</span>
<span class="nc" id="L735">		riskProfile.setModelledAnnualSales(riskProfileDetails.getModelledAnnualSales());</span>
<span class="nc" id="L736">		riskProfile.setNetWorthAmount(riskProfileDetails.getNetWorthAmount());</span>
<span class="nc" id="L737">		riskProfile.setModelledNetWorth(riskProfileDetails.getModelledNetWorth());</span>
<span class="nc" id="L738">		riskProfile.setLocationType(riskProfileDetails.getLocationType());</span>
<span class="nc" id="L739">		riskProfile.setImportExportIndicator(riskProfileDetails.getImportExportIndicator());</span>
<span class="nc" id="L740">		riskProfile.setDomesticUltimateRecord(riskProfileDetails.getDomesticUltimateRecord());</span>
<span class="nc" id="L741">		riskProfile.setGlobalUltimateRecord(riskProfileDetails.getGlobalUltimateRecord());</span>
<span class="nc" id="L742">		riskProfile.setGroupStructureNumberOfLevels(riskProfileDetails.getGroupStructureNumberOfLevels());</span>
<span class="nc" id="L743">		riskProfile.setHeadquarterDetails(riskProfileDetails.getHeadquarterDetails());</span>
<span class="nc" id="L744">		riskProfile.setImmediateParentDetails(riskProfileDetails.getImmediateParentDetails());</span>
<span class="nc" id="L745">		riskProfile.setDomesticUltimateParentDetails(riskProfileDetails.getDomesticUltimateParentDetails());</span>
<span class="nc" id="L746">		riskProfile.setGlobalUltimateParentDetails(riskProfileDetails.getGlobalUltimateParentDetails());</span>
<span class="nc" id="L747">		riskProfile.setCreditLimit(riskProfileDetails.getCreditLimit());</span>
<span class="nc" id="L748">		riskProfile.setRiskRating(riskProfileDetails.getRiskRating());</span>
<span class="nc" id="L749">		riskProfile.setProfitLoss(riskProfileDetails.getProfitLoss());</span>
		// newly added Dnb data ends
<span class="nc" id="L751">		return riskProfile;</span>
	}

	/**
	 * Gets the corporate compliance.
	 *
	 * @param corpComplianceDetails
	 *            the corp compliance details
	 * @return the corporate compliance
	 */
	private CorperateCompliance getCorporateCompliance(RegistrationCorperateCompliance corpComplianceDetails) {
<span class="nc" id="L762">		CorperateCompliance corporateCompliance = new CorperateCompliance();</span>

<span class="nc" id="L764">		corporateCompliance.setFixedAssets(corpComplianceDetails.getFixedAssets());</span>
<span class="nc" id="L765">		corporateCompliance.setForeignOwnedCompany(corpComplianceDetails.getForeignOwnedCompany());</span>
<span class="nc" id="L766">		corporateCompliance.setFormerName(corpComplianceDetails.getFormerName());</span>
<span class="nc" id="L767">		corporateCompliance.setLegalForm(corpComplianceDetails.getLegalForm());</span>
<span class="nc" id="L768">		corporateCompliance.setNetWorth(corpComplianceDetails.getNetWorth());</span>
<span class="nc" id="L769">		corporateCompliance.setRegistrationNumber(corpComplianceDetails.getRegistrationNumber());</span>
<span class="nc" id="L770">		corporateCompliance.setSic(corpComplianceDetails.getSic());</span>
<span class="nc" id="L771">		corporateCompliance.setSicDesc(corpComplianceDetails.getSicDesc());</span>
<span class="nc" id="L772">		corporateCompliance.setTotalLiabilitiesAndEquities(corpComplianceDetails.getTotalLiabilitiesAndEquities());</span>
<span class="nc" id="L773">		corporateCompliance.setTotalShareHolders(corpComplianceDetails.getTotalShareHolders());</span>
		// newly added DNb DATA for Corporate compliance added by neelesh pant
<span class="nc" id="L775">		corporateCompliance.setGlobalUltimateDuns(corpComplianceDetails.getGlobalUltimateDuns());</span>
<span class="nc" id="L776">		corporateCompliance.setGlobalUltimateName(corpComplianceDetails.getGlobalUltimateName());</span>
<span class="nc" id="L777">		corporateCompliance.setGlobalUltimateCountry(corpComplianceDetails.getGlobalUltimateCountry());</span>
<span class="nc" id="L778">		corporateCompliance.setRegistrationDate(corpComplianceDetails.getRegistrationDate());</span>
<span class="nc" id="L779">		corporateCompliance.setMatchName(corpComplianceDetails.getMatchName());</span>
<span class="nc" id="L780">		corporateCompliance.setIsoCountryCode2Digit(corpComplianceDetails.getIsoCountryCode2Digit());</span>
<span class="nc" id="L781">		corporateCompliance.setIsoCountryCode3Digit(corpComplianceDetails.getIsoCountryCode2Digit());</span>
<span class="nc" id="L782">		corporateCompliance.setStatementDate(corpComplianceDetails.getStatementDate());</span>
<span class="nc" id="L783">		corporateCompliance.setGrossIncome(corpComplianceDetails.getGrossIncome());</span>
<span class="nc" id="L784">		corporateCompliance.setNetIncome(corpComplianceDetails.getNetIncome());</span>
<span class="nc" id="L785">		corporateCompliance.setTotalCurrentAssets(corpComplianceDetails.getTotalCurrentAssets());</span>
<span class="nc" id="L786">		corporateCompliance.setTotalAssets(corpComplianceDetails.getTotalAssets());</span>
<span class="nc" id="L787">		corporateCompliance.setTotalLongTermLiabilities(corpComplianceDetails.getTotalLongTermLiabilities());</span>
<span class="nc" id="L788">		corporateCompliance.setTotalCurrentLiabilities(corpComplianceDetails.getTotalCurrentLiabilities());</span>
<span class="nc" id="L789">		corporateCompliance.setTotalMatchedShareholders(corpComplianceDetails.getTotalMatchedShareholders());</span>
<span class="nc" id="L790">		corporateCompliance.setFinancialStrength(corpComplianceDetails.getFinancialStrength());</span>
		// newly added DnB data ends

<span class="nc" id="L793">		return corporateCompliance;</span>
	}

	/**
	 * Gets the country check summary.
	 *
	 * @param eventDBDto
	 *            the event DB dto
	 * @return the country check summary
	 */
	protected CountryCheck getCountryCheckSummary(EventDBDto eventDBDto) {
<span class="nc" id="L804">		CountryCheck countryCheck = new CountryCheck();</span>
<span class="nc" id="L805">		CountryCheckSummary countryCheckSummary = JsonConverterUtil.convertToObject(CountryCheckSummary.class,</span>
<span class="nc" id="L806">				eventDBDto.getSummary());</span>
<span class="nc bnc" id="L807" title="All 2 branches missed.">		if (countryCheckSummary == null)</span>
<span class="nc" id="L808">			return countryCheck;</span>

<span class="nc" id="L810">		countryCheck.setCountry(countryCheckSummary.getCountry());</span>
<span class="nc bnc" id="L811" title="All 2 branches missed.">		if (countryCheckSummary.getRiskLevel() != null) {</span>
<span class="nc" id="L812">			countryCheck.setRiskLevel(</span>
<span class="nc" id="L813">					&quot;(&quot; + CountryRiskLevelEnum.valueOf(countryCheckSummary.getRiskLevel()).getRiskLevel() + &quot;)&quot;);</span>
		}

<span class="nc" id="L816">		return countryCheck;</span>
	}

	/**
	 * Sets the blacklisted matched data.
	 *
	 * @param blacklistSummary
	 *            the blacklist summary
	 * @param blacklist
	 *            the blacklist
	 */
	protected void setBlacklistedMatchedData(BlacklistSummary blacklistSummary, Blacklist blacklist) {

<span class="nc bnc" id="L829" title="All 2 branches missed.">		if (null != blacklistSummary) {</span>
<span class="nc" id="L830">			blacklist.setAccNumberMatchedData(blacklistSummary.getAccNumberMatchedData());</span>
<span class="nc" id="L831">			blacklist.setDomainMatchedData(blacklistSummary.getDomainMatchedData());</span>
<span class="nc" id="L832">			blacklist.setEmailMatchedData(blacklistSummary.getEmailMatchedData());</span>
<span class="nc" id="L833">			blacklist.setIpMatchedData(blacklistSummary.getIpMatchedData());</span>
<span class="nc" id="L834">			blacklist.setNameMatchedData(blacklistSummary.getNameMatchedData());</span>
<span class="nc" id="L835">			blacklist.setBankNameMatchedData(blacklistSummary.getBankNameMatchedData());</span>
<span class="nc" id="L836">			blacklist.setPhoneMatchedData(blacklistSummary.getPhoneMatchedData());</span>
<span class="nc" id="L837">			blacklist.setWebsiteMatchedData(blacklistSummary.getWebsiteMatchedData());</span>
		}

<span class="nc" id="L840">	}</span>

	/**
	 * this function gives complete address as per input fields.
	 *
	 * @author abhijeetg
	 * @param regContact
	 *            the reg contact
	 * @return the complete address
	 */
	protected String getCompleteAddress(RegistrationContact regContact) {
<span class="nc" id="L851">		List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L852" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getAddress1())) {</span>
<span class="nc" id="L853">			list.add(regContact.getAddress1());</span>
		}
<span class="nc bnc" id="L855" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getUnitNumber())) {</span>
<span class="nc" id="L856">			list.add(regContact.getUnitNumber());</span>
		}
<span class="nc bnc" id="L858" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getStreetNumber())) {</span>
<span class="nc" id="L859">			list.add(regContact.getStreetNumber());</span>
		}
<span class="nc bnc" id="L861" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getAreaNumber())) {</span>
<span class="nc" id="L862">			list.add(regContact.getAreaNumber());</span>
		}
<span class="nc bnc" id="L864" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getCivicNumber())) {</span>
<span class="nc" id="L865">			list.add(regContact.getCivicNumber());</span>
		}
<span class="nc bnc" id="L867" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getDistrict())) {</span>
<span class="nc" id="L868">			list.add(regContact.getDistrict());</span>
		}
<span class="nc bnc" id="L870" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getState())) {</span>
<span class="nc" id="L871">			list.add(regContact.getState());</span>
		}
<span class="nc bnc" id="L873" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getCity())) {</span>
<span class="nc" id="L874">			list.add(regContact.getCity());</span>
		}
<span class="nc bnc" id="L876" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getPostCode())) {</span>
<span class="nc" id="L877">			list.add(regContact.getPostCode());</span>
		}
<span class="nc bnc" id="L879" title="All 2 branches missed.">		if (!isNullOrEmpty(regContact.getCountry())) {</span>
<span class="nc" id="L880">			list.add(regContact.getCountry());</span>
		}
<span class="nc" id="L882">		return String.join(&quot;, &quot;, list);</span>
	}

	/**
	 * Checks if is null or empty.
	 *
	 * @param str
	 *            the str
	 * @return true, if is null or empty
	 */
	protected static boolean isNullOrEmpty(String str) {
<span class="nc" id="L893">		boolean result = true;</span>
<span class="nc bnc" id="L894" title="All 4 branches missed.">		if (str != null &amp;&amp; !str.trim().isEmpty())</span>
<span class="nc" id="L895">			return false;</span>

<span class="nc" id="L897">		return result;</span>
	}
	
	protected IntuitionPaymentResponse getIntuition(BaseDBDto detailsDBDto) {
<span class="nc" id="L901">		List&lt;EventDBDto&gt; eventDBDtos = detailsDBDto.getEventDBDtos().get(Constants.TRANSACTION_MONITORINGACCOUNT);</span>
<span class="nc" id="L902">		IntuitionPaymentResponse intuition = new IntuitionPaymentResponse();</span>
<span class="nc bnc" id="L903" title="All 4 branches missed.">		if (eventDBDtos == null || eventDBDtos.isEmpty()) {</span>
<span class="nc" id="L904">			intuition.setIntuitionTotalRecords(0);</span>
<span class="nc" id="L905">			return intuition;</span>
		}
<span class="nc" id="L907">		EventDBDto eventDBDto = eventDBDtos.get(0);</span>
<span class="nc bnc" id="L908" title="All 2 branches missed.">		if (eventDBDto == null) {</span>
<span class="nc" id="L909">			intuition.setIntuitionTotalRecords(0);</span>
<span class="nc" id="L910">			return intuition;</span>
		}
<span class="nc" id="L912">		intuition.setIntuitionTotalRecords(1);</span>

<span class="nc" id="L914">		TransactionMonitoringPaymentsSummary intuitionSummary = JsonConverterUtil</span>
<span class="nc" id="L915">				.convertToObject(TransactionMonitoringPaymentsSummary.class, eventDBDto.getSummary());</span>
		
<span class="nc" id="L917">		String currentAction = eventDBDto.getIntuitionCurrentAction();</span>
		
<span class="nc" id="L919">		checkForNotPerformed(eventDBDtos, intuition, intuitionSummary, currentAction);</span>
<span class="nc" id="L920">		return intuition;</span>
	}
	
	private void checkForNotPerformed(List&lt;EventDBDto&gt; eventDBDtos, IntuitionPaymentResponse intuition,
			TransactionMonitoringPaymentsSummary intuitionSummary, String currentAction) {
<span class="nc" id="L925">			EventDBDto eventDBDto = eventDBDtos.get(0);</span>
<span class="nc" id="L926">			Integer passCount = 0;</span>
<span class="nc" id="L927">			Integer failCount = 0;</span>

<span class="nc" id="L929">			intuition.setCorrelationId(Constants.DASH_SINGLE_DETAILS);</span>
<span class="nc" id="L930">			intuition.setRuleRiskLevel(Constants.DASH_SINGLE_DETAILS);</span>
<span class="nc" id="L931">			intuition.setClientRiskLevel(Constants.DASH_SINGLE_DETAILS);</span>
<span class="nc" id="L932">			intuition.setUpdatedBy(&quot;system&quot;);</span>

<span class="nc bnc" id="L934" title="All 2 branches missed.">			if (intuitionSummary != null) {</span>
<span class="nc bnc" id="L935" title="All 2 branches missed.">				if (!Constants.NOT_PERFORMED.equalsIgnoreCase(intuitionSummary.getStatus())</span>
<span class="nc bnc" id="L936" title="All 2 branches missed.">						&amp;&amp; !Constants.NOT_REQUIRED.equalsIgnoreCase(intuitionSummary.getStatus())) {</span>
<span class="nc bnc" id="L937" title="All 2 branches missed.">					boolean status = intuitionSummary.getStatus() != null</span>
<span class="nc bnc" id="L938" title="All 2 branches missed.">							&amp;&amp; (Constants.CLEAR.equalsIgnoreCase(intuitionSummary.getStatus())</span>
<span class="nc bnc" id="L939" title="All 2 branches missed.">									|| Constants.CLEAN.equals(intuitionSummary.getStatus()));</span>
<span class="nc bnc" id="L940" title="All 2 branches missed.">					boolean action = intuitionSummary.getAction() != null</span>
<span class="nc bnc" id="L941" title="All 2 branches missed.">							&amp;&amp; (Constants.CLEAR.equalsIgnoreCase(intuitionSummary.getAction())</span>
<span class="nc bnc" id="L942" title="All 2 branches missed.">									|| Constants.CLEAN.equals(intuitionSummary.getAction()));</span>
					
<span class="nc bnc" id="L944" title="All 4 branches missed.">					if (status || action) {</span>
<span class="nc" id="L945">						passCount = eventDBDtos.size();</span>
					} else {
<span class="nc" id="L947">						failCount = eventDBDtos.size();</span>
					}

<span class="nc" id="L950">					setIntuitionPaymentsResponse(intuition, intuitionSummary);</span>

<span class="nc bnc" id="L952" title="All 2 branches missed.">				} else if (Constants.NOT_REQUIRED.equalsIgnoreCase(intuitionSummary.getStatus())) {</span>
<span class="nc" id="L953">					intuition.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L954">					intuition.setStatus(Constants.NOT_REQUIRED);</span>
<span class="nc" id="L955">					intuition.setDecision(Constants.NOT_REQUIRED);//Add for AT-5028</span>
<span class="nc bnc" id="L956" title="All 2 branches missed.">				} else if (Constants.NOT_PERFORMED.equalsIgnoreCase(intuitionSummary.getStatus())) {</span>
<span class="nc" id="L957">					intuition.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L958">					intuition.setStatus(Constants.NOT_PERFORMED);</span>
<span class="nc" id="L959">					intuition.setDecision(Constants.NOT_PERFORMED);//Add for AT-5028</span>
				}
			}else {
<span class="nc" id="L962">				intuition.setIsRequired(Boolean.FALSE);</span>
<span class="nc" id="L963">				intuition.setStatus(Constants.NOT_PERFORMED);</span>
<span class="nc" id="L964">				intuition.setDecision(Constants.NOT_PERFORMED);//Add for AT-5028</span>
			}

<span class="nc bnc" id="L967" title="All 2 branches missed.">			if (eventDBDto.getUpdatedOn() != null) {</span>
<span class="nc" id="L968">				intuition.setCreatedOn(DateTimeFormatter.dateTimeFormatter(eventDBDto.getUpdatedOn()));</span>
			}
<span class="nc" id="L970">			intuition.setPassCount(passCount);</span>
<span class="nc" id="L971">			intuition.setFailCount(failCount);</span>
<span class="nc" id="L972">			intuition.setId(eventDBDto.getId());</span>
<span class="nc" id="L973">			intuition.setIntuitionTotalRecords(eventDBDtos.size());</span>
<span class="nc" id="L974">			intuition.setCurrentAction(currentAction); //AT-4962</span>

<span class="nc" id="L976">		  }</span>

	private void setIntuitionPaymentsResponse(IntuitionPaymentResponse intuition,
			TransactionMonitoringPaymentsSummary intuitionSummary) {
<span class="nc bnc" id="L980" title="All 2 branches missed.">		if (null != intuitionSummary.getCorrelationId()) {</span>
<span class="nc" id="L981">			intuition.setCorrelationId(intuitionSummary.getCorrelationId());</span>
		}

<span class="nc bnc" id="L984" title="All 2 branches missed.">		if (null != intuitionSummary.getRuleScore()) {</span>
<span class="nc" id="L985">			intuition.setRuleScore(intuitionSummary.getRuleScore());</span>
		}

<span class="nc bnc" id="L988" title="All 2 branches missed.">		if (null != intuitionSummary.getRuleRiskLevel()) {</span>
<span class="nc" id="L989">			intuition.setRuleRiskLevel(intuitionSummary.getRuleRiskLevel());</span>
		}

<span class="nc bnc" id="L992" title="All 2 branches missed.">		if (null != intuitionSummary.getClientRiskScore()) {</span>
<span class="nc" id="L993">			intuition.setClientRuleScore(intuitionSummary.getClientRiskScore());</span>
		}

<span class="nc bnc" id="L996" title="All 2 branches missed.">		if (null != intuitionSummary.getClientRiskLevel()) {</span>
<span class="nc" id="L997">			intuition.setClientRiskLevel(intuitionSummary.getClientRiskLevel());</span>
		}

<span class="nc" id="L1000">		intuition.setStatus(intuitionSummary.getStatus());</span>
		//Add for AT-5028
<span class="nc bnc" id="L1002" title="All 4 branches missed.">		if (intuitionSummary.getAction() == null &amp;&amp; (intuitionSummary.getStatus().equalsIgnoreCase(Constants.CLEAN)</span>
<span class="nc bnc" id="L1003" title="All 2 branches missed.">				|| intuitionSummary.getStatus().equalsIgnoreCase(Constants.CLEAR))) {</span>
<span class="nc" id="L1004">			intuition.setDecision(intuitionSummary.getStatus());</span>
<span class="nc bnc" id="L1005" title="All 4 branches missed.">		} else if (intuitionSummary.getAction() == null &amp;&amp; intuitionSummary.getStatus().equalsIgnoreCase(Constants.HOLD)) {</span>
<span class="nc" id="L1006">			intuition.setDecision(intuitionSummary.getStatus());</span>
<span class="nc bnc" id="L1007" title="All 2 branches missed.">		} else if (intuitionSummary.getAction() != null</span>
<span class="nc bnc" id="L1008" title="All 2 branches missed.">				&amp;&amp; (intuitionSummary.getAction().equalsIgnoreCase(Constants.CLEAR)</span>
<span class="nc bnc" id="L1009" title="All 2 branches missed.">						|| intuitionSummary.getAction().equalsIgnoreCase(Constants.CLEAN))</span>
<span class="nc bnc" id="L1010" title="All 2 branches missed.">				&amp;&amp; intuitionSummary.getStatus().equalsIgnoreCase(Constants.HOLD)) {</span>
<span class="nc" id="L1011">			intuition.setDecision(intuitionSummary.getAction());</span>
<span class="nc bnc" id="L1012" title="All 4 branches missed.">		} else if (intuitionSummary.getAction() != null &amp;&amp; (intuitionSummary.getAction().equalsIgnoreCase(Constants.REJECT)</span>
<span class="nc bnc" id="L1013" title="All 2 branches missed.">				|| intuitionSummary.getAction().equalsIgnoreCase(Constants.SEIZE))</span>
<span class="nc bnc" id="L1014" title="All 2 branches missed.">				&amp;&amp; intuitionSummary.getStatus().equalsIgnoreCase(Constants.HOLD)) {</span>
<span class="nc" id="L1015">			intuition.setDecision(intuitionSummary.getAction());</span>
		}	
		
<span class="nc" id="L1018">		intuition.setUpdatedBy(intuitionSummary.getUserId());</span>
<span class="nc bnc" id="L1019" title="All 2 branches missed.">		if(intuitionSummary.getUserId() == null) {</span>
<span class="nc" id="L1020">			intuition.setUpdatedBy(&quot;system&quot;);</span>
		}
<span class="nc" id="L1022">		intuition.setIsRequired(Boolean.TRUE);</span>
<span class="nc" id="L1023">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>