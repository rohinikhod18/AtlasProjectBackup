<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>WorkEfficiencyReportQueryConstant.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-portal</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.dbport.report</a> &gt; <span class="el_source">WorkEfficiencyReportQueryConstant.java</span></div><h1>WorkEfficiencyReportQueryConstant.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.dbport.report;

/**
 * The Enum ReportQueryConstant.
 * 
 * @author laxmib
 *
 */
<span class="fc" id="L9">public enum WorkEfficiencyReportQueryConstant {</span>
	
<span class="fc" id="L11">	GET_WORK_EFFICIENCY_REPORT_RESOURCETYPE_FILTER(&quot;&quot;),</span>
	
<span class="fc" id="L13">	GET_WORK_EFFICIENCY_REPORT_ON_LOAD_INNER_QUERY_WITHOUT_PAGINATION(&quot;SELECT * FROM  (SELECT &quot;</span>
				+ &quot;                                               ur.SSOUserID , &quot;
				+ &quot; acc.type                                             acctype, &quot;
				+ &quot; Count(url.id)                                        AS &quot;
				+ &quot; lockedrecords, &quot;
				+ &quot; Count(lockreleasedon)                                AS &quot;
				+ &quot; releasedrecords, &quot;
				+ &quot; AVG(Datediff(second, url.createdon, lockreleasedon)) AS seconds &quot;
				+ &quot; FROM   userresourcelock url &quot;
				+ &quot; JOIN contact con &quot;
				+ &quot; ON url.resourceid = con.id &quot;
				+ &quot; JOIN account acc &quot;
				+ &quot; ON acc.id = con.accountid &quot;
				+ &quot;                                               LEFT JOIN     [User] ur &quot;
				+ &quot;                                                 ON       ur.id = url.userid &quot;
				+ &quot; AND url.id IN (SELECT id &quot;
				+ &quot; FROM   userresourcelock &quot;
				+ &quot; WHERE  Cast(createdon AS DATE) BETWEEN &quot;
				+ &quot; ? AND ? &quot;
				+ &quot; AND userid IN (SELECT DISTINCT( userid &quot;
				+ &quot; ) &quot;
				+ &quot; FROM   userresourcelock) &quot;
				+ &quot; ) &quot;
				+ &quot;                                        where ur.SSOUserID IS NOT NULL AND userid &gt; 0 &quot;
				+ &quot; GROUP  BY userid, ur.SSOUserID , &quot;
				+ &quot; acc.type) AS Result&quot;),
	
	
	
	/*GET_WORK_EFFICIENCY_REPORT_ON_LOAD_INNER_QUERY(&quot;DECLARE @Offset int = ?, &quot;
			+ &quot;@PageRows int = ?;&quot;
			+ &quot;WITH SelectedID AS( &quot;
			+ &quot;	SELECT &quot;
			+ &quot;		ur.SSOUserID, &quot;
			+ &quot;		CASE WHEN pfx.[type] IS NOT NULL THEN pfx.[type] &quot;
			+ &quot;			 WHEN cfx.[type] IS NOT NULL THEN cfx.[type] &quot;
			+ &quot;			 WHEN pin.[type] IS NOT NULL THEN pin.[type] &quot;
			+ &quot;			 WHEN pout.[type] IS NOT NULL THEN pout.[type] &quot;
			+ &quot;		END AS acctype, &quot;
			+ &quot;		url.id  AS urlid, &quot;
			+ &quot;		lockreleasedon , &quot;
			+ &quot;		url.createdon &quot;
			+ &quot;	FROM &quot;
			+ &quot;		userresourcelock url &quot;
			+ &quot;	LEFT JOIN contact con ON url.resourceid = con.id AND url.ResourceType = 3 &quot;
			+ &quot;	LEFT JOIN account pfx ON pfx.id = con.accountid &quot;
			+ &quot;	LEFT JOIN account cfx ON cfx.id = url.resourceid AND url.ResourceType = 4 &quot;
			+ &quot;	LEFT JOIN paymentin payin ON payin.id = url.resourceid AND url.ResourceType = 2 &quot;
			+ &quot;	LEFT JOIN Account pin ON payin.accountid=pin.id &quot;
			+ &quot;	LEFT JOIN paymentout payout ON payout.id = url.resourceid AND url.ResourceType = 1 &quot;
			+ &quot;	LEFT JOIN Account pout ON payout.accountid=pout.id &quot;
			+ &quot;	LEFT JOIN [User] ur ON ur.id = url.userid &quot;
			+ &quot;	where url.createdon BETWEEN ? AND ? &quot;
			+ &quot;		AND userid &gt; 0 &quot;
			+ &quot;		 &quot;
			+ &quot;) &quot;
			+ &quot;SELECT &quot;
			+ &quot;	SSOUserID,acctype, &quot;
			+ &quot;    Count( urlid ) AS lockedrecords, &quot;
			+ &quot;	Count( lockreleasedon ) AS releasedrecords, &quot;
			+ &quot;	Sum( Datediff( second, createdon, lockreleasedon )) AS seconds &quot;
			+ &quot;FROM SelectedID &quot;
			+ &quot;GROUP BY &quot;
			+ &quot;	SSOUserID, &quot;
			+ &quot;	acctype &quot;
			+ &quot;ORDER BY &quot;
			+ &quot;	SSOUserID ASC OFFSET @Offset ROWS &quot;
			+ &quot; FETCH NEXT @PageRows ROWS ONLY&quot;),*/
	
<span class="fc" id="L82">	GET_WORK_EFFICIENCY_REPORT_ON_LOAD_INNER_QUERY(&quot;DECLARE @Offset int = ?, &quot;</span>
			+ &quot;@PageRows int = ?;&quot;
			+ &quot;WITH SelectedID AS( &quot;
			+ &quot; SELECT &quot;
			+ &quot; ur.SSOUserID, &quot;
			+ &quot; CASE WHEN pfx.[type] IS NOT NULL THEN pfx.[type] &quot;
			+ &quot; WHEN cfx.[type] IS NOT NULL THEN cfx.[type] &quot;
			+ &quot; WHEN pin.[type] IS NOT NULL THEN pin.[type] &quot;
			+ &quot; WHEN pout.[type] IS NOT NULL THEN pout.[type] &quot;
			+ &quot; END AS acctype, &quot;
			+ &quot; url.id  AS urlid, &quot;
			+ &quot;     url.ResourceType,&quot;
			+ &quot; lockreleasedon , &quot;
			+ &quot; url.createdon &quot;
			+ &quot; FROM &quot;
			+ &quot; userresourcelock url &quot;
			+ &quot; LEFT JOIN contact con ON url.resourceid = con.id AND url.ResourceType = 3 &quot;
			+ &quot; LEFT JOIN account pfx ON pfx.id = con.accountid &quot;
			+ &quot; LEFT JOIN account cfx ON cfx.id = url.resourceid AND url.ResourceType = 4 &quot;
			+ &quot; LEFT JOIN paymentin payin ON payin.id = url.resourceid AND url.ResourceType = 2 &quot;
			+ &quot; LEFT JOIN Account pin ON payin.accountid=pin.id &quot;
			+ &quot; LEFT JOIN paymentout payout ON payout.id = url.resourceid AND url.ResourceType = 1 &quot;
			+ &quot; LEFT JOIN Account pout ON payout.accountid=pout.id &quot;
			+ &quot; LEFT JOIN [User] ur ON ur.id = url.userid &quot;
			+ &quot; where url.createdon BETWEEN ? AND ? &quot;
			+ &quot; AND userid &gt; 0  &quot;),
	
<span class="fc" id="L109">	GET_WORK_EFFICIENCY_REPORT_ON_LOAD(&quot;  {INNER_QUERY} ) &quot;</span>
			+ &quot;SELECT &quot;
			+ &quot; SSOUserID,acctype,ResourceType, &quot;
			+ &quot; Count( urlid ) AS lockedrecords, &quot;
			+ &quot; Count( lockreleasedon ) AS releasedrecords, &quot;
			+ &quot; AVG( Datediff( SECOND, createdon, lockreleasedon )) AS seconds, &quot;
			+ &quot; count(*) OVER() AS totalrows&quot;
			+ &quot; FROM SelectedID &quot;
			+ &quot; GROUP BY &quot;
			+ &quot; SSOUserID, &quot;
			+ &quot; ResourceType,&quot;
			+ &quot; acctype &quot;
			+ &quot; ORDER BY &quot;
			+ &quot; SSOUserID ASC OFFSET @Offset ROWS &quot;
			+ &quot; FETCH NEXT @PageRows ROWS ONLY&quot;),
	
<span class="fc" id="L125">	GET_WORK_EFFICIENCY_REPORT_ON_DOWNLOAD_INNER_QUERY(&quot;WITH SelectedID AS( &quot;</span>
			+ &quot; SELECT &quot;
			+ &quot; ur.SSOUserID, &quot;
			+ &quot; CASE WHEN pfx.[type] IS NOT NULL THEN pfx.[type] &quot;
			+ &quot; WHEN cfx.[type] IS NOT NULL THEN cfx.[type] &quot;
			+ &quot; WHEN pin.[type] IS NOT NULL THEN pin.[type] &quot;
			+ &quot; WHEN pout.[type] IS NOT NULL THEN pout.[type] &quot;
			+ &quot; END AS acctype, &quot;
			+ &quot; url.id  AS urlid, &quot;
			+ &quot;     url.ResourceType,&quot;
			+ &quot; lockreleasedon , &quot;
			+ &quot; url.createdon &quot;
			+ &quot; FROM &quot;
			+ &quot; userresourcelock url &quot;
			+ &quot; LEFT JOIN contact con ON url.resourceid = con.id AND url.ResourceType = 3 &quot;
			+ &quot; LEFT JOIN account pfx ON pfx.id = con.accountid &quot;
			+ &quot; LEFT JOIN account cfx ON cfx.id = url.resourceid AND url.ResourceType = 4 &quot;
			+ &quot; LEFT JOIN paymentin payin ON payin.id = url.resourceid AND url.ResourceType = 2 &quot;
			+ &quot; LEFT JOIN Account pin ON payin.accountid=pin.id &quot;
			+ &quot; LEFT JOIN paymentout payout ON payout.id = url.resourceid AND url.ResourceType = 1 &quot;
			+ &quot; LEFT JOIN Account pout ON payout.accountid=pout.id &quot;
			+ &quot; LEFT JOIN [User] ur ON ur.id = url.userid &quot;
			+ &quot; where url.createdon BETWEEN ? AND ? &quot;
			+ &quot; AND userid &gt; 0  &quot;),
	
<span class="fc" id="L150">	GET_WORK_EFFICIENCY_REPORT_ON_DOWNLOAD(&quot;  {INNER_QUERY} ) &quot;</span>
			+ &quot;SELECT &quot;
			+ &quot; SSOUserID,acctype,ResourceType, &quot;
			+ &quot; Count( urlid ) AS lockedrecords, &quot;
			+ &quot; Count( lockreleasedon ) AS releasedrecords, &quot;
			+ &quot; AVG( Datediff( SECOND, createdon, lockreleasedon )) AS seconds, &quot;
			+ &quot; count(*) OVER() AS totalrows&quot;
			+ &quot; FROM SelectedID &quot;
			+ &quot; GROUP BY &quot;
			+ &quot; SSOUserID, &quot;
			+ &quot; ResourceType,&quot;
			+ &quot; acctype &quot;),
	
<span class="fc" id="L163">	GET_WORK_EFFICIENCY_REPORT_COUNT(&quot;SELECT COUNT(*) AS count from ( {INNER_QUERY} ) AS Result2 &quot;),</span>
	
<span class="fc" id="L165">	GET_USERNAME_FOR_WORK_EFFICIENCY_REPORT(&quot;select SSOUserID from [user]&quot;),</span>
	
<span class="fc" id="L167">	GET_WATCHLIST(&quot;select id,reason from watchlist&quot;),</span>
	
<span class="fc" id="L169">	GET_WATCHLIST_CATEGORY(&quot;select id,reason from watchlist where category in (?)&quot;),</span>
	
<span class="fc" id="L171">	GET_OWNER(&quot;select distinct(SSOUserID) from [user] ur Join UserResourceLock url ON ur.id = url.UserID and ur.id &lt;&gt; 0&quot;),</span>
	
<span class="fc" id="L173">	GET_PAYMENT_STATUS(&quot;select status from PaymentComplianceStatusEnum &quot;);</span>
	
								
	private String query;

<span class="fc" id="L178">	WorkEfficiencyReportQueryConstant(String query) {</span>
<span class="fc" id="L179">		this.query = query;</span>

<span class="fc" id="L181">	}</span>

	public String getQuery() {
<span class="fc" id="L184">		return this.query;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>