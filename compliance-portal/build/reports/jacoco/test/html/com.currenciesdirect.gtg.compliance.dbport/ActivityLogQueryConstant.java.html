<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ActivityLogQueryConstant.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-portal</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.dbport</a> &gt; <span class="el_source">ActivityLogQueryConstant.java</span></div><h1>ActivityLogQueryConstant.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.dbport;

/**
 * The Enum ActivityLogQueryConstant.
 */
<span class="fc" id="L6">@SuppressWarnings(&quot;squid:S1192&quot;)</span>
public enum ActivityLogQueryConstant {

	/** The get payment in activity logs. */
<span class="fc" id="L10">	GET_PAYMENT_IN_ACTIVITY_LOGS_BY_ROWS(&quot;WITH SelectID AS( &quot;</span>
			+ &quot; SELECT Row_number() &quot;
			+ &quot;      OVER ( &quot;
			+ &quot;       ORDER BY pal.createdon DESC) AS rownum, &quot;
			+ &quot; (SELECT ssouserid &quot;
			+ &quot; FROM   [user] &quot;
			+ &quot; WHERE  id = pal.activityby) AS [User], &quot;
			+ &quot; pal.createdon, &quot;
			+ &quot; pald.[log] As [Activity], &quot;
			+ &quot; ate.module + ' ' + ate.type  AS [ActivityType], &quot;
			+ &quot; pin.id, &quot;
			+ &quot; pin.tradecontractnumber AS contractNumber, &quot;
			+ &quot; pal.comments AS [Comment] &quot;
			+ &quot; FROM paymentin pin &quot;
			+ &quot; JOIN paymentinactivitylog pal &quot;
			+ &quot; ON pin.id = pal.paymentinid &quot;
			+ &quot; JOIN paymentinactivitylogdetail pald &quot;
			+ &quot; ON pal.id = pald.activityid &quot;
			+ &quot; JOIN activitytypeenum ate &quot;
			+ &quot; ON pald.activitytype = ate.id &quot;
			+ &quot; WHERE  pin.accountid = ? ) &quot;
			+ &quot; SELECT * FROM SelectID &quot;
			+ &quot; WHERE  rownum &gt;= ? &quot;
			+ &quot;       AND rownum &lt;= ?&quot;),
	
	/** The get payment in activity logs count. */
<span class="fc" id="L36">	GET_PAYMENT_IN_ACTIVITY_LOGS_COUNT(&quot;SELECT COUNT(USER) as TotalCount &quot;</span>
			+ &quot;FROM ( &quot;
			+ &quot;SELECT (SELECT ssouserid &quot;
			+ &quot;FROM [User] &quot;
			+ &quot;WHERE id = pal.activityby) AS [USER], &quot;
			+ &quot;pal.createdon, &quot;
			+ &quot;pald.[log] As [Activity], &quot;
			+ &quot;ate.module + ' ' + ate.type AS [ActivityType], &quot;
			+ &quot;pin.id, &quot;
			+ &quot;pin.tradecontractnumber AS contractNumber, &quot;
			+ &quot;pal.comments AS [Comment] &quot;
			+ &quot; FROM paymentin pin &quot;
			+ &quot;JOIN paymentinactivitylog pal ON &quot;
			+ &quot;pin.id = pal.paymentinid &quot;
			+ &quot;JOIN paymentinactivitylogdetail pald ON &quot;
			+ &quot;pal.id = pald.activityid &quot;
			+ &quot;JOIN activitytypeenum ate ON &quot;
			+ &quot;pald.activitytype = ate.id &quot;
			+ &quot;WHERE pin.accountid = ? ) PIN&quot;),
	
	/** The get payment out activity logs by rows. */
<span class="fc" id="L57">	GET_PAYMENT_OUT_ACTIVITY_LOGS_BY_ROWS(&quot;WITH selectid &quot;</span>
			+ &quot;     AS (SELECT Row_number() &quot;
			+ &quot;                  OVER ( &quot;
			+ &quot;                    ORDER BY pal.createdon DESC) AS rownum, &quot;
			+ &quot;                (SELECT ssouserid &quot;
			+ &quot;                 FROM   [user] &quot;
			+ &quot;                 WHERE  id = pal.activityby)     AS [User], &quot;
			+ &quot;                pal.createdon, &quot;
			+ &quot;                pald.[log]                       AS [Activity], &quot;
			+ &quot;                ate.module + ' ' + ate.type      AS [ActivityType], &quot;
			+ &quot;                pout.id, &quot;
			+ &quot;                pout.contractnumber              AS contractNumber, &quot;
			+ &quot;                pal.comments                     AS [Comment] &quot;
			+ &quot;         FROM   paymentout pout &quot;
			+ &quot;                JOIN paymentoutactivitylog pal &quot;
			+ &quot;                  ON pout.id = pal.paymentoutid &quot;
			+ &quot;                JOIN paymentoutactivitylogdetail pald &quot;
			+ &quot;                  ON pal.id = pald.activityid &quot;
			+ &quot;                JOIN activitytypeenum ate &quot;
			+ &quot;                  ON pald.activitytype = ate.id &quot;
			+ &quot;         WHERE  pout.accountid = ?) &quot;
			+ &quot;SELECT * &quot;
			+ &quot;FROM   selectid &quot;
			+ &quot;WHERE  rownum &gt;= ? &quot;
			+ &quot;       AND rownum &lt;= ?&quot;),
	
	/** The get payment out activity logs count. */
<span class="fc" id="L84">	GET_PAYMENT_OUT_ACTIVITY_LOGS_COUNT(&quot;SELECT COUNT(USER) as TotalCount &quot;</span>
			+ &quot;FROM ( &quot;
			+ &quot;SELECT (SELECT ssouserid &quot;
			+ &quot;FROM [User] &quot;
			+ &quot;WHERE id = pal.activityby) AS [USER], &quot;
			+ &quot;pal.createdon, &quot;
			+ &quot;pald.[log] As [Activity], &quot;
			+ &quot;ate.module + ' ' + ate.type AS [ActivityType], &quot;
			+ &quot;pout.id, &quot;
			+ &quot;pout.contractnumber AS contractNumber, &quot;
			+ &quot;pal.comments AS [Comment] &quot;
			+ &quot; FROM paymentout pout &quot;
			+ &quot;JOIN paymentoutactivitylog pal ON &quot;
			+ &quot;pout.id = pal.paymentoutid &quot;
			+ &quot;JOIN paymentoutactivitylogdetail pald ON &quot;
			+ &quot;pal.id = pald.activityid &quot;
			+ &quot;JOIN activitytypeenum ate ON &quot;
			+ &quot;pald.activitytype = ate.id &quot;
			+ &quot; WHERE pout.accountid = ? ) PO&quot;),
	
	/** The get registration activity logs. */
<span class="fc" id="L105">	GET_REGISTRATION_ACTIVITY_LOGS(&quot;WITH SelectID AS( &quot;</span>
			+ &quot; SELECT Row_number() &quot;
			+ &quot;      OVER ( &quot;
			+ &quot;       ORDER BY pal.createdon DESC) AS rownum, &quot;
			+ &quot; (SELECT ssouserid &quot;
			+ &quot; FROM   [user] &quot;
			+ &quot; WHERE  id = pal.activityby) AS [User], &quot;
			+ &quot; pal.createdon As CreatedOn, &quot;
			+ &quot; pald.[log] As [Activity], &quot;
			+ &quot; ate.module + ' ' + ate.type  AS [ActivityType], &quot;
			+ &quot; pal.comments AS [Comment] &quot;
			+ &quot; FROM ProfileActivityLog pal &quot;
			+ &quot; JOIN ProfileActivityLogDetail pald &quot;
			+ &quot; ON pal.id = pald.activityid &quot;
			+ &quot; JOIN activitytypeenum ate &quot;
			+ &quot; ON pald.activitytype = ate.id &quot;
			+ &quot; WHERE  pal.accountid = ? ) &quot;
			+ &quot; SELECT * FROM SelectID &quot;
			+ &quot; WHERE  rownum &gt;= ? &quot;
			+ &quot;       AND rownum &lt;= ?&quot;),
	
	
	/** The get registration activity logs count. */
<span class="fc" id="L128">	GET_REGISTRATION_ACTIVITY_LOGS_COUNT(&quot;SELECT COUNT(USER) as TotalCount &quot;</span>
			+ &quot;FROM ( &quot;
			+ &quot;SELECT (SELECT ssouserid &quot;
			+ &quot;FROM [user] &quot;
			+ &quot;WHERE id = pal.activityby) AS [User], &quot;
			+ &quot;pal.createdon As CreatedOn, &quot;
			+ &quot;pald.[log] As [Activity], &quot;
			+ &quot;ate.module + ' ' + ate.type AS [ActivityType], &quot;
			+ &quot;pal.comments AS [Comment] &quot;
			+ &quot;FROM ProfileActivityLog pal &quot;
			+ &quot;JOIN ProfileActivityLogDetail pald &quot;
			+ &quot;ON pal.id = pald.activityid &quot;
			+ &quot;JOIN activitytypeenum ate &quot;
			+ &quot;ON pald.activitytype = ate.id &quot;
			+ &quot;WHERE pal.accountid = ? ) REG&quot;),
	
	/** The get all (consolidated registration, payment in, payment out) activity logs. */
<span class="fc" id="L145">	GET_ALL_ACTIVITY_LOGS(&quot;WITH SelectedAcc AS(&quot; + </span>
			&quot; SELECT id AS AccountID FROM Account WHERE id= ? &quot; + 
			&quot;),&quot; + 
			&quot;PayIn AS(&quot; + 
			&quot;SELECT id AS PayInID, p.tradecontractnumber AS ContractNumber FROM PaymentIn p JOIN SelectedAcc s ON p.accountid=s.AccountID&quot; + 
			&quot;),&quot; + 
			&quot;PayOut AS(&quot; + 
			&quot;SELECT id AS PayOutID, p.contractnumber AS ContractNumber FROM PaymentOut p JOIN SelectedAcc s ON p.accountid=s.AccountID&quot; + 
			&quot;),&quot; + 
			&quot;combine AS (&quot; + 
			&quot; SELECT ROW_NUMBER() OVER ( ORDER BY [CreatedOn] DESC)  AS 'row_num', *&quot; + 
			&quot; FROM (&quot; + 
			&quot; SELECT &quot; + 
			&quot; ssouserid  AS [USER], &quot; + 
			&quot; pal.createdon AS [CreatedOn], &quot; + 
			&quot; pald.[log] As [Activity], &quot; + 
			&quot; ate.module + ' ' + ate.type  AS [ActivityType], &quot; + 
			&quot; '---' AS [ContractNumber], &quot; + 
			&quot; pal.comments AS [Comment] &quot; + 
			&quot; FROM ProfileActivityLog pal JOIN SelectedAcc s ON pal.accountId=s.accountid &quot; + 
			&quot; JOIN ProfileActivityLogDetail pald ON pal.id = pald.activityid &quot; + 
			&quot; JOIN activitytypeenum ate ON pald.activitytype = ate.id&quot; + 
			&quot; JOIN [User] u ON u.id = pal.activityby&quot; + 
			&quot; UNION&quot; + 
			&quot; SELECT&quot; + 
			&quot; ssouserid  AS [USER], &quot; + 
			&quot; pal.createdon AS [CreatedOn], &quot; + 
			&quot; pald.[log] As [Activity], &quot; + 
			&quot; ate.module + ' ' + ate.type  AS [ActivityType], &quot; + 
			&quot; pin.[ContractNumber], &quot; + 
			&quot; pal.comments AS [Comment] &quot; + 
			&quot; FROM PayIn pin JOIN paymentinactivitylog pal ON pin.PayInID = pal.paymentinid &quot; + 
			&quot; JOIN paymentinactivitylogdetail pald ON pal.id = pald.activityid &quot; + 
			&quot; JOIN activitytypeenum ate ON pald.activitytype = ate.id&quot; + 
			&quot; JOIN [User] u ON u.id = pal.activityby&quot; + 
			&quot; UNION&quot; + 
			&quot; SELECT&quot; + 
			&quot; ssouserid  AS [USER],&quot; + 
			&quot; pal.createdon AS [CreatedOn], &quot; + 
			&quot; pald.[log] As [Activity], &quot; + 
			&quot; ate.module + ' ' + ate.type  AS [ActivityType], &quot; + 
			&quot; pout.[ContractNumber], &quot; + 
			&quot; pal.comments AS [Comment] &quot; + 
			&quot; FROM PayOut pout JOIN paymentoutactivitylog pal ON pout.PayOutId = pal.paymentoutid &quot; + 
			&quot; JOIN paymentoutactivitylogdetail pald ON pal.id = pald.activityid &quot; + 
			&quot; JOIN activitytypeenum ate ON pald.activitytype = ate.id&quot; + 
			&quot; JOIN [User] u ON u.id = pal.activityby&quot; + 
			&quot; )as A&quot; + 
			&quot;)&quot; + 
			&quot;SELECT (SELECT COUNT(1) FROM combine) AS totalrecords, *&quot; + 
			&quot;FROM combine &quot; + 
			&quot;WHERE row_num BETWEEN ? AND ? &quot;);

	/** The query. */
	private String query;

	/**
	 * Instantiates a new activity log query constant.
	 *
	 * @param query the query
	 */
<span class="fc" id="L206">	ActivityLogQueryConstant(String query) {</span>
<span class="fc" id="L207">		this.query = query;</span>
<span class="fc" id="L208">	}</span>

	/**
	 * Gets the query.
	 *
	 * @return the query
	 */
	public String getQuery() {
<span class="fc" id="L216">		return this.query;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>