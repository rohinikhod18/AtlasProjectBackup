<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FinscanTransformer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">sanction-service</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.sanction.finscanport</a> &gt; <span class="el_source">FinscanTransformer.java</span></div><h1>FinscanTransformer.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * 
 * Copyright 2017 Currencies Direct Ltd, United Kingdom
 * 
 * Compliance: FinscanTransformer.java
 ******************************************************************************/
package com.currenciesdirect.gtg.compliance.sanction.finscanport;

import java.util.ArrayList;
import java.util.List;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.currenciesdirect.gtg.compliance.commons.domain.config.ProviderProperty;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionBankRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionBankResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionBaseResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionBeneficiaryRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionBeneficiaryResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionContactRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionContactResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionResponse;
import com.currenciesdirect.gtg.compliance.commons.util.JsonConverterUtil;
import com.currenciesdirect.gtg.compliance.commons.util.ObjectCloner;
import com.currenciesdirect.gtg.compliance.sanction.core.domain.SanctionGetStatusRequest;
import com.currenciesdirect.gtg.compliance.sanction.core.domain.SanctionGetStatusResponse;
import com.currenciesdirect.gtg.compliance.sanction.exception.SanctionErrors;
import com.currenciesdirect.gtg.compliance.sanction.exception.SanctionException;
import com.currenciesdirect.gtg.compliance.sanction.util.Constants;
import com.currenciesdirect.gtg.compliance.sanction.util.SanctionDateTimeFormatter;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.innovativesystems.ArrayOfLSTServicesLookupRequest;
import com.innovativesystems.ArrayOfLSTServicesLookupResponse;
import com.innovativesystems.ArrayOfSLComplianceList;
import com.innovativesystems.ArrayOfSLComplianceRecord;
import com.innovativesystems.ArrayOfSLCustomStatus;
import com.innovativesystems.LSTServicesGetStatusRequest;
import com.innovativesystems.LSTServicesGetStatusResponse;
import com.innovativesystems.LSTServicesLookupMultiResponse;
import com.innovativesystems.LSTServicesLookupRequest;
import com.innovativesystems.LSTServicesLookupResponse;
import com.innovativesystems.SLClientSearchCodeEnum;
import com.innovativesystems.SLClientStatusEnum;
import com.innovativesystems.SLComplianceRecord;
import com.innovativesystems.SLCustomStatus;
import com.innovativesystems.SLGenderEnum;
import com.innovativesystems.SLPairStatusEnum;
import com.innovativesystems.SLResultTypeEnum;
import com.innovativesystems.SLSearchTypeEnum;
import com.innovativesystems.SLYesNoEnum;

/**
 * The Class FinscanTransformer.
 * 
 * @author Manish m
 */
public class FinscanTransformer {

	/** The Constant LOG. */
<span class="fc" id="L62">	private static final Logger LOG = LoggerFactory.getLogger(FinscanTransformer.class);</span>

	/** The finscan transformer. */
	private static FinscanTransformer finscanTransformer;

	/**
	 * Instantiates a new finscan transformer.
	 */
	private FinscanTransformer() {

	}

	/**
	 * Gets the single instance of FinscanTransformer.
	 *
	 * @return single instance of FinscanTransformer
	 */
	public static FinscanTransformer getInstance() {
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">		if (finscanTransformer == null) {</span>
<span class="fc" id="L81">			finscanTransformer = new FinscanTransformer();</span>
		}
<span class="fc" id="L83">		return finscanTransformer;</span>
	}

	/**
	 * Transform request object.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param providerProperty
	 *            the provider property
	 * @return the LST services lookup request[]
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public ArrayOfLSTServicesLookupRequest transformRequestObject(SanctionRequest sanctionRequest,
			ProviderProperty providerProperty) throws SanctionException {

<span class="nc" id="L100">		ArrayOfLSTServicesLookupRequest lookupRequests = new ArrayOfLSTServicesLookupRequest();</span>

		try {
			
<span class="nc bnc" id="L104" title="All 2 branches missed.">			if (sanctionRequest.getContactrequests() != null) {</span>
<span class="nc" id="L105">				tranformRequestForContact(sanctionRequest, providerProperty, lookupRequests.getLSTServicesLookupRequest());</span>
			}
<span class="nc bnc" id="L107" title="All 2 branches missed.">			if (sanctionRequest.getBeneficiaryRequests() != null) {</span>
<span class="nc" id="L108">				tranformRequestForBeneficiary(sanctionRequest, providerProperty, lookupRequests.getLSTServicesLookupRequest());</span>
			}
<span class="nc bnc" id="L110" title="All 2 branches missed.">			if (sanctionRequest.getBankRequests() != null) {</span>
<span class="nc" id="L111">				tranformRequestForBank(sanctionRequest, providerProperty, lookupRequests.getLSTServicesLookupRequest());</span>
			}

<span class="nc" id="L114">		} catch (SanctionException e) {</span>

<span class="nc" id="L116">			throw e;</span>
<span class="nc" id="L117">		} catch (Exception e) {</span>
<span class="nc" id="L118">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_REQUEST, e);</span>
<span class="nc" id="L119">		}</span>
<span class="nc" id="L120">		return lookupRequests;</span>
	}

	/**
	 * Tranform request for contact.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param providerProperty
	 *            the provider property
	 * @param lookupRequests
	 *            the lookup requests
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public void tranformRequestForContact(SanctionRequest sanctionRequest, ProviderProperty providerProperty,
			List&lt;LSTServicesLookupRequest&gt; lookupRequests) throws SanctionException {
		try {
<span class="nc bnc" id="L138" title="All 2 branches missed.">			for (SanctionContactRequest contactRequest : sanctionRequest.getContactrequests()) {</span>
<span class="nc" id="L139">				LSTServicesLookupRequest lookupRequest = new LSTServicesLookupRequest();</span>
<span class="nc" id="L140">				lookupRequest.setOrganizationName(Constants.CD);</span>
<span class="nc" id="L141">				lookupRequest.setUserName(providerProperty.getUserName());</span>
<span class="nc" id="L142">				lookupRequest.setPassword(providerProperty.getPassWord());</span>
<span class="nc" id="L143">				lookupRequest.setApplicationId(Constants.CLNTS);</span>

				// Modified wrt AT-1951
<span class="nc" id="L146">				lookupRequest.setLists(new ArrayOfSLComplianceList());</span>

<span class="nc bnc" id="L148" title="All 4 branches missed.">				if (contactRequest.getCategory() == null || contactRequest.getCategory().trim().isEmpty()</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">						|| Constants.INDIVIDUAL.equalsIgnoreCase(contactRequest.getCategory())) {</span>
<span class="nc" id="L150">					lookupRequest.setSearchType(SLSearchTypeEnum.INDIVIDUAL);</span>
				} else {
<span class="nc" id="L152">					lookupRequest.setSearchType(SLSearchTypeEnum.ORGANIZATION);</span>
				}
<span class="nc" id="L154">				lookupRequest.setClientStatus(SLClientStatusEnum.ACTIVE);</span>
<span class="nc" id="L155">				lookupRequest.setClientId(contactRequest.getSanctionId());</span>
<span class="nc" id="L156">				setGenderForContact(contactRequest, lookupRequest);</span>
<span class="nc" id="L157">				lookupRequest.setNameLine(contactRequest.getFullName());</span>
<span class="nc" id="L158">				lookupRequest.setClientSearchCode(SLClientSearchCodeEnum.FULL_NAME);</span>
<span class="nc" id="L159">				lookupRequest.setReturnComplianceRecords(SLYesNoEnum.YES);</span>
<span class="nc" id="L160">				lookupRequest.setAddClient(SLYesNoEnum.YES);</span>
<span class="nc" id="L161">				lookupRequest.setSendToReview(SLYesNoEnum.YES);</span>
<span class="nc" id="L162">				lookupRequest.setUpdateUserFields(SLYesNoEnum.YES);</span>
<span class="nc" id="L163">				lookupRequest.setUserField1Label(Constants.CITIZENSHIP);</span>
<span class="nc" id="L164">				lookupRequest.setUserField1Value(contactRequest.getCountry());</span>
<span class="nc" id="L165">				lookupRequest.setUserField2Label(&quot;Date of Birth&quot;);</span>
<span class="nc" id="L166">				String dob = SanctionDateTimeFormatter.getDOBForProvider(contactRequest.getDob());</span>
<span class="nc" id="L167">				lookupRequest.setUserField2Value(dob);</span>
<span class="nc" id="L168">				lookupRequest.setReturnCategory(SLYesNoEnum.YES);</span>
<span class="nc" id="L169">				lookupRequest.setReturnSourceLists(SLYesNoEnum.YES);</span>
<span class="nc" id="L170">				lookupRequest.setGenerateclientId(SLYesNoEnum.NO);</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">				if(null != sanctionRequest.getCustomerNumber())</span>
<span class="nc" id="L172">					lookupRequest.setComment(sanctionRequest.getCustomerNumber());</span>
<span class="nc" id="L173">				lookupRequests.add(lookupRequest);</span>
<span class="nc" id="L174">				String json = JsonConverterUtil.convertToJsonWithNull(lookupRequest);</span>
<span class="nc" id="L175">				LOG.warn(&quot;\nSanction Soap LookUp Contact Request : \n{}&quot;,json);</span>
<span class="nc" id="L176">			}</span>
<span class="nc" id="L177">		} catch (Exception e) {</span>
<span class="nc" id="L178">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_REQUEST, e);</span>
<span class="nc" id="L179">		}</span>
<span class="nc" id="L180">	}</span>

	/**
	 * Sets the gender for contact.
	 *
	 * @param contactRequest
	 *            the contact request
	 * @param lookupRequest
	 *            the lookup request
	 */
	private void setGenderForContact(SanctionContactRequest contactRequest, LSTServicesLookupRequest lookupRequest) {
<span class="nc bnc" id="L191" title="All 4 branches missed.">		if (contactRequest.getGender() != null &amp;&amp; !contactRequest.getGender().isEmpty()) {</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">			if (&quot;Male&quot;.equalsIgnoreCase(contactRequest.getGender().trim())) {</span>
<span class="nc" id="L193">				lookupRequest.setGender(SLGenderEnum.MALE);</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">			} else if (&quot;Female&quot;.equalsIgnoreCase(contactRequest.getGender().trim())) {</span>
<span class="nc" id="L195">				lookupRequest.setGender(SLGenderEnum.FEMALE);</span>
			} else {
<span class="nc" id="L197">				lookupRequest.setGender(SLGenderEnum.UNKNOWN);</span>
			}
		} else {
<span class="nc" id="L200">			lookupRequest.setGender(SLGenderEnum.UNKNOWN);</span>
		}
<span class="nc" id="L202">	}</span>

	/**
	 * Tranform request for beneficiary.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param providerProperty
	 *            the provider property
	 * @param lookupRequests
	 *            the lookup requests
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public void tranformRequestForBeneficiary(SanctionRequest sanctionRequest, ProviderProperty providerProperty,
			List&lt;LSTServicesLookupRequest&gt; lookupRequests) throws SanctionException {
		try {
<span class="nc bnc" id="L219" title="All 2 branches missed.">			for (SanctionBeneficiaryRequest beneficiaryRequest : sanctionRequest.getBeneficiaryRequests()) {</span>
<span class="nc" id="L220">				LSTServicesLookupRequest lookupRequest = new LSTServicesLookupRequest();</span>
<span class="nc" id="L221">				lookupRequest.setOrganizationName(Constants.CD);</span>
<span class="nc" id="L222">				lookupRequest.setUserName(providerProperty.getUserName());</span>
<span class="nc" id="L223">				lookupRequest.setPassword(providerProperty.getPassWord());</span>
<span class="nc" id="L224">				lookupRequest.setApplicationId(Constants.BNFC);</span>

				// Modified wrt AT-1951
<span class="nc" id="L227">				lookupRequest.setLists(new ArrayOfSLComplianceList());</span>

<span class="nc bnc" id="L229" title="All 4 branches missed.">				if (beneficiaryRequest.getCategory() == null || beneficiaryRequest.getCategory().trim().isEmpty()</span>
<span class="nc bnc" id="L230" title="All 2 branches missed.">						|| Constants.INDIVIDUAL.equalsIgnoreCase(beneficiaryRequest.getCategory())) {</span>
<span class="nc" id="L231">					lookupRequest.setSearchType(SLSearchTypeEnum.INDIVIDUAL);</span>
				} else {
<span class="nc" id="L233">					lookupRequest.setSearchType(SLSearchTypeEnum.ORGANIZATION);</span>
				}

<span class="nc" id="L236">				lookupRequest.setClientStatus(SLClientStatusEnum.ACTIVE);</span>
<span class="nc" id="L237">				lookupRequest.setClientId(beneficiaryRequest.getSanctionId());</span>
<span class="nc" id="L238">				setGenderForBene(beneficiaryRequest, lookupRequest);</span>

<span class="nc" id="L240">				lookupRequest.setNameLine(beneficiaryRequest.getFullName());</span>
<span class="nc" id="L241">				lookupRequest.setClientSearchCode(SLClientSearchCodeEnum.FULL_NAME);</span>
<span class="nc" id="L242">				lookupRequest.setReturnComplianceRecords(SLYesNoEnum.YES);</span>
<span class="nc" id="L243">				lookupRequest.setAddClient(SLYesNoEnum.YES);</span>
<span class="nc" id="L244">				lookupRequest.setSendToReview(SLYesNoEnum.YES);</span>
<span class="nc" id="L245">				lookupRequest.setUpdateUserFields(SLYesNoEnum.YES);</span>
<span class="nc" id="L246">				lookupRequest.setUserField1Label(Constants.CITIZENSHIP);</span>
<span class="nc" id="L247">				lookupRequest.setUserField1Value(beneficiaryRequest.getCountry());</span>
<span class="nc" id="L248">				lookupRequest.setUserField2Label(&quot;Date of Birth&quot;);</span>
<span class="nc" id="L249">				String dob = SanctionDateTimeFormatter.getDOBForProvider(beneficiaryRequest.getDob());</span>
<span class="nc" id="L250">				lookupRequest.setUserField2Value(dob);</span>
<span class="nc" id="L251">				lookupRequest.setReturnCategory(SLYesNoEnum.YES);</span>
<span class="nc" id="L252">				lookupRequest.setReturnSourceLists(SLYesNoEnum.YES);</span>
<span class="nc" id="L253">				lookupRequest.setGenerateclientId(SLYesNoEnum.NO);</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">				if(null != sanctionRequest.getCustomerNumber())</span>
<span class="nc" id="L255">					lookupRequest.setComment(sanctionRequest.getCustomerNumber());</span>
<span class="nc" id="L256">				lookupRequests.add(lookupRequest);</span>
<span class="nc" id="L257">				String json = JsonConverterUtil.convertToJsonWithNull(lookupRequest);</span>
<span class="nc" id="L258">				LOG.warn(&quot;\nSanction Soap LookUp Benficiary Request : \n{}&quot;,json);</span>
<span class="nc" id="L259">			}</span>
<span class="nc" id="L260">		} catch (Exception e) {</span>
<span class="nc" id="L261">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_REQUEST, e);</span>
<span class="nc" id="L262">		}</span>
<span class="nc" id="L263">	}</span>

	/**
	 * Sets the gender for bene.
	 *
	 * @param beneficiaryRequest
	 *            the beneficiary request
	 * @param lookupRequest
	 *            the lookup request
	 */
	private void setGenderForBene(SanctionBeneficiaryRequest beneficiaryRequest,
			LSTServicesLookupRequest lookupRequest) {
<span class="nc bnc" id="L275" title="All 4 branches missed.">		if (beneficiaryRequest.getGender() != null || !beneficiaryRequest.getGender().isEmpty()) {</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">			if (&quot;Male&quot;.equalsIgnoreCase(beneficiaryRequest.getGender().trim())) {</span>
<span class="nc" id="L277">				lookupRequest.setGender(SLGenderEnum.MALE);</span>
<span class="nc bnc" id="L278" title="All 2 branches missed.">			} else if (&quot;Female&quot;.equalsIgnoreCase(beneficiaryRequest.getGender().trim())) {</span>
<span class="nc" id="L279">				lookupRequest.setGender(SLGenderEnum.FEMALE);</span>
			} else {
<span class="nc" id="L281">				lookupRequest.setGender(SLGenderEnum.UNKNOWN);</span>
			}
		} else {
<span class="nc" id="L284">			lookupRequest.setGender(SLGenderEnum.UNKNOWN);</span>
		}
<span class="nc" id="L286">	}</span>

	/**
	 * Tranform request for bank.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param providerProperty
	 *            the provider property
	 * @param lookupRequests
	 *            the lookup requests
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public void tranformRequestForBank(SanctionRequest sanctionRequest, ProviderProperty providerProperty,
			List&lt;LSTServicesLookupRequest&gt; lookupRequests) throws SanctionException {
		try {
<span class="nc bnc" id="L303" title="All 2 branches missed.">			for (SanctionBankRequest bankRequest : sanctionRequest.getBankRequests()) {</span>
<span class="nc" id="L304">				LSTServicesLookupRequest lookupRequest = new LSTServicesLookupRequest();</span>
<span class="nc" id="L305">				lookupRequest.setOrganizationName(Constants.CD);</span>
<span class="nc" id="L306">				lookupRequest.setUserName(providerProperty.getUserName());</span>
<span class="nc" id="L307">				lookupRequest.setPassword(providerProperty.getPassWord());</span>
<span class="nc" id="L308">				lookupRequest.setApplicationId(Constants.BANK);</span>
<span class="nc" id="L309">				lookupRequest.setGender(SLGenderEnum.MALE);</span>

				// Modified wrt AT-1951
<span class="nc" id="L312">				lookupRequest.setLists(new ArrayOfSLComplianceList());</span>
<span class="nc" id="L313">				lookupRequest.setCustomStatus(getCustomStatuses());</span>

<span class="nc" id="L315">				lookupRequest.setSearchType(SLSearchTypeEnum.ORGANIZATION);</span>
<span class="nc" id="L316">				lookupRequest.setClientStatus(SLClientStatusEnum.ACTIVE);</span>
<span class="nc" id="L317">				lookupRequest.setClientId(bankRequest.getSanctionId());</span>

<span class="nc" id="L319">				lookupRequest.setNameLine(bankRequest.getBankName());</span>
<span class="nc" id="L320">				lookupRequest.setClientSearchCode(SLClientSearchCodeEnum.FULL_NAME);</span>
<span class="nc" id="L321">				lookupRequest.setReturnComplianceRecords(SLYesNoEnum.YES);</span>
<span class="nc" id="L322">				lookupRequest.setAddClient(SLYesNoEnum.YES);</span>
<span class="nc" id="L323">				lookupRequest.setSendToReview(SLYesNoEnum.YES);</span>
<span class="nc" id="L324">				lookupRequest.setUpdateUserFields(SLYesNoEnum.YES);</span>
<span class="nc" id="L325">				lookupRequest.setUserField1Label(Constants.CITIZENSHIP);</span>
<span class="nc" id="L326">				lookupRequest.setUserField1Value(bankRequest.getCountry());</span>

<span class="nc" id="L328">				lookupRequest.setReturnCategory(SLYesNoEnum.YES);</span>
<span class="nc" id="L329">				lookupRequest.setReturnSourceLists(SLYesNoEnum.YES);</span>
<span class="nc" id="L330">				lookupRequest.setGenerateclientId(SLYesNoEnum.NO);</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">				if(null != sanctionRequest.getCustomerNumber())</span>
<span class="nc" id="L332">					lookupRequest.setComment(sanctionRequest.getCustomerNumber());</span>
<span class="nc" id="L333">				lookupRequests.add(lookupRequest);</span>
<span class="nc" id="L334">				String json = JsonConverterUtil.convertToJsonWithNull(lookupRequest);</span>
<span class="nc" id="L335">				LOG.warn(&quot;\nSanction Soap LookUp Bank Request : \n{}&quot;,json);</span>
<span class="nc" id="L336">			}</span>
<span class="nc" id="L337">		} catch (Exception e) {</span>
<span class="nc" id="L338">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_REQUEST, e);</span>
<span class="nc" id="L339">		}</span>
<span class="nc" id="L340">	}</span>
	
	/**
	 * // AT-4384
	 * Adding custom status for BANK as 
	 * &lt;customStatus&gt;
	 *  &lt;SLCustomStatus&gt;
	 *		&lt;statusString&gt;Permanent Safe&lt;/statusString&gt;
	 *		&lt;status&gt;SAFE&lt;/status&gt;
	 *	&lt;/SLCustomStatus&gt;
	 * &lt;/customStatus&gt;
	 *
	 * @return ArrayOfSLCustomStatus
	 */
	private static ArrayOfSLCustomStatus getCustomStatuses() {
		
<span class="nc" id="L356">		ArrayOfSLCustomStatus arrayOfSLCustomStatus = new ArrayOfSLCustomStatus();</span>
		
<span class="nc" id="L358">		List&lt;SLCustomStatus&gt; slCustomStatus = arrayOfSLCustomStatus.getSLCustomStatus();</span>
		
<span class="nc" id="L360">		SLCustomStatus permanentSafeToSafeCustomStatus = new SLCustomStatus();</span>
<span class="nc" id="L361">		permanentSafeToSafeCustomStatus.setStatusString(Constants.PERMANENT_SAFE);</span>
<span class="nc" id="L362">		permanentSafeToSafeCustomStatus.setStatus(SLPairStatusEnum.SAFE);</span>
		
<span class="nc" id="L364">		slCustomStatus.add(permanentSafeToSafeCustomStatus);</span>
		
<span class="nc" id="L366">		return arrayOfSLCustomStatus;</span>
	}

	/**
	 * Transform response object.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param multiResponse
	 *            the multi response
	 * @param alwaysPass
	 *            the always pass
	 * @return the sanction response
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public SanctionResponse transformResponseObject(SanctionRequest sanctionRequest,
			LSTServicesLookupMultiResponse multiResponse, Boolean alwaysPass) throws SanctionException {
<span class="nc" id="L384">		SanctionResponse response = new SanctionResponse();</span>
<span class="nc" id="L385">		List&lt;SanctionContactResponse&gt; contactReponses = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L386">		List&lt;SanctionBeneficiaryResponse&gt; beneficiaryResponses = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L387">		List&lt;SanctionBankResponse&gt; bankResponses = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L388">		ObjectMapper mapper = new ObjectMapper();</span>
<span class="nc" id="L389">		LSTServicesLookupMultiResponse tmp = new LSTServicesLookupMultiResponse();</span>
<span class="nc" id="L390">		ArrayOfLSTServicesLookupResponse tmpResponses = new ArrayOfLSTServicesLookupResponse();</span>
		try {
<span class="nc" id="L392">			ObjectCloner.copyNullFields(tmp, multiResponse, LSTServicesLookupMultiResponse.class);</span>
<span class="nc" id="L393">		} catch (Exception e1) {</span>
<span class="nc" id="L394">			LOG.error(&quot;Error : transformResponseObject() --&gt;&quot;, e1);</span>
<span class="nc" id="L395">		}</span>

		try {
<span class="nc" id="L398">			ArrayOfLSTServicesLookupResponse lookupResponse = multiResponse.getResponses();</span>
<span class="nc bnc" id="L399" title="All 2 branches missed.">			for (LSTServicesLookupResponse lstServicesLookupResponse : lookupResponse.getLSTServicesLookupResponse()) {</span>
<span class="nc" id="L400">				tmpResponses.getLSTServicesLookupResponse().add(lstServicesLookupResponse);</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">				if (tmp != null) {</span>
<span class="nc" id="L402">					tmp.setResponses(tmpResponses);</span>
				}
<span class="nc" id="L404">				tmp.setMessage(lstServicesLookupResponse.getMessage());</span>
<span class="nc" id="L405">				tmp.setStatus(lstServicesLookupResponse.getStatus());</span>
<span class="nc" id="L406">				String applicationId = getApplicationId(sanctionRequest, lstServicesLookupResponse);</span>
<span class="nc bnc" id="L407" title="All 2 branches missed.">				if (Constants.CLNTS.equalsIgnoreCase(applicationId)) {</span>
<span class="nc" id="L408">					SanctionContactResponse contactReponse = tranformResponseForContact(lstServicesLookupResponse,</span>
							alwaysPass);
<span class="nc" id="L410">					contactReponse.setProviderResponse(mapper.writeValueAsString(tmp));</span>
<span class="nc" id="L411">					contactReponse.setContactId(getRequestContactId(sanctionRequest, contactReponse.getSanctionId()));</span>
<span class="nc" id="L412">					contactReponse.setProviderName(Constants.FINSCAN_PROVIDER);</span>
<span class="nc" id="L413">					contactReponse.setProviderMethod(Constants.PROVIDER_METHOD_SL_LOOKUP_MULTI);</span>
<span class="nc" id="L414">					contactReponses.add(contactReponse);</span>
				}
<span class="nc bnc" id="L416" title="All 2 branches missed.">				if (Constants.BNFC.equalsIgnoreCase(applicationId)) {</span>

<span class="nc" id="L418">					SanctionBeneficiaryResponse beneficiaryResponse = tranformResponseForBeneficiary(</span>
							lstServicesLookupResponse, alwaysPass);
<span class="nc" id="L420">					beneficiaryResponse.setProviderResponse(mapper.writeValueAsString(tmp));</span>
<span class="nc" id="L421">					beneficiaryResponse</span>
<span class="nc" id="L422">							.setBeneficiaryId(getRequestBeneId(sanctionRequest, beneficiaryResponse.getSanctionId()));</span>
<span class="nc" id="L423">					beneficiaryResponse.setProviderName(Constants.FINSCAN_PROVIDER);</span>
<span class="nc" id="L424">					beneficiaryResponse.setProviderMethod(Constants.PROVIDER_METHOD_SL_LOOKUP_MULTI);</span>
<span class="nc" id="L425">					beneficiaryResponses.add(beneficiaryResponse);</span>
				}
<span class="nc bnc" id="L427" title="All 2 branches missed.">				if (Constants.BANK.equalsIgnoreCase(applicationId)) {</span>
<span class="nc" id="L428">					SanctionBankResponse bankResponse = tranformResponseForBank(lstServicesLookupResponse, alwaysPass);</span>
<span class="nc" id="L429">					bankResponse.setProviderResponse(mapper.writeValueAsString(tmp));</span>
<span class="nc" id="L430">					bankResponse.setBankID(getRequestBankId(sanctionRequest, bankResponse.getSanctionId()));</span>
<span class="nc" id="L431">					bankResponse.setProviderName(Constants.FINSCAN_PROVIDER);</span>
<span class="nc" id="L432">					bankResponse.setProviderMethod(Constants.PROVIDER_METHOD_SL_LOOKUP_MULTI);</span>
<span class="nc" id="L433">					bankResponses.add(bankResponse);</span>
				}

<span class="nc" id="L436">			}</span>
<span class="nc" id="L437">			response.setContactResponses(contactReponses);</span>
<span class="nc" id="L438">			response.setBeneficiaryResponses(beneficiaryResponses);</span>
<span class="nc" id="L439">			response.setBankResponses(bankResponses);</span>
<span class="nc" id="L440">		} catch (Exception e) {</span>
<span class="nc" id="L441">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_RESPONSE, e);</span>
<span class="nc" id="L442">		}</span>
<span class="nc" id="L443">		return response;</span>
	}

	/**
	 * Gets the request contact id.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param sanctionID
	 *            the sanction ID
	 * @return the request contact id
	 */
	private Integer getRequestContactId(SanctionRequest sanctionRequest, String sanctionID) {
<span class="nc bnc" id="L456" title="All 2 branches missed.">		for (SanctionContactRequest contactRequest : sanctionRequest.getContactrequests()) {</span>
<span class="nc bnc" id="L457" title="All 2 branches missed.">			if (sanctionID.equals(contactRequest.getSanctionId())) {</span>
<span class="nc" id="L458">				return contactRequest.getContactId();</span>
			}
<span class="nc" id="L460">		}</span>
<span class="nc" id="L461">		return 0;</span>
	}

	/**
	 * Gets the request bene id.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param sanctionID
	 *            the sanction ID
	 * @return the request bene id
	 */
	private Integer getRequestBeneId(SanctionRequest sanctionRequest, String sanctionID) {
<span class="nc bnc" id="L474" title="All 2 branches missed.">		for (SanctionBeneficiaryRequest beneRequest : sanctionRequest.getBeneficiaryRequests()) {</span>
<span class="nc bnc" id="L475" title="All 2 branches missed.">			if (sanctionID.equals(beneRequest.getSanctionId())) {</span>
<span class="nc" id="L476">				return beneRequest.getBeneficiaryId();</span>
			}
<span class="nc" id="L478">		}</span>
<span class="nc" id="L479">		return 0;</span>
	}

	/**
	 * Gets the request bank id.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param sanctionID
	 *            the sanction ID
	 * @return the request bank id
	 */
	private Integer getRequestBankId(SanctionRequest sanctionRequest, String sanctionID) {
<span class="nc bnc" id="L492" title="All 2 branches missed.">		for (SanctionBankRequest bankRequest : sanctionRequest.getBankRequests()) {</span>
<span class="nc bnc" id="L493" title="All 2 branches missed.">			if (sanctionID.equals(bankRequest.getSanctionId())) {</span>
<span class="nc" id="L494">				return bankRequest.getBankId();</span>
			}
<span class="nc" id="L496">		}</span>
<span class="nc" id="L497">		return 0;</span>
	}

	/**
	 * Gets the application id.
	 *
	 * @param sanctionRequest
	 *            the sanction request
	 * @param contactResponse
	 *            the contact response
	 * @return the application id
	 */
	private String getApplicationId(SanctionRequest sanctionRequest, LSTServicesLookupResponse contactResponse) {

<span class="nc bnc" id="L511" title="All 4 branches missed.">		if (sanctionRequest.getContactrequests() != null &amp;&amp; !sanctionRequest.getContactrequests().isEmpty()) {</span>
<span class="nc bnc" id="L512" title="All 2 branches missed.">			for (SanctionContactRequest contactRequest : sanctionRequest.getContactrequests()) {</span>
<span class="nc bnc" id="L513" title="All 2 branches missed.">				if (contactResponse.getClientId().equals(contactRequest.getSanctionId())) {</span>
<span class="nc" id="L514">					return Constants.CLNTS;</span>
				}
<span class="nc" id="L516">			}</span>
		}
<span class="nc bnc" id="L518" title="All 4 branches missed.">		if (sanctionRequest.getBeneficiaryRequests() != null &amp;&amp; !sanctionRequest.getBeneficiaryRequests().isEmpty()) {</span>
<span class="nc bnc" id="L519" title="All 2 branches missed.">			for (SanctionBeneficiaryRequest beneficiaryRequest : sanctionRequest.getBeneficiaryRequests()) {</span>
<span class="nc bnc" id="L520" title="All 2 branches missed.">				if (contactResponse.getClientId().equals(beneficiaryRequest.getSanctionId())) {</span>
<span class="nc" id="L521">					return Constants.BNFC;</span>
				}
<span class="nc" id="L523">			}</span>
		}

<span class="nc" id="L526">		return Constants.BANK;</span>
	}

	/**
	 * Tranform response for contact.
	 *
	 * @param lstServicesLookupResponse
	 *            the lst services lookup response
	 * @param alwaysPass
	 *            the always pass
	 * @return the sanction contact response
	 * @throws SanctionException
	 *             the sanction exception
	 */
	private SanctionContactResponse tranformResponseForContact(LSTServicesLookupResponse lstServicesLookupResponse,
			Boolean alwaysPass) throws SanctionException {
<span class="nc" id="L542">		SanctionContactResponse contactReponse = new SanctionContactResponse();</span>
		try {
<span class="nc" id="L544">			transformBaseResponse(contactReponse, lstServicesLookupResponse, alwaysPass);</span>
<span class="nc" id="L545">		} catch (Exception e) {</span>
<span class="nc" id="L546">			contactReponse.setStatus(Constants.FAIL);</span>
<span class="nc" id="L547">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_RESPONSE, e);</span>
<span class="nc" id="L548">		}</span>
<span class="nc" id="L549">		return contactReponse;</span>
	}

	/**
	 * Tranform response for beneficiary.
	 *
	 * @param lstServicesLookupResponse
	 *            the lst services lookup response
	 * @param alwaysPass
	 *            the always pass
	 * @return the sanction beneficiary response
	 * @throws SanctionException
	 *             the sanction exception
	 */
	private SanctionBeneficiaryResponse tranformResponseForBeneficiary(
			LSTServicesLookupResponse lstServicesLookupResponse, Boolean alwaysPass) throws SanctionException {
<span class="nc" id="L565">		SanctionBeneficiaryResponse beneficiaryResponse = new SanctionBeneficiaryResponse();</span>
		try {
<span class="nc" id="L567">			transformBaseResponse(beneficiaryResponse, lstServicesLookupResponse, alwaysPass);</span>
<span class="nc" id="L568">		} catch (Exception e) {</span>
<span class="nc" id="L569">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_RESPONSE, e);</span>
<span class="nc" id="L570">		}</span>
<span class="nc" id="L571">		return beneficiaryResponse;</span>
	}

	/**
	 * Tranform response for bank.
	 *
	 * @param lstServicesLookupResponse
	 *            the lst services lookup response
	 * @param alwaysPass
	 *            the always pass
	 * @return the sanction bank response
	 * @throws SanctionException
	 *             the sanction exception
	 */
	private SanctionBankResponse tranformResponseForBank(LSTServicesLookupResponse lstServicesLookupResponse,
			Boolean alwaysPass) throws SanctionException {
<span class="nc" id="L587">		SanctionBankResponse bankResponse = new SanctionBankResponse();</span>
		try {
<span class="nc" id="L589">			transformBaseResponse(bankResponse, lstServicesLookupResponse, alwaysPass);</span>
<span class="nc" id="L590">		} catch (Exception e) {</span>
<span class="nc" id="L591">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_RESPONSE, e);</span>
<span class="nc" id="L592">		}</span>
<span class="nc" id="L593">		return bankResponse;</span>
	}

	private boolean isWorldCheck(String catagory) {

<span class="nc bnc" id="L598" title="All 4 branches missed.">		if (Constants.WC_LRI.equalsIgnoreCase(catagory) || Constants.WC_PEE_IND.equalsIgnoreCase(catagory)) {</span>
<span class="nc" id="L599">			return true;</span>
		}

<span class="nc bnc" id="L602" title="All 4 branches missed.">		if (Constants.WC_LRE.equalsIgnoreCase(catagory) || Constants.WC_SNC.equalsIgnoreCase(catagory)) {</span>
<span class="nc" id="L603">			return true;</span>
		}

<span class="nc bnc" id="L606" title="All 4 branches missed.">		return (Constants.WC_PEP.equalsIgnoreCase(catagory) || Constants.WC_SNC_IND.equalsIgnoreCase(catagory));</span>
	}

	/**
	 * Checks if is ofac found.
	 *
	 * @param catagory
	 *            the catagory
	 * @return true, if is ofac found
	 */
	private boolean isOfacFound(String catagory) {
<span class="nc bnc" id="L617" title="All 4 branches missed.">		return Constants.HRI.equalsIgnoreCase(catagory) || Constants.HRE.equalsIgnoreCase(catagory);</span>
	}

	/**
	 * Transform base response.
	 *
	 * @param baseResponse
	 *            the base response
	 * @param lstServicesLookupResponse
	 *            the lst services lookup response
	 * @param alwaysPass
	 *            the always pass
	 */
	private void transformBaseResponse(SanctionBaseResponse baseResponse,
			LSTServicesLookupResponse lstServicesLookupResponse, Boolean alwaysPass) {
<span class="nc" id="L632">		baseResponse.setOfacList(Constants.NO_MATCH_FOUND);</span>
<span class="nc" id="L633">		baseResponse.setWorldCheck(Constants.NO_MATCH_FOUND);</span>
<span class="nc" id="L634">		baseResponse.setSanctionId(lstServicesLookupResponse.getClientId());</span>
<span class="nc" id="L635">		baseResponse.setPendingCount(lstServicesLookupResponse.getPendingCount());</span>
<span class="nc" id="L636">		baseResponse.setResultsCount(lstServicesLookupResponse.getResultsCount());</span>

<span class="nc" id="L638">		setWcAndOfac(baseResponse, lstServicesLookupResponse.getComplianceRecords());</span>
		// for testing purpose only.. need to remove alwayspass hook after
		// testing
<span class="nc bnc" id="L641" title="All 4 branches missed.">		if (null != alwaysPass &amp;&amp; alwaysPass) {</span>
<span class="nc" id="L642">			baseResponse.setStatus(Constants.PASS);</span>
		} // testing code end
<span class="nc bnc" id="L644" title="All 2 branches missed.">		else if ((SLResultTypeEnum.ERROR)==lstServicesLookupResponse.getStatus()) {</span>
<span class="nc" id="L645">			baseResponse.setOfacList(Constants.NOT_AVAILABLE);</span>
<span class="nc" id="L646">			baseResponse.setWorldCheck(Constants.NOT_AVAILABLE);</span>
<span class="nc" id="L647">			baseResponse.setStatus(Constants.SERVICE_FAILURE);</span>
		} else {
<span class="nc" id="L649">			baseResponse.setStatus(lstServicesLookupResponse.getStatus().toString());</span>
		}
<span class="nc" id="L651">		baseResponse.setStatusDescription(lstServicesLookupResponse.getMessage());</span>
<span class="nc" id="L652">	}</span>

	/**
	 * Sets the wc and ofac.
	 *
	 * @param baseResponse
	 *            the base response
	 * @param complianceRecords
	 *            the compliance records
	 */
	private void setWcAndOfac(SanctionBaseResponse baseResponse, ArrayOfSLComplianceRecord complianceRecords) {
<span class="nc bnc" id="L663" title="All 2 branches missed.">		for (SLComplianceRecord complianceRecord : complianceRecords.getSLComplianceRecord()) {</span>
<span class="nc" id="L664">			boolean worldCheckFound = false;</span>
<span class="nc" id="L665">			boolean ofacFound = false;</span>
<span class="nc bnc" id="L666" title="All 2 branches missed.">			for (String finscancategory : complianceRecord.getFinscanCategory().getString()) {</span>
<span class="nc bnc" id="L667" title="All 2 branches missed.">				if (isWorldCheck(finscancategory)) {</span>
<span class="nc" id="L668">					baseResponse.setWorldCheck(Constants.MATCH_FOUND);</span>
<span class="nc" id="L669">					worldCheckFound = true;</span>
				}
<span class="nc bnc" id="L671" title="All 2 branches missed.">				if (isOfacFound(finscancategory)) {</span>
<span class="nc" id="L672">					baseResponse.setOfacList(Constants.MATCH_FOUND);</span>
<span class="nc" id="L673">					ofacFound = true;</span>
				}
<span class="nc" id="L675">			}</span>
<span class="nc bnc" id="L676" title="All 4 branches missed.">			if (ofacFound &amp;&amp; worldCheckFound) {</span>
<span class="nc" id="L677">				break;</span>
			}
<span class="nc" id="L679">		}</span>
<span class="nc" id="L680">	}</span>

	/**
	 * Transform get contact status request.
	 *
	 * @param request
	 *            the request
	 * @param property
	 *            the property
	 * @return the LST services get status request
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public LSTServicesGetStatusRequest transformGetContactStatusRequest(SanctionGetStatusRequest request,
			ProviderProperty property) throws SanctionException {
<span class="nc" id="L695">		LSTServicesGetStatusRequest getStatusRequest = new LSTServicesGetStatusRequest();</span>
		try {
<span class="nc" id="L697">			getStatusRequest.setApplicationId(request.getApplicationId());</span>
<span class="nc" id="L698">			getStatusRequest.setClientId(request.getSanctionId());</span>
<span class="nc" id="L699">			getStatusRequest.setUserName(property.getUserName());</span>
<span class="nc" id="L700">			getStatusRequest.setPassword(property.getPassWord());</span>
<span class="nc" id="L701">			getStatusRequest.setOrganizationName(Constants.CD);</span>
			
<span class="nc bnc" id="L703" title="All 2 branches missed.">			if (Constants.BANK.equalsIgnoreCase(request.getApplicationId())) {</span>
<span class="nc" id="L704">				getStatusRequest.setCustomStatus(getCustomStatuses());</span>
			}

<span class="nc" id="L707">		} catch (Exception e) {</span>
<span class="nc" id="L708">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_REQUEST, e);</span>
<span class="nc" id="L709">		}</span>
<span class="nc" id="L710">		return getStatusRequest;</span>

	}

	/**
	 * Made changes to set OfactList and WorldCheck ServiceStatus -Saylee.
	 *
	 * @param response
	 *            the response
	 * @param fundsOutRequest
	 *            the funds out request
	 * @param alwaysPass
	 *            the always pass
	 * @return the sanction get status response
	 * @throws SanctionException
	 *             the sanction exception
	 */
	public SanctionGetStatusResponse transformContactStatusResponse(LSTServicesGetStatusResponse response,
			SanctionGetStatusRequest fundsOutRequest, Boolean alwaysPass) throws SanctionException {
<span class="nc" id="L729">		SanctionGetStatusResponse fundsOutResponse = new SanctionGetStatusResponse();</span>
		try {

<span class="nc" id="L732">			fundsOutResponse.setSanctionId(response.getClientId());</span>
<span class="nc" id="L733">			fundsOutResponse.setResultsCount(response.getResultsCount());</span>
<span class="nc" id="L734">			fundsOutResponse.setPendingCount(response.getPendingCount());</span>
<span class="nc" id="L735">			fundsOutResponse.setStatusDescription(response.getMessage());</span>
<span class="nc bnc" id="L736" title="All 4 branches missed.">			if (null != alwaysPass &amp;&amp; alwaysPass) {</span>
<span class="nc" id="L737">				fundsOutResponse.setStatus(Constants.PASS);</span>
<span class="nc bnc" id="L738" title="All 2 branches missed.">			} else if ((SLResultTypeEnum.ERROR)==response.getStatus()) {</span>
<span class="nc" id="L739">				fundsOutResponse.setStatus(Constants.SERVICE_FAILURE);</span>
			} else {
<span class="nc" id="L741">				fundsOutResponse.setStatus(response.getStatus().toString());</span>
			}
<span class="nc" id="L743">			ObjectMapper mapper = new ObjectMapper();</span>
<span class="nc" id="L744">			fundsOutResponse.setProviderResponse(mapper.writeValueAsString(response));</span>
<span class="nc" id="L745">			fundsOutResponse.setId(fundsOutRequest.getId());</span>
<span class="nc" id="L746">			fundsOutResponse.setApplicationId(fundsOutRequest.getApplicationId());</span>
<span class="nc" id="L747">			setOfacListServiceStatus(fundsOutResponse);</span>
<span class="nc" id="L748">			setWorldCheckServiceStatus(fundsOutResponse);</span>
<span class="nc" id="L749">		} catch (Exception e) {</span>
<span class="nc" id="L750">			throw new SanctionException(SanctionErrors.ERROR_WHILE_TRANSFORMATION_RESPONSE, e);</span>
<span class="nc" id="L751">		}</span>
<span class="nc" id="L752">		return fundsOutResponse;</span>
	}

	/**
	 * Set WorldCheck status as per ProviderStatus.
	 *
	 * @param fundsOutResponse
	 *            the new world check service status
	 */
	private void setWorldCheckServiceStatus(SanctionGetStatusResponse fundsOutResponse) {
<span class="nc bnc" id="L762" title="All 2 branches missed.">		if (!Constants.NO_MATCH_FOUND.equalsIgnoreCase(fundsOutResponse.getWorldCheck())</span>
<span class="nc bnc" id="L763" title="All 2 branches missed.">				|| !Constants.MATCH_FOUND.equalsIgnoreCase(fundsOutResponse.getWorldCheck())) {</span>
<span class="nc" id="L764">			fundsOutResponse.setWorldCheck(getProviderStatus(fundsOutResponse));</span>
		}
<span class="nc" id="L766">	}</span>

	/**
	 * Set OfacList status as per ProviderStatus.
	 *
	 * @param fundsOutResponse
	 *            the new ofac list service status
	 */
	private void setOfacListServiceStatus(SanctionGetStatusResponse fundsOutResponse) {
<span class="nc bnc" id="L775" title="All 2 branches missed.">		if (!Constants.NO_MATCH_FOUND.equalsIgnoreCase(fundsOutResponse.getOfacList())</span>
<span class="nc bnc" id="L776" title="All 2 branches missed.">				|| !Constants.MATCH_FOUND.equalsIgnoreCase(fundsOutResponse.getOfacList())) {</span>
<span class="nc" id="L777">			fundsOutResponse.setOfacList(getProviderStatus(fundsOutResponse));</span>
		}
<span class="nc" id="L779">	}</span>

	/**
	 * Check status.
	 *
	 * @param fundsOutResponse
	 *            the funds out response
	 * @return true, if successful
	 */
	private boolean checkStatus(SanctionGetStatusResponse fundsOutResponse) {
<span class="nc bnc" id="L789" title="All 2 branches missed.">		return (Constants.NOT_PERFORMED.equalsIgnoreCase(fundsOutResponse.getStatus())</span>
<span class="nc bnc" id="L790" title="All 2 branches missed.">				|| Constants.SERVICE_FAILURE.equalsIgnoreCase(fundsOutResponse.getStatus())</span>
<span class="nc bnc" id="L791" title="All 2 branches missed.">				|| Constants.NOT_REQUIRED.equalsIgnoreCase(fundsOutResponse.getStatus()));</span>
	}

	/**
	 * Set status for OfacList and Worldcheck 1.If SanctionStatus is Fail or
	 * Pending then set Status for OfacList and WorldCheck to MATCH_FOUND 2.If
	 * SanctionStatus is NOT_PERFORMED or SERVICE_FAILURE or NOT_REQUIRED then
	 * set Status for OfacList and WorldCheck to NOT_AVAILABLE 3.If If
	 * SanctionStatus is PASS then set Status for OfacList and WorldCheck to
	 * NO_MATCH_FOUND - Saylee
	 *
	 * @param fundsOutResponse
	 *            the funds out response
	 * @return the provider status
	 */
	private String getProviderStatus(SanctionGetStatusResponse fundsOutResponse) {

<span class="nc bnc" id="L808" title="All 4 branches missed.">		if (!Constants.PASS.equalsIgnoreCase(fundsOutResponse.getStatus()) &amp;&amp; !checkStatus(fundsOutResponse)) {</span>
<span class="nc" id="L809">			return Constants.MATCH_FOUND;</span>
<span class="nc bnc" id="L810" title="All 2 branches missed.">		} else if (checkStatus(fundsOutResponse)) {</span>
<span class="nc" id="L811">			return Constants.NOT_AVAILABLE;</span>
<span class="nc bnc" id="L812" title="All 2 branches missed.">		} else if (Constants.PASS.equalsIgnoreCase(fundsOutResponse.getStatus())) {</span>
<span class="nc" id="L813">			return Constants.NO_MATCH_FOUND;</span>
		}
<span class="nc" id="L815">		return Constants.NOT_AVAILABLE;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>