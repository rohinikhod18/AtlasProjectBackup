<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FraudPredictTransformer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">fraugster-service</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.fraugster.fraugsterport</a> &gt; <span class="el_source">FraudPredictTransformer.java</span></div><h1>FraudPredictTransformer.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.fraugster.fraugsterport;

import java.util.regex.Pattern;

import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.fundsin.response.FraudPredictFundsInResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.fundsout.response.FraudPredictFundsOutResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.request.ProviderOnUpdateSignupRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.request.ProviderPaymentInRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.request.ProviderPaymentOutRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.request.ProviderSignUpRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraudpredict.signup.response.FraudPredictSignupResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterOnUpdateContactRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterOnUpdateContactResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterPaymentsInContactRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterPaymentsInContactResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterPaymentsInRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterPaymentsOutContactRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterPaymentsOutContactResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterPaymentsOutRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterProfileBaseRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterSignupContactRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterSignupContactResponse;
import com.currenciesdirect.gtg.compliance.commons.util.JsonConverterUtil;
import com.currenciesdirect.gtg.compliance.fraugster.exception.FraugsterErrors;
import com.currenciesdirect.gtg.compliance.fraugster.exception.FraugsterException;
import com.currenciesdirect.gtg.compliance.fraugster.util.ObjectUtils;

public class FraudPredictTransformer {

	/** The Constant LOG. */
<span class="fc" id="L31">	private static final org.slf4j.Logger LOG = org.slf4j.LoggerFactory.getLogger(FraudPredictTransformer.class);</span>

	/** The fraud Predict transformer. */
<span class="fc" id="L34">	private static FraudPredictTransformer fraudPredictTransformer = null;</span>
	
<span class="fc" id="L36">	private static final Pattern PATTERN = Pattern.compile(</span>
	        &quot;^(([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.){3}([01]?\\d\\d?|2[0-4]\\d|25[0-5])$&quot;);
	
	private static final String BADREQUEST = &quot;BAD_REQUEST&quot;;
	
	private static final String NOTPERFORMED = &quot;NOT_PERFORMED&quot;;

	/**
	 * Instantiates a new fraud predict transformer.
	 */
	private FraudPredictTransformer() {

	}

	public static FraudPredictTransformer getInstance() {
<span class="nc bnc" id="L51" title="All 2 branches missed.">		if (fraudPredictTransformer == null) {</span>
<span class="nc" id="L52">			fraudPredictTransformer = new FraudPredictTransformer();</span>
		}
<span class="nc" id="L54">		return fraudPredictTransformer;</span>
	}

	/**
	 * @param request
	 * @return signupRequest
	 * @throws FraugsterException
	 */
	public ProviderSignUpRequest transformFraudPredictSignupRequest(FraugsterSignupContactRequest request)
			throws FraugsterException {

<span class="nc" id="L65">		LOG.debug(&quot;Fraud predict transform Signup Request : STARTED &quot;);</span>
<span class="nc" id="L66">		ProviderSignUpRequest signupRequest = new ProviderSignUpRequest();</span>

		try {

<span class="nc" id="L70">			signupRequest.setEmailAddress(request.getEmail());</span>
<span class="nc" id="L71">			transformDeviceInfoAndProviderBaseRequest(request, signupRequest);</span>

<span class="nc" id="L73">			signupRequest.setJobTitle(request.getJobTitle());</span>
<span class="nc" id="L74">			signupRequest.setNoOfContacts(request.getAccountContactNum());</span>
<span class="nc" id="L75">			signupRequest.setRegModeY(request.getRegMode());</span>
<span class="nc" id="L76">			signupRequest.setOrgCode(request.getOrganizationCode());</span>
<span class="nc" id="L77">			signupRequest.setCustType(request.getCustomerType());</span>

<span class="nc" id="L79">			signupRequest = ObjectUtils.replaceEmptyWithNull(signupRequest, ProviderSignUpRequest.class);</span>
<span class="nc bnc" id="L80" title="All 4 branches missed.">			if(null != signupRequest.getEmailAddress() &amp;&amp; signupRequest.getEmailAddress().trim().isEmpty()) {</span>
<span class="nc" id="L81">					signupRequest.setEmailAddress(null);</span>
			}

<span class="nc" id="L84">			String jsonSignupProviderRequest = JsonConverterUtil.convertToJsonWithoutNull(signupRequest);</span>
<span class="nc" id="L85">			LOG.warn(&quot;\n -------Signup fraudpredict Request Start -------- \n  {}&quot;, jsonSignupProviderRequest);</span>
<span class="nc" id="L86">			LOG.warn(&quot; \n -----------Signup fraudpredict Request End ---------&quot;);</span>

<span class="nc" id="L88">		} catch (Exception e) {</span>
<span class="nc" id="L89">			LOG.error(&quot;Error in  transformSignupRequest() &quot;, e);</span>
<span class="nc" id="L90">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_REQUEST_TRANSFORMATION);</span>
<span class="nc" id="L91">		}</span>
<span class="nc" id="L92">		LOG.debug(&quot;Fraud Predict : transform Signup Request : ENDED {}&quot;, signupRequest);</span>

<span class="nc" id="L94">		return signupRequest;</span>
	}

	/**
	 * @param request
	 * @param providerRequest
	 */
	private void transformDeviceInfoAndProviderBaseRequest(FraugsterProfileBaseRequest request,
			ProviderSignUpRequest providerRequest) {

<span class="nc" id="L104">		providerRequest.setEventType(request.getEventType());</span>
<span class="nc" id="L105">		providerRequest.setCustomerNo(request.getCustID());</span>
<span class="nc" id="L106">		providerRequest.setScreenResolution(request.getBrowserScreenResolution());</span>
<span class="nc" id="L107">		providerRequest.setBrowserType(request.getBrowserName());</span>
<span class="nc" id="L108">		providerRequest.setBrowserVersion(request.getBrowserMajorVersion());</span>
<span class="nc" id="L109">	    providerRequest.setBillAdLine1(request.getBillingAddress());</span>
<span class="nc" id="L110">		providerRequest.setDeviceType(request.getDeviceType());</span>
<span class="nc" id="L111">		providerRequest.setDeviceName(request.getDeviceName());</span>
<span class="nc" id="L112">		providerRequest.setDeviceManufacturer(request.getDeviceManufacturer());</span>
<span class="nc" id="L113">		providerRequest.setDeviceOsType(request.getOsName());</span>
<span class="nc" id="L114">		providerRequest.setBrowserLang(request.getBrowserLanguage());</span>
<span class="nc" id="L115">		providerRequest.setBrowserOnline(request.getBrowserOnline());</span>
<span class="nc" id="L116">		providerRequest.setAdCampaign(request.getAdCampaign());</span>
<span class="nc" id="L117">		providerRequest.setAddressType(request.getAddressType());</span>
<span class="nc" id="L118">		providerRequest.setAffiliateName(request.getAffiliateName());</span>
<span class="nc" id="L119">		providerRequest.setAza(request.getAza());</span>
<span class="nc" id="L120">		providerRequest.setBranch(request.getBranch());</span>
<span class="nc" id="L121">		providerRequest.setChannel(request.getChannel());</span>
<span class="nc" id="L122">		providerRequest.setCountryOfResidence(request.getCountryOfResidenceCode());</span>
<span class="nc" id="L123">		providerRequest.setOpCountry(request.getCountriesOfOperation());</span>
<span class="nc" id="L124">		providerRequest.setDeviceName(request.getDeviceName());</span>
<span class="nc" id="L125">		providerRequest.setReferralText(request.getReferralText());</span>
<span class="nc" id="L126">		providerRequest.setSearchEngine(request.getSearchEngine());</span>
<span class="nc" id="L127">		providerRequest.setTitle(request.getTitle());</span>
<span class="nc" id="L128">		providerRequest.setTurnover(request.getTurnover());</span>
<span class="nc" id="L129">		providerRequest.setTxnValue(request.getTxnValueRange());</span>
<span class="nc" id="L130">		providerRequest.setKeywords(request.getKeywords());</span>
<span class="nc" id="L131">		providerRequest.setOnQueue(request.getOnQueue());</span>
<span class="nc" id="L132">		providerRequest.setPhoneHome(request.getPhoneHome());</span>
<span class="nc" id="L133">		providerRequest.setPhoneWork(request.getPhoneWork());</span>
<span class="nc" id="L134">		providerRequest.setRegMode(request.getRegMode());</span>
<span class="nc" id="L135">		providerRequest.setRegionSuburb(request.getRegionSuburb());</span>
<span class="nc" id="L136">		providerRequest.setResidentialStatus(request.getResidentialStatus());</span>
<span class="nc" id="L137">		providerRequest.setSource(request.getSource());</span>
<span class="nc" id="L138">		providerRequest.setSubSource(request.getSubSource());</span>
<span class="nc" id="L139">		providerRequest.setEidStatus(request.getEidStatus());</span>
<span class="nc" id="L140">		providerRequest.setSanctionStatus(request.getSanctionStatus());</span>
<span class="nc" id="L141">		ObjectUtils.setNullFieldsToDefault(providerRequest);</span>
		
<span class="nc bnc" id="L143" title="All 4 branches missed.">		if(null !=(request.getiPAddress()) &amp;&amp; !(request.getiPAddress()).isEmpty()) {</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">			  if(validate(request.getiPAddress())) {</span>
<span class="nc" id="L145">			     providerRequest.setIpAddress(request.getiPAddress());</span>
			  }
			 else {
<span class="nc" id="L148">			       providerRequest.setIpAddress(null);</span>
		        }
		  }
		else {
<span class="nc" id="L152">			providerRequest.setIpAddress(null);</span>
		}
<span class="nc" id="L154">   }</span>

	/**
	 * @param response
	 * @return fraudDetectionResponse
	 * @throws FraugsterException
	 */
	public FraugsterSignupContactResponse transformFraudPredictSignupResponse(FraudPredictSignupResponse response)
			throws FraugsterException {

<span class="fc" id="L164">		LOG.debug(&quot;Fraud Predict transformSignupResponse : STARTED &quot;);</span>
<span class="fc" id="L165">		FraugsterSignupContactResponse fraudDetectionResponse = new FraugsterSignupContactResponse();</span>
		try {
<span class="fc" id="L167">			transformBaseResponse(response, fraudDetectionResponse);</span>
<span class="nc" id="L168">		} catch (Exception e) {</span>
<span class="nc" id="L169">			LOG.warn(&quot;Error in  transformSignupResponse() &quot;, e);</span>
<span class="nc" id="L170">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_RESPONSE_TRANSFORMATION);</span>
<span class="fc" id="L171">		}</span>
<span class="fc" id="L172">		LOG.debug(&quot;Fraud Predict transformSignupResponse : ENDED &quot;);</span>

<span class="fc" id="L174">		return fraudDetectionResponse;</span>
	}

	/**
	 * @param response
	 * @param fraudDetectionResponse
	 */
	private void transformBaseResponse(FraudPredictSignupResponse response,
			FraugsterSignupContactResponse fraudDetectionResponse) {
		
<span class="pc bpc" id="L184" title="2 of 4 branches missed.">		if(null!=response.getStatus() &amp;&amp; response.getStatus().equals(BADREQUEST)) {</span>
<span class="nc" id="L185">			fraudDetectionResponse.setFrgTransId(NOTPERFORMED);</span>
		}
		else {
<span class="pc bpc" id="L188" title="1 of 2 branches missed.">			if(null!=response.getScore()) {</span>
<span class="nc" id="L189">				fraudDetectionResponse.setScore((response.getScore()).toString());</span>
				}
<span class="fc" id="L191">			fraudDetectionResponse.setPercentageFromThreshold((response.getPercentageFromThreshold()).toString());</span>
<span class="fc" id="L192">			fraudDetectionResponse.setFrgTransId(response.getFrgTransId());</span>
		}
<span class="fc" id="L194">		fraudDetectionResponse.setFraugsterApproved(Float.toString(response.getFraudpredictApproved()));</span>
<span class="fc" id="L195">		fraudDetectionResponse.setMessage(response.getMessage());</span>
<span class="fc" id="L196">		fraudDetectionResponse.setDecisionDrivers(response.getDecisionDrivers());</span>
<span class="fc" id="L197">		fraudDetectionResponse.setError(response.getErrors());</span>
<span class="fc" id="L198">		fraudDetectionResponse.setStatus(response.getStatus());</span>
<span class="fc" id="L199">	}</span>

	/**
	 * @param request
	 * @return updateRequest
	 * @throws FraugsterException
	 */
	public ProviderOnUpdateSignupRequest transformOnUpdateRequest(FraugsterOnUpdateContactRequest request)
			throws FraugsterException {

<span class="nc" id="L209">		LOG.debug(&quot;Fraud predict transform Update Request : STARTED &quot;);</span>
<span class="nc" id="L210">		ProviderOnUpdateSignupRequest updateRequest = new ProviderOnUpdateSignupRequest();</span>

		try {
<span class="nc" id="L213">			updateRequest.setEmailAddress(request.getEmail());</span>
<span class="nc" id="L214">			transformDeviceInfoAndProviderBaseRequest(request, updateRequest);</span>
<span class="nc" id="L215">			updateRequest = ObjectUtils.replaceEmptyWithNull(updateRequest, ProviderOnUpdateSignupRequest.class);</span>
<span class="nc bnc" id="L216" title="All 4 branches missed.">			if(null != updateRequest.getEmailAddress() &amp;&amp; updateRequest.getEmailAddress().trim().isEmpty()) {</span>
<span class="nc" id="L217">					updateRequest.setEmailAddress(null);</span>
			}

<span class="nc" id="L220">		} catch (Exception e) {</span>
<span class="nc" id="L221">			LOG.error(&quot;Error in  transformUpdateRequest() &quot;, e);</span>
<span class="nc" id="L222">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_REQUEST_TRANSFORMATION);</span>
<span class="nc" id="L223">		}</span>
<span class="nc" id="L224">		LOG.debug(&quot;Fraud Predict : transform Update Request : ENDED {}&quot;,updateRequest);</span>

<span class="nc" id="L226">		return updateRequest;</span>
	}

	/**
	 * @param response
	 * @return fraudDetectionResponse
	 * @throws FraugsterException
	 */
	public FraugsterOnUpdateContactResponse transformUpdateResponse(FraudPredictSignupResponse response)
			throws FraugsterException {

<span class="fc" id="L237">		LOG.debug(&quot;Fraud Predict transform Update Response : STARTED &quot;);</span>
<span class="fc" id="L238">		FraugsterOnUpdateContactResponse fraudDetectionResponse = new FraugsterOnUpdateContactResponse();</span>
		try {
			
<span class="pc bpc" id="L241" title="2 of 4 branches missed.">			if(null!=response.getStatus() &amp;&amp; response.getStatus().equals(BADREQUEST)) {</span>
<span class="nc" id="L242">				fraudDetectionResponse.setFrgTransId(NOTPERFORMED);</span>
			}
			else {
				
<span class="pc bpc" id="L246" title="1 of 2 branches missed.">				if(null!=response.getScore()) {</span>
<span class="nc" id="L247">					fraudDetectionResponse.setScore((response.getScore()).toString());</span>
					}
<span class="fc" id="L249">				fraudDetectionResponse.setPercentageFromThreshold((response.getPercentageFromThreshold()).toString());</span>
<span class="fc" id="L250">				fraudDetectionResponse.setFrgTransId(response.getFrgTransId());</span>
			}
<span class="fc" id="L252">			fraudDetectionResponse.setFraugsterApproved(Float.toString(response.getFraudpredictApproved()));</span>
<span class="fc" id="L253">			fraudDetectionResponse.setMessage(response.getMessage());</span>
<span class="fc" id="L254">			fraudDetectionResponse.setDecisionDrivers(response.getDecisionDrivers());</span>
<span class="fc" id="L255">			fraudDetectionResponse.setError(response.getErrors());</span>
<span class="fc" id="L256">			fraudDetectionResponse.setStatus(response.getStatus());</span>

<span class="nc" id="L258">		} catch (Exception e) {</span>
<span class="nc" id="L259">			LOG.warn(&quot;Error in  transformUpdateResponse() &quot;, e);</span>
<span class="nc" id="L260">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_RESPONSE_TRANSFORMATION);</span>
<span class="fc" id="L261">		}</span>
<span class="fc" id="L262">		LOG.debug(&quot;Fraud Predict transformUpdateResponse : ENDED &quot;);</span>

<span class="fc" id="L264">		return fraudDetectionResponse;</span>
	}

	/**
	 * @param request
	 * @param contact
	 * @return paymentsInProviderRequest
	 * @throws FraugsterException
	 */
	public ProviderPaymentInRequest transformPaymentsInRequest(FraugsterPaymentsInRequest request,
			FraugsterPaymentsInContactRequest contact) throws FraugsterException {
<span class="nc" id="L275">		LOG.debug(&quot;Fraud Predict transform PaymentsIn Request : STARTED &quot;);</span>
<span class="nc" id="L276">		ProviderPaymentInRequest paymentsInProviderRequest = new ProviderPaymentInRequest();</span>
		try {

<span class="nc" id="L279">			paymentsInProviderRequest.setBillAdLine1(contact.getAddressOnCard());</span>
<span class="nc" id="L280">			paymentsInProviderRequest.setBillAdZip(contact.getCustomerAddressOrPostcode());</span>
<span class="nc" id="L281">			paymentsInProviderRequest.setContractNumber(contact.getContractNumber());</span>
<span class="nc" id="L282">			paymentsInProviderRequest.setCountryOfFund(contact.getCountryOfFund());</span>
<span class="nc" id="L283">			paymentsInProviderRequest.setCustomerNo(contact.getCustomerAccountNumber());</span>
<span class="nc" id="L284">			paymentsInProviderRequest.setCustType(request.getCustType());</span>
<span class="nc" id="L285">			paymentsInProviderRequest.setOrgCode(request.getOrgCode());</span>
<span class="nc" id="L286">			paymentsInProviderRequest.setRiskScore(contact.getRiskScore());</span>
<span class="nc" id="L287">			paymentsInProviderRequest.setSellingAmountGbpValue(contact.getSellingAmountGbpValue());</span>
<span class="nc" id="L288">			paymentsInProviderRequest.setSourceApplication(request.getSourceApplication());</span>
<span class="nc" id="L289">			paymentsInProviderRequest.setThirdPartyPayment(contact.getThirdPartyPayment());</span>
<span class="nc" id="L290">			paymentsInProviderRequest.setTransactionCurrency(contact.getCurrency());</span>
<span class="nc" id="L291">			paymentsInProviderRequest.setTurnover(contact.getTurnover());</span>
<span class="nc" id="L292">			paymentsInProviderRequest.setBrowserLang(contact.getBrowserLanguage());</span>
<span class="nc" id="L293">			paymentsInProviderRequest.setBrowserOnline(contact.getBrowserOnline());</span>
<span class="nc" id="L294">			paymentsInProviderRequest.setPaymentMethod(contact.getPaymentType());</span>
<span class="nc" id="L295">			paymentsInProviderRequest.setScreenResolution(contact.getBrowserScreenResolution());</span>
<span class="nc" id="L296">			paymentsInProviderRequest.setBrowserType(contact.getBrowserType());</span>
<span class="nc" id="L297">			paymentsInProviderRequest.setBrowserVersion(contact.getBrowserMajorVersion());</span>
<span class="nc" id="L298">			paymentsInProviderRequest.setDeviceManufacturer(contact.getDeviceManufacturer());</span>
<span class="nc" id="L299">			paymentsInProviderRequest.setDeviceName(contact.getDeviceName());</span>
<span class="nc" id="L300">			paymentsInProviderRequest.setDeviceOsType(contact.getOsName());</span>
<span class="nc" id="L301">			paymentsInProviderRequest.setDeviceType(contact.getDeviceType());</span>
<span class="nc" id="L302">			paymentsInProviderRequest = ObjectUtils.replaceEmptyWithNull(paymentsInProviderRequest, ProviderPaymentInRequest.class);</span>
<span class="nc" id="L303">			String jsonPayInProviderRequest = JsonConverterUtil.convertToJsonWithoutNull(paymentsInProviderRequest);</span>
<span class="nc" id="L304">			LOG.warn(&quot;\n ------- Payments in fraudpredict Request Start -------- \n  {}&quot;, jsonPayInProviderRequest);</span>
<span class="nc" id="L305">			LOG.warn(&quot; \n -----------Payments  fraudpredict Request End ---------&quot;);</span>

<span class="nc" id="L307">		} catch (Exception e) {</span>
<span class="nc" id="L308">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_REQUEST_TRANSFORMATION);</span>
<span class="nc" id="L309">		}</span>
<span class="nc" id="L310">		LOG.debug(&quot;Fraugster transformPaymentsInRequest : ENDED &quot;);</span>
<span class="nc" id="L311">		return paymentsInProviderRequest;</span>

	}

	/**
	 * @param response
	 * @return fraudDetectionResponse
	 * @throws FraugsterException
	 */
	public FraugsterPaymentsInContactResponse transformPaymentsInResponse(FraudPredictFundsInResponse response)
			throws FraugsterException {

<span class="nc" id="L323">		LOG.debug(&quot;Fraud Predict transform PaymentsIn Response : STARTED &quot;);</span>
<span class="nc" id="L324">		FraugsterPaymentsInContactResponse fraudDetectionResponse = new FraugsterPaymentsInContactResponse();</span>
		try {

<span class="nc bnc" id="L327" title="All 4 branches missed.">			if(null!=response.getStatus() &amp;&amp; response.getStatus().equals(BADREQUEST)) {</span>
<span class="nc" id="L328">				fraudDetectionResponse.setFrgTransId(NOTPERFORMED);</span>
			}
			else {
<span class="nc bnc" id="L331" title="All 2 branches missed.">				if(null!=response.getScore()) {</span>
<span class="nc" id="L332">					fraudDetectionResponse.setScore((response.getScore()).toString());</span>
					}
<span class="nc" id="L334">				fraudDetectionResponse.setPercentageFromThreshold((response.getPercentageFromThreshold()).toString());</span>
<span class="nc" id="L335">				fraudDetectionResponse.setFrgTransId(response.getFrgTransId());</span>
			}
<span class="nc" id="L337">			fraudDetectionResponse.setFraugsterApproved(Float.toString(response.getFraudPredictApproved()));</span>
<span class="nc" id="L338">			fraudDetectionResponse.setMessage(response.getMessage());</span>
<span class="nc" id="L339">			fraudDetectionResponse.setDecisionDrivers(response.getDecisionDrivers());</span>
<span class="nc" id="L340">			fraudDetectionResponse.setError(response.getError());</span>
<span class="nc" id="L341">			fraudDetectionResponse.setStatus(response.getStatus());</span>

<span class="nc" id="L343">		} catch (Exception e) {</span>
<span class="nc" id="L344">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_RESPONSE_TRANSFORMATION);</span>
<span class="nc" id="L345">		}</span>
<span class="nc" id="L346">		LOG.debug(&quot;Fraud Predict transformPaymentsInResponse : ENDED &quot;);</span>

<span class="nc" id="L348">		return fraudDetectionResponse;</span>
	}

	/**
	 * @param request
	 * @param contact
	 * @return paymentsOutProviderRequest
	 * @throws FraugsterException
	 */
	public ProviderPaymentOutRequest transformPaymentsOutRequest(FraugsterPaymentsOutRequest request,
			FraugsterPaymentsOutContactRequest contact) throws FraugsterException {

<span class="nc" id="L360">		LOG.debug(&quot;Fraud Predict transformPaymentsOutRequest : STARTED &quot;);</span>
<span class="nc" id="L361">		ProviderPaymentOutRequest paymentsOutProviderRequest = new ProviderPaymentOutRequest();</span>

		try {
<span class="nc" id="L364">			paymentsOutProviderRequest.setBeneficiaryBankAddress(contact.getBeneficiaryBankAddress());</span>
<span class="nc" id="L365">			paymentsOutProviderRequest.setBeneficiaryBankName(contact.getBeneficiaryBankName());</span>
<span class="nc" id="L366">			paymentsOutProviderRequest.setBeneficiaryCountry(contact.getBeneficiaryCountryCode());</span>
<span class="nc" id="L367">			paymentsOutProviderRequest.setBeneficiaryPhone(contact.getBeneficiaryPhone());</span>
<span class="nc" id="L368">			paymentsOutProviderRequest.setBeneficiaryType(contact.getBeneficiaryType());</span>
<span class="nc" id="L369">			paymentsOutProviderRequest.setBrowserLang(contact.getBrowserLanguage());</span>
<span class="nc" id="L370">			paymentsOutProviderRequest.setBrowserOnline(contact.getBrowserOnline());</span>
<span class="nc" id="L371">			paymentsOutProviderRequest.setBeneficiaryCurrencyCode(contact.getBeneficiaryCurrencyCode());</span>
<span class="nc" id="L372">			paymentsOutProviderRequest.setBrowserType(contact.getBrowserType());</span>
<span class="nc" id="L373">			paymentsOutProviderRequest.setBrowserVersion(contact.getBrowserMajorVersion());</span>
<span class="nc" id="L374">			paymentsOutProviderRequest.setBuyCurrency(contact.getBeneficiaryCurrency());</span>
<span class="nc" id="L375">			paymentsOutProviderRequest.setBuyingAmount(contact.getBuyingAmount());</span>
<span class="nc" id="L376">			paymentsOutProviderRequest.setContractNumber(contact.getContracrNumber());</span>
<span class="nc" id="L377">			paymentsOutProviderRequest.setCustomerNo(contact.getCustomerNo());</span>
<span class="nc" id="L378">			paymentsOutProviderRequest.setCustType(request.getCustType());</span>
<span class="nc" id="L379">			paymentsOutProviderRequest.setDeviceManufacturer(contact.getDeviceManufacturer());</span>
<span class="nc" id="L380">			paymentsOutProviderRequest.setDeviceName(contact.getDeviceName());</span>
<span class="nc" id="L381">			paymentsOutProviderRequest.setDeviceOsType(contact.getOsName());</span>
<span class="nc" id="L382">			paymentsOutProviderRequest.setDeviceType(contact.getDeviceType());</span>
<span class="nc" id="L383">			paymentsOutProviderRequest.setOrgCode(request.getOrgCode());</span>
<span class="nc" id="L384">			paymentsOutProviderRequest.setPurposeOfTrade(contact.getPurposeOfTrade());</span>
<span class="nc" id="L385">			paymentsOutProviderRequest.setScreenResolution(contact.getBrowserScreenResolution());</span>
<span class="nc" id="L386">			paymentsOutProviderRequest.setSellingCurrency(contact.getSellingCurrency());</span>
<span class="nc" id="L387">			paymentsOutProviderRequest.setSourceApplication(request.getSourceApplication());</span>
			
<span class="nc bnc" id="L389" title="All 4 branches missed.">			if(null !=contact.getBeneficiaryEmail() &amp;&amp; !(contact.getBeneficiaryEmail()).isEmpty())</span>
<span class="nc" id="L390">			    paymentsOutProviderRequest.setBeneficiaryEmail(contact.getBeneficiaryEmail());</span>
			else
<span class="nc" id="L392">				paymentsOutProviderRequest.setBeneficiaryEmail(null);</span>
<span class="nc" id="L393">			paymentsOutProviderRequest = ObjectUtils.replaceEmptyWithNull(paymentsOutProviderRequest, ProviderPaymentOutRequest.class);</span>
<span class="nc" id="L394">			String jsonPayOutProviderRequest = JsonConverterUtil.convertToJsonWithoutNull(paymentsOutProviderRequest);</span>
<span class="nc" id="L395">			LOG.warn(&quot;\n ------- Payments out fraudpredict Request Start -------- \n  {}&quot;, jsonPayOutProviderRequest);</span>
<span class="nc" id="L396">			LOG.warn(&quot; \n -----------Payments out fraudpredict Request End ---------&quot;);</span>

<span class="nc" id="L398">		} catch (Exception e) {</span>
<span class="nc" id="L399">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_REQUEST_TRANSFORMATION);</span>
<span class="nc" id="L400">		}</span>
<span class="nc" id="L401">		LOG.debug(&quot;Fraud Predict transformPaymentsOutRequest : ENDED &quot;);</span>

<span class="nc" id="L403">		return paymentsOutProviderRequest;</span>
	}

	/**
	 * @param response
	 * @return fraudDetectionResponse
	 * @throws FraugsterException
	 */
	public FraugsterPaymentsOutContactResponse transformPaymentsOutResponse(FraudPredictFundsOutResponse response)
			throws FraugsterException {

<span class="nc" id="L414">		LOG.debug(&quot;Fraud Predict transformPaymentsOutResponse : STARTED &quot;);</span>
<span class="nc" id="L415">		FraugsterPaymentsOutContactResponse fraudDetectionResponse = new FraugsterPaymentsOutContactResponse();</span>
		try {
            
<span class="nc bnc" id="L418" title="All 4 branches missed.">			if(null!=response.getStatus() &amp;&amp; response.getStatus().equals(BADREQUEST)) {</span>
<span class="nc" id="L419">				fraudDetectionResponse.setFrgTransId(NOTPERFORMED);</span>
			}
			else {
<span class="nc bnc" id="L422" title="All 2 branches missed.">				if(null!=response.getScore()) {</span>
<span class="nc" id="L423">					fraudDetectionResponse.setScore((response.getScore()).toString());</span>
					}
<span class="nc" id="L425">				fraudDetectionResponse.setPercentageFromThreshold((response.getPercentageFromThreshold()).toString());</span>
<span class="nc" id="L426">				fraudDetectionResponse.setFrgTransId(response.getFrgTransId());</span>
			}
<span class="nc" id="L428">			fraudDetectionResponse.setFraugsterApproved(Float.toString(response.getFraudPredictApproved()));</span>
<span class="nc" id="L429">			fraudDetectionResponse.setMessage(response.getMessage());</span>
<span class="nc" id="L430">			fraudDetectionResponse.setDecisionDrivers(response.getDecisionDrivers());</span>
<span class="nc" id="L431">			fraudDetectionResponse.setError(response.getError());</span>
<span class="nc" id="L432">			fraudDetectionResponse.setStatus(response.getStatus());</span>
<span class="nc" id="L433">		} catch (Exception e) {</span>
<span class="nc" id="L434">			LOG.error(&quot;Error in  transformPaymentsOutResponse() &quot;, e);</span>
<span class="nc" id="L435">			throw new FraugsterException(FraugsterErrors.ERROR_WHILE_RESPONSE_TRANSFORMATION);</span>
<span class="nc" id="L436">		}</span>
<span class="nc" id="L437">		LOG.debug(&quot;Fraud Predict transformPaymentsOutResponse : ENDED &quot;);</span>

<span class="nc" id="L439">		return fraudDetectionResponse;</span>
	}
	
	//method is added to apply validation on IP Address
	private boolean validate(final String ip) {
<span class="nc" id="L444">	    return PATTERN.matcher(ip).matches();</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>