<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MessageValidator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-service</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.compliancesrv.core.validator.fundsin</a> &gt; <span class="el_source">MessageValidator.java</span></div><h1>MessageValidator.java</h1><pre class="source lang-java linenums">/**
 * 
 */
package com.currenciesdirect.gtg.compliance.compliancesrv.core.validator.fundsin;

import java.util.List;
import java.util.Map;
import java.util.UUID;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.messaging.Message;
import org.springframework.messaging.handler.annotation.Header;

import com.currenciesdirect.gtg.compliance.commons.domain.DeviceInfo;
import com.currenciesdirect.gtg.compliance.commons.domain.activity.PaymentMethodEnum;
import com.currenciesdirect.gtg.compliance.commons.domain.base.BaseResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.customchecks.request.FundsInCustomCheckResendRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FraugsterResendResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.fraugster.FundsInFraugsterResendRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fundsin.request.FundsInCreateRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fundsin.request.FundsInDeleteRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.fundsin.request.FundsInTrade;
import com.currenciesdirect.gtg.compliance.commons.domain.fundsin.response.FundsInDeleteResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.internalruleservice.BlacklistResendResponse;
import com.currenciesdirect.gtg.compliance.commons.domain.internalruleservice.FundsInBlacklistResendRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.FundsInSanctionResendRequest;
import com.currenciesdirect.gtg.compliance.commons.domain.sanction.SanctionResendResponse;
import com.currenciesdirect.gtg.compliance.commons.util.DateTimeFormatter;
import com.currenciesdirect.gtg.compliance.commons.util.StringUtils;
import com.currenciesdirect.gtg.compliance.compliancesrv.ComplianceException;
import com.currenciesdirect.gtg.compliance.compliancesrv.InternalProcessingCode;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.OperationEnum;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.ProvideCacheLoader;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.ServiceInterfaceType;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.fundsin.FundsInReasonCode;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.reg.RegistrationEnumValues;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.validator.BaseMessageValidator;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.validator.FieldValidator;
import com.currenciesdirect.gtg.compliance.compliancesrv.domain.customchecks.response.CustomCheckResendResponse;
import com.currenciesdirect.gtg.compliance.compliancesrv.domain.fundsin.response.FundsInCreateResponse;
import com.currenciesdirect.gtg.compliance.compliancesrv.msg.MessageContext;
import com.currenciesdirect.gtg.compliance.compliancesrv.msg.MessageExchange;
import com.currenciesdirect.gtg.compliance.compliancesrv.util.Constants;

/**
 * @author manish
 *
 */
<span class="nc" id="L51">public class MessageValidator extends BaseMessageValidator {</span>
	
	/** The Constant LOGGER. */
<span class="nc" id="L54">	private static final Logger LOGGER = LoggerFactory.getLogger(MessageValidator.class);	</span>
	
	@Value(&quot;#{${supported.paymentin.method}}&quot;)  
	private Map&lt;String, String&gt; mapPaymentList;

	/**
	 * Process.
	 *
	 * @param message
	 *            the message
	 * @param correlationID
	 *            the correlation ID
	 * @return the message
	 */
	@org.springframework.integration.annotation.ServiceActivator
	public Message&lt;MessageContext&gt; process(Message&lt;MessageContext&gt; message, @Header UUID correlationID) {
<span class="nc" id="L70">		FundsInCreateResponse response = new FundsInCreateResponse();</span>
<span class="nc" id="L71">		MessageExchange messageExchange = message.getPayload().getGatewayMessageExchange();</span>
<span class="nc" id="L72">		response.setOsrID(messageExchange.getRequest().getOsrId());</span>
		try {
<span class="nc" id="L74">			ServiceInterfaceType serviceInterfaceType = message.getPayload().getGatewayMessageExchange()</span>
<span class="nc" id="L75">					.getServiceInterface();</span>
<span class="nc" id="L76">			OperationEnum operationEnum = message.getPayload().getGatewayMessageExchange().getOperation();</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">			if (ServiceInterfaceType.FUNDSIN.name().equalsIgnoreCase(serviceInterfaceType.name())</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">					&amp;&amp; OperationEnum.FUNDS_IN.name().equalsIgnoreCase(operationEnum.name())) {</span>

<span class="nc" id="L80">				FundsInCreateRequest fundsInRequest = (FundsInCreateRequest) messageExchange.getRequest();</span>
<span class="nc" id="L81">				response.setTradePaymentID(fundsInRequest.getTrade().getPaymentFundsInId());</span>
<span class="nc" id="L82">				FieldValidator fv = validateCreateReuqest(fundsInRequest);</span>
<span class="nc" id="L83">				createBaseResponse(response, fv, FundsInReasonCode.MISSINGINFO.getReasonCode(),</span>
						Constants.MSG_MISSING_INFO, &quot;PAYMENTIN&quot;);
<span class="nc" id="L85">				messageExchange.setResponse(response);</span>

<span class="nc bnc" id="L87" title="All 4 branches missed.">			} else if (serviceInterfaceType == ServiceInterfaceType.FUNDSIN</span>
					&amp;&amp; operationEnum == OperationEnum.DELETE_OPI) {
<span class="nc" id="L89">				FundsInDeleteRequest fRequest = (FundsInDeleteRequest) messageExchange.getRequest();</span>
<span class="nc" id="L90">				FieldValidator fv = validateDeleteReuqest(fRequest);</span>
<span class="nc" id="L91">				FundsInDeleteResponse deleteResponse = new FundsInDeleteResponse();</span>
<span class="nc" id="L92">				deleteResponse.setOrgCode(fRequest.getOrgCode());</span>
<span class="nc" id="L93">				deleteResponse.setPaymentFundsinId(fRequest.getPaymentFundsInId());</span>
<span class="nc" id="L94">				createBaseResponse(deleteResponse, fv, FundsInReasonCode.MISSINGINFO.getReasonCode(),</span>
						Constants.MSG_MISSING_INFO, &quot;PAYMENTIN&quot;);
<span class="nc" id="L96">				deleteResponse.setOsrID(fRequest.getOsrId());</span>
<span class="nc" id="L97">				messageExchange.setResponse(deleteResponse);</span>

<span class="nc bnc" id="L99" title="All 2 branches missed.">			} else if (ServiceInterfaceType.FUNDSIN.name().equalsIgnoreCase(serviceInterfaceType.name())</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">					&amp;&amp; OperationEnum.CUSTOMCHECK_RESEND.name().equalsIgnoreCase(operationEnum.name())) {</span>
<span class="nc" id="L101">				CustomCheckResendResponse checkResendResponse = new CustomCheckResendResponse();</span>
<span class="nc" id="L102">				FundsInCustomCheckResendRequest fundsInRequest = messageExchange</span>
<span class="nc" id="L103">						.getRequest(FundsInCustomCheckResendRequest.class);</span>
<span class="nc" id="L104">				FieldValidator fv = validateResendRequest(fundsInRequest, ServiceInterfaceType.FUNDSIN);</span>
<span class="nc" id="L105">				createBaseResponse(checkResendResponse, fv, FundsInReasonCode.MISSINGINFO.getReasonCode(),</span>
						Constants.MSG_MISSING_INFO, &quot;&quot;);
<span class="nc" id="L107">				messageExchange.setResponse(checkResendResponse);</span>

<span class="nc bnc" id="L109" title="All 2 branches missed.">			} else if (ServiceInterfaceType.FUNDSIN.name().equalsIgnoreCase(serviceInterfaceType.name())</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">					&amp;&amp; OperationEnum.SANCTION_RESEND.name().equalsIgnoreCase(operationEnum.name())) {</span>
<span class="nc" id="L111">				SanctionResendResponse sanctionResendResponse = new SanctionResendResponse();</span>
<span class="nc" id="L112">				FundsInSanctionResendRequest sanctionResendRequest = messageExchange</span>
<span class="nc" id="L113">						.getRequest(FundsInSanctionResendRequest.class);</span>
<span class="nc" id="L114">				FieldValidator fv = validateReuqest(sanctionResendRequest);</span>
<span class="nc" id="L115">				createBaseResponse(sanctionResendResponse, fv, FundsInReasonCode.MISSINGINFO.getReasonCode(),</span>
						Constants.MSG_MISSING_INFO, &quot;&quot;);
<span class="nc" id="L117">				messageExchange.setResponse(sanctionResendResponse);</span>
			}

<span class="nc" id="L120">		} catch (Exception e) {</span>
<span class="nc" id="L121">			LOGGER.error(REQUEST_IS_NOT_VALID, e);</span>
<span class="nc" id="L122">			response.setDecision(BaseResponse.DECISION.FAIL);</span>
<span class="nc" id="L123">			response.setErrorCode(InternalProcessingCode.INV_REQUEST.toString());</span>
<span class="nc" id="L124">			response.setResponseReason(FundsInReasonCode.MISSINGINFO);</span>
<span class="nc" id="L125">			messageExchange.setResponse(response);</span>
<span class="nc" id="L126">		}</span>
<span class="nc" id="L127">		response.setCorrelationID(correlationID);</span>

<span class="nc" id="L129">		return message;</span>

	}

	/**
	 * Business:-The Funds IN request is validated and mandaotry fields are
	 * present or not is checked. Implementation:- 1)request is received and we
	 * get country code from it by which we get complete name of country. 2)then
	 * customer type is found. 3) mandatory fields are validated whether null or
	 * not by passing fields in isValidObject method 4) paymentTime date is
	 * validated whether null or not and format of date if present is checked by
	 * passing fields in isDateInFormat method 5) Also format of other dates in
	 * request is checked in getOptionalDateFields method 6) Payment Method is
	 * checked in getPaymentMethod method 7) if payment method is SWITCH/DEBIT
	 * then need to check mandatory fields for debit card payment
	 */
	private FieldValidator validateCreateReuqest(FundsInCreateRequest fundsInRequest) {
<span class="nc" id="L146">		ProvideCacheLoader countryCache = ProvideCacheLoader.getInstance();</span>

<span class="nc" id="L148">		fundsInRequest.getTrade()</span>
<span class="nc" id="L149">				.setCustType(RegistrationEnumValues.getInstance().checkCustomerTypes(fundsInRequest.getCustType()));</span>
<span class="nc" id="L150">		FieldValidator fv = new FieldValidator();</span>

<span class="nc" id="L152">		fv.isValidObject(new Object[] { fundsInRequest.getOrgCode(), fundsInRequest.getSourceApplication(),</span>
<span class="nc" id="L153">				fundsInRequest.getTrade().getTradeAccountNumber(), fundsInRequest.getTrade().getTradeContactId(),</span>
<span class="nc" id="L154">				fundsInRequest.getTrade().getCustType(), fundsInRequest.getTrade().getPurposeOfTrade(),</span>
<span class="nc" id="L155">				fundsInRequest.getTrade().getPaymentFundsInId(), fundsInRequest.getTrade().getThirdPartyPayment(),</span>
<span class="nc" id="L156">				fundsInRequest.getTrade().getSellingAmountBaseValue(),</span>
<span class="nc" id="L157">				fundsInRequest.getTrade().getTransactionCurrency(), fundsInRequest.getTrade().getSellingAmount(),</span>
<span class="nc" id="L158">				fundsInRequest.getTrade().getPaymentMethod(), fundsInRequest.getTrade().getCustLegalEntity() },</span>
				new String[] { ORG_CODE, &quot;source_application&quot;, &quot;trade_account_number&quot;, &quot;trade_contact_id&quot;, CUST_TYPE,
						&quot;purpose_of_trade&quot;, &quot;payment_fundsIN_Id&quot;, &quot;third_party_payment&quot;, &quot;selling_amount_base_value&quot;,
						&quot;transaction_currency&quot;, &quot;selling_amount&quot;, &quot;payment_Method&quot;, &quot;customer_legal_entity&quot; });

		try {
<span class="nc bnc" id="L164" title="All 2 branches missed.">			if (!StringUtils.isNullOrTrimEmpty(fundsInRequest.getTrade().getCountryOfFund())</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">					&amp;&amp; null == countryCache.getCountryFullName(fundsInRequest.getTrade().getCountryOfFund())) {</span>
<span class="nc" id="L166">				fv.addError(&quot;Incorrect country code&quot;, fundsInRequest.getTrade().getCountryOfFund());</span>
			}
<span class="nc" id="L168">		} catch (ComplianceException e) {</span>
<span class="nc" id="L169">			LOGGER.error(&quot;Error in Validator&quot;, e);</span>
<span class="nc" id="L170">		}</span>

<span class="nc" id="L172">		fv.isDateInFormat(new String[] { fundsInRequest.getTrade().getPaymentTime() },</span>
				new String[] { Constants.PAYMENTIN_TIME }, Constants.RFC_TIMESTAMP_FORMAT);

<span class="nc" id="L175">		getOptionalDateFields(fv, fundsInRequest);</span>

<span class="nc bnc" id="L177" title="All 2 branches missed.">		if (!fv.isNULL(fundsInRequest.getTrade().getPaymentMethod())</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">				&amp;&amp; !fv.isEmpty(fundsInRequest.getTrade().getPaymentMethod())) {</span>
<span class="nc" id="L179">			getPaymentMethod(fv, fundsInRequest.getTrade());</span>
		}

<span class="nc bnc" id="L182" title="All 2 branches missed.">		if (Constants.PAYMENT_METHOD_DEBIT.equalsIgnoreCase(fundsInRequest.getTrade().getPaymentMethod())) {</span>
<span class="nc" id="L183">			getMandatoryFieldsforDebitCardPayment(fv, fundsInRequest.getTrade());</span>
		}
<span class="nc" id="L185">		return fv;</span>
	}

	/**
	 * Business:-payment method for Funds IN is checked whether in correct
	 * format or not. Implementation:- 1)The received payment method is first
	 * passed to removeSpacesAndmakeLowercase method to remove any spaces in
	 * fields. 2)Returned value is passed to PaymentMethodEnum where equivalent
	 * value is replaced and set in trade class. 3)If value is not found then
	 * error is added in field validator and returned.
	 */
	private FieldValidator getPaymentMethod(FieldValidator fv, FundsInTrade trade) {
<span class="nc" id="L197">		String paymentMethod = removeSpacesAndmakeLowercase(trade.getPaymentMethod());</span>
<span class="nc" id="L198">		trade.setPaymentMethod(getPaymentMethodFromProperty(paymentMethod));</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">		if (fv.isNULL(trade.getPaymentMethod())) {</span>
<span class="nc" id="L200">			fv.addError(Constants.INCORRECT_PAYMENT_METHOD_FORMAT, paymentMethod);</span>
		}
<span class="nc" id="L202">		return fv;</span>
	}
	
	/**
	 * Gets the payment method from property.
	 *
	 * @param status the status
	 * @return the payment method from property
	 */
	//Add for AT-5245
	public String getPaymentMethodFromProperty(String status) {
<span class="nc bnc" id="L213" title="All 2 branches missed.">		for (Map.Entry&lt;String, String&gt; m:mapPaymentList.entrySet()) {</span>
<span class="nc bnc" id="L214" title="All 2 branches missed.">			if (m.getKey().equalsIgnoreCase(status)) {</span>
<span class="nc" id="L215">				return m.getValue();</span>
			}
<span class="nc" id="L217">		}</span>
<span class="nc" id="L218">		return null;</span>
	}

	/**
	 * Business:-Mandatory fields required for payment method &quot;SWITCH/DEBIT&quot;.
	 * Implementation:- 1) Mandatory fields required for payment method
	 * &quot;SWITCH/DEBIT is checked and if null error is returned in field
	 * validator. 2)Debit card added date is checked whether null or not and in
	 * correct format or not.if not then error is returned in field validator.
	 */
	private FieldValidator getMandatoryFieldsforDebitCardPayment(FieldValidator fv, FundsInTrade trade) {
<span class="nc" id="L229">		fv.isValidObject(</span>
<span class="nc" id="L230">				new Object[] { trade.getCcFirstName(), trade.getBillAddressLine(), trade.getAvsResult(),</span>
<span class="nc" id="L231">						trade.getIsThreeds() },</span>
				new String[] { &quot;cc_first_name&quot;, &quot;bill_address_line&quot;, &quot;avs_result&quot;, &quot;is_threeds&quot; });
<span class="nc" id="L233">		fv.isDateInFormat(new String[] { trade.getDebitCardAddedDate() }, new String[] { &quot;debit_card_added_date&quot; },</span>
				Constants.RFC_TIMESTAMP_FORMAT);
<span class="nc" id="L235">		return fv;</span>
	}

	/**
	 * Business:-Optional date fields if present are checked whether in correct
	 * format or not.If not error is returned. Implementation:- 1) Trade
	 * clearance date if present is checked whether in correct format or not.If
	 * not error is returned in field validator. 2) DeviceInfo if present then
	 * deviceInfo date is checked whether in correct format or not.If not error
	 * is returned in field validator.
	 */
	private FieldValidator getOptionalDateFields(FieldValidator fv, FundsInCreateRequest fundsInRequest) {
<span class="nc" id="L247">		FundsInTrade trade = fundsInRequest.getTrade();</span>
<span class="nc" id="L248">		DeviceInfo deviceInfo = fundsInRequest.getDeviceInfo();</span>
<span class="nc bnc" id="L249" title="All 4 branches missed.">		if (!(fv.isNULL(trade.getChequeClearanceDate())) &amp;&amp; (!fv.isEmpty(trade.getChequeClearanceDate()))) {</span>
<span class="nc" id="L250">			fv.isDateInFormat(new String[] { trade.getChequeClearanceDate() }, new String[] { &quot;cheque_clearance_date&quot; },</span>
					Constants.RFC_TIMESTAMP_FORMAT);
		}
<span class="nc bnc" id="L253" title="All 4 branches missed.">		if (null != deviceInfo &amp;&amp; !StringUtils.isNullOrEmpty(deviceInfo.getOsDateAndTime())) {</span>
<span class="nc" id="L254">			deviceInfo.setOsDateAndTime(DateTimeFormatter.getDateTimeInRFC3339(deviceInfo.getOsDateAndTime()));</span>

		}
<span class="nc" id="L257">		return fv;</span>

	}

	/**
	 * Removes the spaces and make lower case.
	 *
	 * @param requestValue
	 *            the request value
	 * @return the string
	 */
	private String removeSpacesAndmakeLowercase(String requestValue) {
<span class="nc" id="L269">		return requestValue.replace(&quot; &quot;, &quot;&quot;).toLowerCase();</span>
	}

	private FieldValidator validateDeleteReuqest(FundsInDeleteRequest fRequest) {

<span class="nc" id="L274">		FieldValidator fv = new FieldValidator();</span>

<span class="nc" id="L276">		fv.isValidObject(</span>
<span class="nc" id="L277">				new Object[] { fRequest.getOrgCode(), fRequest.getSourceApplication(), fRequest.getPaymentFundsInId() },</span>
				new String[] { ORG_CODE, &quot;source_application&quot;, &quot;payment_fundsin_id&quot; });
<span class="nc" id="L279">		return fv;</span>
	}

	private FieldValidator validateReuqest(FundsInSanctionResendRequest fRequest) {
<span class="nc" id="L283">		FieldValidator fv = new FieldValidator();</span>
<span class="nc" id="L284">		fv.isValidObject(</span>
<span class="nc" id="L285">				new Object[] { fRequest.getTradePaymentId(), fRequest.getOrgCode(), fRequest.getPaymentInId() },</span>
				new String[] { &quot;tradePaymentId&quot;, &quot;orgCode&quot;, &quot;paymentInId&quot; });

<span class="nc" id="L288">		return fv;</span>
	}

	private FieldValidator validateResendRequest(FundsInCustomCheckResendRequest fundsInRequest,
			ServiceInterfaceType type) {
<span class="nc" id="L293">		FieldValidator fv = new FieldValidator();</span>
<span class="nc bnc" id="L294" title="All 3 branches missed.">		switch (type) {</span>
		case FUNDSIN:
<span class="nc" id="L296">			fv.isEmpty(</span>
<span class="nc" id="L297">					new String[] { fundsInRequest.getPaymentInId().toString(),</span>
<span class="nc" id="L298">							fundsInRequest.getTradeAccountNumber(), },</span>
					new String[] { &quot;paymentInId&quot;, &quot;tradeAccountNumber&quot; });
<span class="nc" id="L300">			break;</span>
		case FUNDSOUT:
<span class="nc" id="L302">			fv.isEmpty(new String[] { fundsInRequest.getPaymentInId().toString() }, new String[] { &quot;paymentOutId&quot; });</span>
<span class="nc" id="L303">			break;</span>
		default:
<span class="nc" id="L305">			fv.addError(Constants.MSG_MISSING_INFO, &quot;something went wrrong&quot;);</span>
			break;
		}
<span class="nc" id="L308">		return fv;</span>
	}

	/**
	 * Validate resend reuqest.
	 *
	 * @param message
	 *            the message
	 * @param correlationID
	 *            the correlation ID
	 * @return the message
	 */
	public Message&lt;MessageContext&gt; validateFraugsterResendReuqest(Message&lt;MessageContext&gt; message) {
<span class="nc" id="L321">		MessageExchange msgExchange = message.getPayload().getGatewayMessageExchange();</span>
<span class="nc" id="L322">		FundsInFraugsterResendRequest request = msgExchange.getRequest(FundsInFraugsterResendRequest.class);</span>
<span class="nc" id="L323">		FieldValidator fv = new FieldValidator();</span>
<span class="nc" id="L324">		fv.isValidObject(</span>
<span class="nc" id="L325">				new Object[] { request.getPaymentFundsInId(), request.getTradeAccountNumber(), request.getOrgCode(),</span>
<span class="nc" id="L326">						request.getCustType() },</span>
				new String[] { &quot;fundsInId&quot;, &quot;tradeaccountNumber&quot;, ORG_CODE, CUST_TYPE });

<span class="nc" id="L329">		FraugsterResendResponse response = new FraugsterResendResponse();</span>
<span class="nc" id="L330">		createBaseResponse(response, fv, FundsInReasonCode.MISSINGINFO.getReasonCode(), Constants.MSG_MISSING_INFO, &quot;&quot;);</span>
<span class="nc" id="L331">		msgExchange.setResponse(response);</span>
<span class="nc" id="L332">		return message;</span>
	}

	/**
	 * Validate resend reuqest.
	 *
	 * @param message
	 *            the message
	 * @param correlationID
	 *            the correlation ID
	 * @return the message
	 */
	public Message&lt;MessageContext&gt; validateBlacklistResendReuqest(Message&lt;MessageContext&gt; message) {
<span class="nc" id="L345">		MessageExchange msgExchange = message.getPayload().getGatewayMessageExchange();</span>
<span class="nc" id="L346">		FundsInBlacklistResendRequest request = msgExchange.getRequest(FundsInBlacklistResendRequest.class);</span>
<span class="nc" id="L347">		FieldValidator fv = new FieldValidator();</span>
<span class="nc" id="L348">		fv.isValidObject(</span>
<span class="nc" id="L349">				new Object[] { request.getPaymentFundsInId(), request.getTradeAccountNumber(), request.getOrgCode(),</span>
<span class="nc" id="L350">						request.getCustType() },</span>
				new String[] { &quot;fundsInId&quot;, &quot;tradeaccountNumber&quot;, ORG_CODE, CUST_TYPE });

<span class="nc" id="L353">		BlacklistResendResponse response = new BlacklistResendResponse();</span>
<span class="nc" id="L354">		createBaseResponse(response, fv, FundsInReasonCode.MISSINGINFO.getReasonCode(), Constants.MSG_MISSING_INFO, &quot;&quot;);</span>
<span class="nc" id="L355">		msgExchange.setResponse(response);</span>
<span class="nc" id="L356">		return message;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>