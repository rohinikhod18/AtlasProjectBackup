<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MessageExchange.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-service</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.compliancesrv.msg</a> &gt; <span class="el_source">MessageExchange.java</span></div><h1>MessageExchange.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.compliancesrv.msg;

import java.io.Serializable;
import java.util.Collection;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

import com.currenciesdirect.gtg.compliance.commons.domain.msg.ServiceMessage;
import com.currenciesdirect.gtg.compliance.commons.domain.msg.ServiceMessageResponse;
import com.currenciesdirect.gtg.compliance.compliancesrv.InternalProcessingCode;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.OperationEnum;
import com.currenciesdirect.gtg.compliance.compliancesrv.core.ServiceInterfaceType;
import com.currenciesdirect.gtg.compliance.compliancesrv.domain.reg.EventServiceLog;

/**
 * The Class MessageExchange.
 */
@SuppressWarnings(&quot;unchecked&quot;)
<span class="fc" id="L19">public class MessageExchange implements Serializable {</span>

	/** The Constant serialVersionUID. */
	private static final long serialVersionUID = 1L;

	/** The service type enum. */
	private ServiceTypeEnum serviceTypeEnum;

	/** The service interface. */
	private ServiceInterfaceType serviceInterface;
	
	/** The operation. */
	private OperationEnum operation;

	/** The request. */
	private ServiceMessage request;

	/** The response. */
	private ServiceMessageResponse response;
	
	/** The event service log. */
<span class="fc" id="L40">	private EventServiceLogContainer eventServiceLog = new EventServiceLogContainer();</span>

	/** The service name. */
	private String serviceName;
	
	/** The service response. */
	private String serviceResponse;
	
	/** The internal processing code. */
<span class="fc" id="L49">	private InternalProcessingCode internalProcessingCode = InternalProcessingCode.NOT_CLEARED;</span>

	/**
	 * Gets the service interface.
	 *
	 * @return the service interface
	 */
	public ServiceInterfaceType getServiceInterface() {
<span class="fc" id="L57">		return serviceInterface;</span>
	}

	/**
	 * Sets the service interface.
	 *
	 * @param serviceInterface the new service interface
	 */
	public void setServiceInterface(ServiceInterfaceType serviceInterface) {
<span class="fc" id="L66">		this.serviceInterface = serviceInterface;</span>
<span class="fc" id="L67">	}</span>

	/**
	 * Gets the operation.
	 *
	 * @return the operation
	 */
	public OperationEnum getOperation() {
<span class="fc" id="L75">		return operation;</span>
	}

	/**
	 * Sets the operation.
	 *
	 * @param operation the new operation
	 */
	public void setOperation(OperationEnum operation) {
<span class="fc" id="L84">		this.operation = operation;</span>
<span class="fc" id="L85">	}</span>

	/**
	 * Gets the service type enum.
	 *
	 * @return the service type enum
	 */
	public ServiceTypeEnum getServiceTypeEnum() {
<span class="fc" id="L93">		return serviceTypeEnum;</span>
	}

	/**
	 * Sets the service type enum.
	 *
	 * @param serviceTypeEnum the new service type enum
	 */
	public void setServiceTypeEnum(ServiceTypeEnum serviceTypeEnum) {
<span class="fc" id="L102">		this.serviceTypeEnum = serviceTypeEnum;</span>
<span class="fc" id="L103">	}</span>

	/**
	 * Gets the request.
	 *
	 * @return the request
	 */
	public ServiceMessage getRequest() {
<span class="fc" id="L111">		return request;</span>
	}
	
	/**
	 * Gets the request.
	 *
	 * @param &lt;T&gt; the generic type
	 * @param requestClass the request class
	 * @return the request
	 */
	@SuppressWarnings(&quot;squid:S1172&quot;)
	public &lt;T extends ServiceMessage&gt; T getRequest(Class&lt;T&gt; requestClass) {
<span class="fc" id="L123">		return (T)request;</span>
	}

	/**
	 * Sets the request.
	 *
	 * @param request the new request
	 */
	public void setRequest(ServiceMessage request) {
<span class="fc" id="L132">		this.request = request;</span>
<span class="fc" id="L133">	}</span>

	/**
	 * Gets the response.
	 *
	 * @return the response
	 */
	public ServiceMessageResponse getResponse() {
<span class="fc" id="L141">		return response;</span>
	}

	/**
	 * Gets the response.
	 *
	 * @param &lt;T&gt; the generic type
	 * @param t the t
	 * @return the response
	 */
	@SuppressWarnings(&quot;squid:S1172&quot;)
	public &lt;T extends ServiceMessageResponse&gt; T getResponse(Class&lt;T&gt; t) {
<span class="fc" id="L153">		return (T)response;</span>
	}
	
	/**
	 * Sets the response.
	 *
	 * @param response the new response
	 */
	public void setResponse(ServiceMessageResponse response) {
<span class="fc" id="L162">		this.response = response;</span>
<span class="fc" id="L163">	}</span>

	/**
	 * Gets the internal processing code.
	 *
	 * @return the internal processing code
	 */
	public InternalProcessingCode getInternalProcessingCode() {
<span class="nc" id="L171">		return internalProcessingCode;</span>
	}

	/**
	 * Sets the internal processing code.
	 *
	 * @param internalProcessingCode the new internal processing code
	 */
	public void setInternalProcessingCode(InternalProcessingCode internalProcessingCode) {
<span class="fc" id="L180">		this.internalProcessingCode = internalProcessingCode;</span>
<span class="fc" id="L181">	}</span>

	/**
	 * Clear.
	 */
	public void clear() {
<span class="nc bnc" id="L187" title="All 2 branches missed.">		if(eventServiceLog!=null){</span>
<span class="nc" id="L188">		this.eventServiceLog.cleanup();</span>
		}
		
<span class="nc bnc" id="L191" title="All 4 branches missed.">		if(request!= null &amp;&amp; request.getAdditionalAttributes()!=null){</span>
<span class="nc" id="L192">			this.request.clear();</span>
			}
		
<span class="nc bnc" id="L195" title="All 4 branches missed.">		if(response!=null&amp;&amp;response.getAdditionalAttributes()!=null){</span>
<span class="nc" id="L196">			this.response.clear();</span>
			}
<span class="nc" id="L198">		eventServiceLog = null;</span>
<span class="nc" id="L199">		serviceTypeEnum = null;</span>
<span class="nc" id="L200">		request = null;</span>
<span class="nc" id="L201">		response = null;</span>
<span class="nc" id="L202">		internalProcessingCode = null;</span>
<span class="nc" id="L203">		serviceName = null;</span>
<span class="nc" id="L204">		serviceResponse = null;</span>
<span class="nc" id="L205">		operation = null;</span>
<span class="nc" id="L206">	}</span>

	/**
	 * Gets the service name.
	 *
	 * @return the service name
	 */
	public String getServiceName() {
<span class="nc" id="L214">		return serviceName;</span>
	}

	/**
	 * Sets the service name.
	 *
	 * @param serviceName the new service name
	 */
	public void setServiceName(String serviceName) {
<span class="nc" id="L223">		this.serviceName = serviceName;</span>
<span class="nc" id="L224">	}</span>

	/**
	 * Gets the service response.
	 *
	 * @return the service response
	 */
	public String getServiceResponse() {
<span class="nc" id="L232">		return serviceResponse;</span>
	}

	/**
	 * Sets the service response.
	 *
	 * @param serviceResponse the new service response
	 */
	public void setServiceResponse(String serviceResponse) {
<span class="nc" id="L241">		this.serviceResponse = serviceResponse;</span>
<span class="nc" id="L242">	}</span>

	/**
	 * Adds the event service log.
	 *
	 * @param log the log
	 */
	public void addEventServiceLog(EventServiceLog log){
<span class="fc" id="L250">		eventServiceLog.addEventServiceLog(log);</span>
<span class="fc" id="L251">	}</span>
	
	/**
	 * Gets the event service log.
	 *
	 * @param serviceTypeEnum the service type enum
	 * @param entityType the entity type
	 * @param entityId the entity id
	 * @return the event service log
	 */
	public EventServiceLog getEventServiceLog(ServiceTypeEnum serviceTypeEnum, String entityType, Integer entityId){
<span class="fc" id="L262">		return eventServiceLog.getEventServiceLog(serviceTypeEnum.getShortName()+entityType+entityId);</span>
	}
	
	/**
	 * Gets the event service log as list.
	 *
	 * @return the event service log as list
	 */
	public Collection&lt;EventServiceLog&gt; getEventServiceLogAsList(){
<span class="fc" id="L271">		return eventServiceLog.getEventServiceLogAsList();</span>
	}

	/* (non-Javadoc)
	 * @see java.lang.Object#toString()
	 */
	@Override
	public String toString() {
<span class="nc" id="L279">		return &quot;MessageExchange [serviceTypeEnum=&quot; + serviceTypeEnum + &quot;, request=&quot; + request + &quot;, response=&quot; + response</span>
				+ &quot;]&quot;;
	}
	
	
	
}
<span class="fc" id="L286">class EventServiceLogContainer implements Serializable{</span>

	/**
	 * 
	 */
	private static final long serialVersionUID = 4082013938614082385L;
<span class="fc" id="L292">	private Map&lt;String, EventServiceLog&gt; eventServiceLogs = new ConcurrentHashMap&lt;&gt;(7);</span>
	
	public void addEventServiceLog(EventServiceLog log){
<span class="fc" id="L295">		eventServiceLogs.put(log.getServiceName()+log.getEntityType()+log.getEntityId(), log);</span>
<span class="fc" id="L296">	}</span>
	
	public EventServiceLog getEventServiceLog(String key){
<span class="fc" id="L299">		return eventServiceLogs.get(key);</span>
	}
	
	public Collection&lt;EventServiceLog&gt; getEventServiceLogAsList(){
<span class="fc" id="L303">		return eventServiceLogs.values();</span>
	}
	
	public void cleanup(){
<span class="nc" id="L307">		eventServiceLogs.clear();</span>
<span class="nc" id="L308">		eventServiceLogs = null;</span>
<span class="nc" id="L309">	}</span>
	
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>