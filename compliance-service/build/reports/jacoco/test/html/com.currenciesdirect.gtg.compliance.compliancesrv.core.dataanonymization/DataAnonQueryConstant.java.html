<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DataAnonQueryConstant.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">compliance-service</a> &gt; <a href="index.source.html" class="el_package">com.currenciesdirect.gtg.compliance.compliancesrv.core.dataanonymization</a> &gt; <span class="el_source">DataAnonQueryConstant.java</span></div><h1>DataAnonQueryConstant.java</h1><pre class="source lang-java linenums">package com.currenciesdirect.gtg.compliance.compliancesrv.core.dataanonymization;

<span class="nc" id="L3">@SuppressWarnings(&quot;squid:S1192&quot;)</span>
public enum DataAnonQueryConstant {
	
<span class="nc" id="L6">	GET_ACCOUT_CONTACTS_ID(&quot;SELECT a.ID AS AccountID,&quot; + </span>
			&quot; a.TradeAccountNumber AS TradeAccountNumber, &quot; + 
			&quot; case &quot; + 
			&quot; when a.[type] = 2 then 'PFX' &quot; + 
			&quot; when a.[type] = 1 then 'CFX' &quot; + 
			&quot; ELSE 'CFX (etailer)' &quot; + 
			&quot; END as [type], &quot; + 
			&quot; a.TradeAccountID as TradeAccountID, &quot; + 
			&quot; a.Version as AccountVersion, &quot; + 
			&quot; aa.[Attributes] as AccountAttributes, &quot; + 
			&quot; c.ID AS ContactID,      &quot; + 
			&quot; c.TradeContactID AS TradeContactID, &quot; + 
			&quot; c.Version as ContactVersion, &quot; + 
			&quot; ca.[Attributes] as ContactAttributes &quot; + 
			&quot; FROM Account a&quot; + 
			&quot; JOIN Contact c on c.AccountID = a.ID &quot; + 
			&quot; JOIN AccountAttribute aa on aa.id = a.ID &quot; + 
			&quot; JOIN ContactAttribute ca on ca.id = c.ID &quot; + 
			&quot; WHERE a.CRMAccountID = ?&quot;),
	
<span class="nc" id="L26">	GET_EXISTING_PROCESS_FROM_PROCESSQUEUE(&quot;select a.NewReferenceID as ReferenceID, &quot; + </span>
			&quot; a.TradeAccountNumber as CustomerNumber, &quot; + 
			&quot; a.AnonStatus as status &quot; + 
			&quot; from DataAnonProcessQueue a WHERE a.NewReferenceID = ?&quot;),
	
<span class="nc" id="L31">	INSERT_INTO_DATA_ANON_PROCESSQUEUE(&quot;INSERT into DataAnonProcessQueue([NewReferenceID],[TradeAccountNumber],[AccountID],[ContactID],[AnonJson],[AnonStatus],&quot;</span>
			+ &quot;[AnonProcessStatus],[RetryCount],[CreatedBy],[CreatedOn],[UpdatedBy],[UpdatedOn])&quot; + 
			&quot;VALUES (?,?,?,?,?,?,?,?,?,?,?,?)&quot;),
	
<span class="nc" id="L35">	UPDATE_ACCOUNT(&quot;UPDATE Account SET Name = ?,TradeAccountNumber=? WHERE ID = ?&quot;),</span>
	
<span class="nc" id="L37">	UPDATE_ACCOUNT_ATTRIBUTE_PFX(&quot;UPDATE AccountAttribute SET [Attributes] = &quot;</span>
			+ &quot;JSON_MODIFY(JSON_MODIFY([Attributes],'$.act_name',?),'$.trade_acc_number',?) WHERE ID = ?&quot;),
	
<span class="nc" id="L40">	UPDATE_ACCOUNT_ATTRIBUTE_CFX(&quot;UPDATE AccountAttribute SET [Attributes] = &quot;</span>
			+ &quot;JSON_MODIFY(JSON_MODIFY(JSON_MODIFY(JSON_MODIFY([Attributes],'$.company.company_phone',?),&quot;
			+ &quot;'$.company.billing_address',?),'$.act_name',?),'$.trade_acc_number',?) &quot; + 
			&quot;WHERE ID = ?&quot;),
	
<span class="nc" id="L45">	UPDATE_ACCOUNT_ATTRIBUTE_HISTORY_PFX(&quot;UPDATE AccountAttributeHistory SET [Attributes] = &quot; + </span>
			&quot;JSON_MODIFY(JSON_MODIFY([Attributes],'$.act_name',?),'$.trade_acc_number',?) WHERE AccountID = ?&quot;),
	
<span class="nc" id="L48">	UPDATE_ACCOUNT_ATTRIBUTE_HISTORY_CFX(&quot;UPDATE AccountAttributeHistory SET [Attributes] = &quot; + </span>
			&quot;JSON_MODIFY(JSON_MODIFY(JSON_MODIFY(JSON_MODIFY([Attributes],'$.company.company_phone',?),&quot; + 
			&quot;'$.company.billing_address',?),'$.act_name',?),'$.trade_acc_number',?)&quot; + 
			&quot;WHERE AccountID = ?&quot;),
	
<span class="nc" id="L53">	UPDATE_CONTACT(&quot;UPDATE Contact SET Name = ? WHERE AccountID = ?&quot;),</span>
	
<span class="nc" id="L55">	UPDATE_CONTACT_ATTRIBUTE(&quot;UPDATE ContactAttribute SET [ATTRIBUTES] = ? WHERE ID in (SELECT ID FROM Contact WHERE AccountID = ?)&quot;),</span>
	
<span class="nc" id="L57">	UPDATE_CONTACT_ATTRIBUTE_HISTORY(&quot;UPDATE ContactAttributeHistory SET [ATTRIBUTES] = ? WHERE ContactID in (SELECT ID FROM Contact WHERE AccountID = ?)&quot;),</span>
	
<span class="nc" id="L59">	UPDATE_EVENT_SERVICE_LOG_FOR_REG_BLACKLIST(&quot;UPDATE EventServiceLog SET ProviderResponse = ? &quot; + </span>
			&quot;WHERE EventID in (SELECT ID FROM Event WHERE PaymentInID IS NULL AND PaymentOutID IS NULL AND AccountID = ?)&quot; + 
			&quot;AND ServiceType = 3;&quot;),
	
<span class="nc" id="L63">	UPDATE_EVENT_SERVICE_LOG_FOR_PAYIN_BLACKLIST(&quot;UPDATE EventServiceLog SET ProviderResponse = ? &quot; + </span>
			&quot;WHERE EventID in (SELECT ID FROM Event WHERE PaymentOutID IS NULL AND PaymentInID IS NOT NULL AND AccountID = ?) &quot; + 
			&quot;AND ServiceType = 3&quot;),
	
<span class="nc" id="L67">	UPDATE_EVENT_SERVICE_LOG_FOR_PAYOUT_BLACKLIST(&quot;UPDATE EventServiceLog SET ProviderResponse = ? &quot; + </span>
			&quot;WHERE EventID in (SELECT ID FROM Event WHERE PaymentInID IS NULL AND PaymentOutID IS NOT NULL AND AccountID = ?) &quot;+
			&quot;AND ServiceType = 3&quot;),
		
<span class="nc" id="L71">	UPDATE_PROFILE_ACTIVITY_LOG_DETAIL(&quot;UPDATE ProfileActivityLogDetail SET [Log] = ? &quot;</span>
			+ &quot;WHERE ActivityID in (SELECT ID from ProfileActivityLog WHERE AccountID = ?)&quot;),
	
<span class="nc" id="L74">	UPDATE_DATAANON_STATUS(&quot;UPDATE DataAnonProcessQueue SET AnonStatus = ? WHERE NewReferenceID = ?&quot;),</span>
	
<span class="nc" id="L76">	DELETE_DATA_ANON_PROCESS(&quot;DELETE FROM DataAnonProcessQueue WHERE NewReferenceID = ?&quot;);</span>
	
	private String query;
	
<span class="nc" id="L80">	DataAnonQueryConstant(String query){</span>
<span class="nc" id="L81">		this.query = query;</span>
<span class="nc" id="L82">	}</span>
	
	public String getQuery(){
<span class="nc" id="L85">		return this.query;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>